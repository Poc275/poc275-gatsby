function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},s=t.parcelRequire65d0;null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return o[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequire65d0=s);var a=s("8zQx8"),r=s("2wqqk"),i=s("gsP8W");const c=new a.PublicClientApplication({auth:{clientId:"53bfecae-5150-4a44-8b5b-957ac4839fa4",authority:"https://login.microsoftonline.com/4583a017-e1c7-4872-bb63-71c8f247fb02"}}),d=c.getAllAccounts(),l={scopes:["https://storage.azure.com/user_impersonation"],account:d[0],forceRefresh:!1},p={scopes:["https://storage.azure.com/user_impersonation"],loginHint:d[0].username};c.acquireTokenSilent(l).then((t=>{const o=new URLSearchParams(window.location.search);if(o.has("id")){const n=o.get("id"),s=e(i)[n];document.getElementById("backdrop").style.backgroundImage=s.backdrop_path?`url(https://image.tmdb.org/t/p/w780/${s.backdrop_path})`:`url(https://image.tmdb.org/t/p/w780/${s.poster_path})`,document.getElementById("title").textContent=s.name,document.getElementById("tagline").textContent=s.tagline,document.getElementById("overview").textContent=s.overview.split(".")[0],document.getElementById("total-episodes").textContent=`${s.number_of_episodes} episodes`,m(t.accessToken,n)}else console.error("Show not found")})).catch((e=>{if(console.error(e),e instanceof a.InteractionRequiredAuthError)return c.acquireTokenRedirect(p)}));const m=async(e,t)=>{const o={getToken:()=>({token:e,expiresOnTimestamp:Date.now()+36e5})},n=new r.BlobServiceClient("https://azuretv.blob.core.windows.net/",o).getContainerClient("media"),s=[];for await(const e of n.listBlobsByHierarchy("/",{prefix:`TV/${t}/`})){const t=n.getBlockBlobClient(e.name),o=(await t.getProperties()).metadata;s.push({season:parseInt(o.season),episode:parseInt(o.episode),blob:e})}s.sort(((e,t)=>e.season<t.season?-1:e.season===t.season?e.episode-t.episode:1));const a=[];s.forEach((e=>{-1===a.indexOf(e.season)&&a.push(e.season)})),u(s,t)},u=(t,o)=>{const n=e(i)[o];t.forEach((e=>{const t=n[`season/${e.season}`],o=t.episodes[e.episode-1],s=document.createElement("div"),a=document.createElement("div");s.className="episode",a.className="episode-still";let r="";r=o.still_path?`https://image.tmdb.org/t/p/w185/${o.still_path}`:t.poster_path?`https://image.tmdb.org/t/p/w185/${t.poster_path}`:`https://image.tmdb.org/t/p/w185/${n.poster_path}`,a.style.backgroundImage=`url(${r})`;const i=document.createElement("button");i.className="play-btn",i.textContent="â–¶",i.addEventListener("click",(()=>{h(e.blob,o,r)}),!1),a.appendChild(i);const c=document.createElement("p");c.className="episode-title",c.textContent=`Series ${e.season}: ${e.episode}. ${o.name}`;const d=document.createElement("p");d.textContent=o.overview.split(".")[0],s.appendChild(a),s.appendChild(c),s.appendChild(d),document.getElementById("episodes").appendChild(s)}))},h=(e,t,o)=>{const n=cast.framework.CastContext.getInstance().getCurrentSession(),s=new chrome.cast.media.TvShowMediaMetadata;s.episode=t.episode_number,s.images=[o],s.originalAirdate=t.air_date,s.season=t.season_number,s.title=t.name;const a=new chrome.cast.media.MediaInfo(`https://azuretv.blob.core.windows.net/media/${e.name}`,e.properties.contentType);a.metadata=s;const r=new chrome.cast.media.LoadRequest(a);n.loadMedia(r).then((()=>{console.log("Load succeeded")})).catch((e=>{console.error("Error code",e)}))};
//# sourceMappingURL=show.e1dcde31.js.map
