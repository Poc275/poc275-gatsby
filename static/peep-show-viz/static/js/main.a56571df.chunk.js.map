{"version":3,"sources":["Welcome.js","visualisations/chord/ChordDiagram.js","visualisations/chord/ChordDiagramTutorial.js","reference/ReferenceData.js","visualisations/words/SearchResult.js","visualisations/words/WordSearch.js","visualisations/locations/LocationRadialBubbleChart.js","visualisations/locations/Locations.js","visualisations/timeline/Timeline.js","visualisations/sentences/SentencesChart.js","visualisations/sentences/Averages.js","visualisations/sentences/InternalProportion.js","visualisations/sentences/TopNouns.js","visualisations/sentences/Sentences.js","visualisations/sentiment/Sentiment.js","visualisations/stats/Lines.js","visualisations/stats/Swears.js","visualisations/sentences/SentenceAnnotation.js","visualisations/sentences/SentenceAnnotations.js","visualisations/sentiment/SentimentAnnotations.js","visualisations/words/WordAnnotations.js","visualisations/stats/StatsAnnotations.js","Explorer.js","Test.js","App.js","reportWebVitals.js","index.js"],"names":["Welcome","history","useHistory","useLocation","useEffect","tl","gsap","timeline","to","document","querySelector","duration","ease","rotation","transformOrigin","data","name","height","opacity","zIndex","querySelectorAll","forEach","line","animTime","Math","floor","random","top","title","left","section","goToSeries","series","push","className","id","href","onClick","ChordDiagram","useState","setData","svgContainer","useRef","useParams","url","a","fetch","then","res","json","fetchChordData","process","width","outerRadius","min","innerRadius","ribbon","d3","radius","padAngle","arc","chord","sortSubgroups","sortChords","formatValue","svg","current","attr","chordData","people","names","map","p","colours","colour","avatars","avatar","totalLines","spokeTo","tickStep","flat","chords","group","append","selectAll","groups","join","on","d","i","transition","delay","style","index","text","listener","spokeToSuffix","filteredIndices","Set","filter","add","source","target","inverseFilteredIndices","length","has","select","fadeOut","value","groupTick","k","endAngle","startAngle","angle","PI","arcLabels","each","grads","enter","cos","sin","remove","ref","ChordDiagramTutorial","this","tutorialOne","tutorialTwo","tutorialThree","selectId","tutorialFour","tutorialFive","ReferenceData","chordAnnotations","chordTutorial","mounds","seriesColours","seriesSummaries","episodeTitles","characterColours","seriesCharacters","SearchResult","props","speakerImg","Speaker","trim","replace","toLowerCase","listenerImg","To","refData","backgroundImage","border","Line","Episode","Location","WordSearch","referenceData","searchTerm","setSearchTerm","searchResults","setSearchResults","topWords","setTopWords","topWordUsage","setTopWordUsage","topWordSaidBy","setTopWordSaidBy","seriesColour","setSeriesColour","fetchWordData","results","includes","fetchTopWordsData","showTopWordUsage","event","borderBottom","word","outerText","usage","saidBy","person","who","total","clearTopWordUsage","Object","keys","idx","onMouseOver","onMouseLeave","w","type","placeholder","onChange","LocationRadialBubbleChart","chart","longest","margin","locations","flatMap","locationLengths","values","uniqueLocations","reduce","b","indexOf","locationRadii","loc","theta","arcGenerator","split","domain","sqrt","currentTarget","display","Locations","setLongest","fetchLocationData","Timeline","initialisedSvg","setInitialisedSvg","xAxisFunction","setXAxisFunction","yAxisFunction","setYAxisFunction","fetchTimelineData","timelines","markers","x","end","range","y","padding","xAxis","tickValues","tickFormat","tickSize","call","start","e","lines","episodeTimelines","console","log","merge","exit","circles","SentencesChart","maxLines","speaker","episode","NumWords","minIdx","ticks","tickSizeOuter","step","Internal","header","Averages","averageData","InteralProportion","sentenceData","internalPercentage","externalPercentage","internalRadius","externalRadius","internalArc","externalArc","TopNouns","topNounData","Sentences","schema","Lines","datasets","setDatasets","topNounDatasets","setTopNounDatasets","averageSentenceLengthDatasets","setAverageSentenceLengthDatasets","episodeDatasets","s","markTopNouns","jezTopNouns","prevDatasets","markAverageSentenceLength","jezAverageSentenceLength","fetchSentenceData","fetchTopNounData","fetchAverageSentenceLengthData","InternalProportion","Sentiment","forwardRef","groupedData","setGroupedData","setSvg","setX","setY","yAxisDraw","setYAxisDraw","setFinished","neg","neu","pos","compound","sentence","fetchSentimentData","episodeData","episodeSentiment","Array","from","key","get","v","restructuredData","es","val","groupData","paddingInner","xAxisDraw","tickPadding","bandwidth","velocityDecay","force","strength","replaceAll","tip","xPos","offsetX","clientX","yPos","clientY","html","empty","useImperativeHandle","showGroupedData","newDomain","max","speakerGroups","delete","dataset","pairedData","el","chroma","alpha","hex","drawLines","tick","mouseover","tooltipText","toFixed","mousemove","mouseout","update","Season","NumLines","fetchNumLinesData","ceil","g","brighten","episodeTitle","tooltipHtml","Swears","NumSwears","fetchSwearData","SentenceAnnotation","annotation","isPlaying","setIsPlaying","internal","audioElement","Audio","audio","addEventListener","node","getBoundingClientRect","play","intervalId","setInterval","percent","currentTime","delta","clearInterval","SentenceAnnotations","sentenceAnnotations","audioAnnotations","SentimentAnnotations","characterSentiments","WordAnnotations","annotations","StatsAnnotations","linesAnnotations","Explorer","sentenceAnnotationsData","sentimentAnnotationsData","wordAnnotationData","statsAnnotations","visualisation","setVisualisation","dataStep","setDataStep","showVisual","setShowVisual","seriesSummary","setSeriesSummary","setChordTutorial","setChordAnnotations","setSentenceAnnotations","setAudioAnnotations","sentimentRef","sentimentAnnotations","setSentimentAnnotations","sentimentSelectedCharacter","setSentimentSelectedCharacter","setWordAnnotations","setLinesAnnotations","chordDiagramTutorial","scrolly","figure","scroller","scrollama","setup","offset","onStepEnter","scrolledDataStep","element","trigger","classed","component","getVisualisation","direction","sentenceIndex","handleResize","figureHeight","window","innerHeight","figureMarginTop","resize","filterSentimentBubbles","character","elements","getElementsByClassName","prototype","classList","data-step","data-trigger","data-sentence","c","data-character","Test","App","location","TransitionGroup","CSSTransition","classNames","timeout","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a56571df.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { gsap } from \"gsap\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport \"./Welcome.css\";\r\n\r\nfunction Welcome() {\r\n    const history = useHistory();\r\n    let location = useLocation();\r\n\r\n    useEffect(() => {\r\n        const tl = gsap.timeline();\r\n\r\n        // rotate the cube by 450 deg\r\n        tl.to(document.querySelector(\".loader__cube\"), {\r\n            duration: 1.5,\r\n            ease: \"power2.inOut\",\r\n            rotation: \"+= 450\",\r\n            transformOrigin: \"center center\"\r\n        });\r\n\r\n        // shrink the line (height = 0)\r\n        tl.to(document.querySelector(\".loader__line\"), {\r\n            data: { name: \"Line (shrink)\" },\r\n            duration: 1.5,\r\n            ease: \"none\",\r\n            height: 0\r\n        }, 0);\r\n\r\n        // hide the loader after a delay of 1.4 seconds\r\n        tl.to(document.querySelector(\".loader\"), {\r\n            data: { name: \"Loader (hide)\" },\r\n            duration: 1,\r\n            opacity: 0\r\n        }, 1.4);\r\n        \r\n        tl.to(document.querySelector(\".loader\"), {\r\n            data: { name: \"Loader (hide)\" },\r\n            duration: 1,\r\n            zIndex: -1\r\n        }, 3);\r\n\r\n        // animate vertical line separators\r\n        document.querySelectorAll(\".section__line\").forEach((line) => {\r\n            const animTime = 0.1 * (Math.floor(Math.random() * (10 - 4) + 4));\r\n            \r\n            tl.to(line, animTime, {\r\n                ease: \"power1.in\",\r\n                top: 0\r\n            }, 1);\r\n        });\r\n\r\n        // section titles\r\n        document.querySelectorAll(\".section__title-overlay\").forEach((title) => {  \r\n            tl.to(title, 1, {\r\n              ease: \"power1.in\",\r\n              left: \"100%\"\r\n            }, 2);\r\n        });\r\n\r\n        // section image overlays\r\n        document.querySelectorAll(\".section__overlay\").forEach((section) => {  \r\n            tl.to(section, 1, {\r\n              ease: \"power1.inOut\",\r\n              left: \"100%\"\r\n            }, 2.5);\r\n        });\r\n    }, []);\r\n\r\n    const goToSeries = (series) => {\r\n        // console.log(series);\r\n        // const tl = gsap.timeline({\r\n        //     onComplete: () => { history.push(`${series}/explore`); }\r\n        // });\r\n\r\n        // document.querySelectorAll(\".section\").forEach((section) => {\r\n        //     const sectionHeight = section.offsetHeight;\r\n        //     const animDelay = ((Math.floor(Math.random() * (10 - 4) + 4)) * 0.1);\r\n\r\n        //     tl.to(section, 1, { ease: \"power2.easeInOut\", top: `-=${sectionHeight}` }, animDelay);\r\n        //     tl.to(section, 0.5, { opacity: 0 }, animDelay + 0.1);\r\n        // });\r\n\r\n        history.push(`${series}/explore`);\r\n    }\r\n\r\n    return (\r\n        <div className=\"welcome-body\">\r\n            <span id=\"release-ribbon\"><a href=\"https://poc275.me/peep-show#alpha\">Alpha - Find out more</a></span>\r\n\r\n            <div className=\"wrapper\">\r\n                <div className=\"loader\" id=\"js-loader\">\r\n                    <div className=\"loader__cube\" id=\"js-loader-cube\"></div>\r\n                    <div className=\"loader__line\" id=\"js-loader-line\"></div>\r\n                </div>\r\n\r\n                <div id=\"sections\" className=\"sections\">\r\n\r\n                    <div className=\"section section--first\" onClick={() => goToSeries(1)}>\r\n                        <div className=\"section__line\"></div>\r\n                        <div className=\"section__img section__img--first\"></div>\r\n                        <div className=\"section__overlay\"></div>\r\n                        <h2 className=\"section__title\">1</h2>\r\n                        <div className=\"section__title-overlay\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"section section--second\" onClick={() => goToSeries(2)}>\r\n                        <div className=\"section__line\"></div>\r\n                        <div className=\"section__img section__img--second\"></div>\r\n                        <div className=\"section__overlay\"></div>\r\n                        <h2 className=\"section__title\">2</h2>\r\n                        <div className=\"section__title-overlay\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"section section--third\" onClick={() => goToSeries(3)}>\r\n                        <div className=\"section__line\"></div>\r\n                        <div className=\"section__img section__img--third\"></div>\r\n                        <div className=\"section__overlay\"></div>\r\n                        <h2 className=\"section__title\">3</h2>\r\n                        <div className=\"section__title-overlay\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"section section--fourth\" onClick={() => goToSeries(4)}>\r\n                        <div className=\"section__line\"></div>\r\n                        <div className=\"section__img section__img--fourth\"></div>\r\n                        <div className=\"section__overlay\"></div>\r\n                        <h2 className=\"section__title\">4</h2>\r\n                        <div className=\"section__title-overlay\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"section section--fifth\" onClick={() => goToSeries(5)}>\r\n                        <div className=\"section__line\"></div>\r\n                        <div className=\"section__img section__img--fifth\"></div>\r\n                        <div className=\"section__overlay\"></div>\r\n                        <h2 className=\"section__title\">5</h2>\r\n                        <div className=\"section__title-overlay\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"section section--sixth\" onClick={() => goToSeries(6)}>\r\n                        <div className=\"section__line\"></div>\r\n                        <div className=\"section__img section__img--sixth\"></div>\r\n                        <div className=\"section__overlay\"></div>\r\n                        <h2 className=\"section__title\">6</h2>\r\n                        <div className=\"section__title-overlay\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"section section--seventh\" onClick={() => goToSeries(7)}>\r\n                        <div className=\"section__line\"></div>\r\n                        <div className=\"section__img section__img--seventh\"></div>\r\n                        <div className=\"section__overlay\"></div>\r\n                        <h2 className=\"section__title\">7</h2>\r\n                        <div className=\"section__title-overlay\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"section section--eighth\" onClick={() => goToSeries(8)}>\r\n                        <div className=\"section__line\"></div>\r\n                        <div className=\"section__img section__img--eighth\"></div>\r\n                        <div className=\"section__overlay\"></div>\r\n                        <h2 className=\"section__title\">8</h2>\r\n                        <div className=\"section__title-overlay\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"section section--ninth\" onClick={() => goToSeries(9)}>\r\n                        <div className=\"section__line\"></div>\r\n                        <div className=\"section__img section__img--ninth\"></div>\r\n                        <div className=\"section__overlay\"></div>\r\n                        <h2 className=\"section__title\">9</h2>\r\n                        <div className=\"section__title-overlay\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Welcome;","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\n\r\nfunction ChordDiagram() {\r\n    const [data, setData] = useState(null);\r\n    const svgContainer = useRef(null);\r\n    const { series } = useParams();\r\n\r\n    // fetch data hook\r\n    useEffect(() => {\r\n        async function fetchChordData(url) {\r\n            await fetch(url).then(res => res.json()).then(json => setData(json));\r\n        }\r\n        fetchChordData(`${process.env.PUBLIC_URL}/data/chords/chord-data-series-${series}.json`);\r\n    }, []);\r\n\r\n    // initialise chord diagram hook\r\n    useEffect(() => {\r\n        const height = 977 * .5;\r\n        const width = 1343 * .5;\r\n        const outerRadius = Math.min(width, height) * 0.5 - 50;\r\n        const innerRadius = outerRadius - 10;\r\n        const ribbon = d3.ribbon().radius(innerRadius - 2).padAngle(1 / innerRadius);\r\n        const arc = d3.arc().innerRadius(innerRadius).outerRadius(outerRadius);\r\n        const chord = d3.chord()\r\n            .padAngle(10 / innerRadius)\r\n            .sortSubgroups(d3.descending)\r\n            .sortChords(d3.descending);\r\n        const formatValue = d3.format(\".1~%\");\r\n        const svg = d3.select(svgContainer.current).attr(\"viewBox\", [-width / 2, -height / 2, width, height]);\r\n\r\n        if(data) {\r\n            const { chordData, people } = data;\r\n            const names = people.map(p => p.name);\r\n            const colours = people.map(p => p.colour);\r\n            const avatars = people.map(p => p.avatar);\r\n            const totalLines = people.map(p => p.totalLines);\r\n            const spokeTo = people.map(p => p.spokeTo);\r\n\r\n            const tickStep = d3.tickStep(0, d3.sum(chordData.flat()), 50);\r\n            const colour = d3.scaleOrdinal(names, colours);\r\n            const ticks = d => {\r\n                const k = (d.endAngle - d.startAngle) / d.value;\r\n                return d3.range(0, d.value, tickStep).map(value => {\r\n                    return {value, angle: value * k + d.startAngle};\r\n                });\r\n            };\r\n\r\n            const chords = chord(chordData);\r\n            const group = svg.append(\"g\")\r\n                    .attr(\"font-size\", 10)\r\n                    .attr(\"font-family\", \"sans-serif\")\r\n                .selectAll(\"g\")\r\n                .data(chords.groups)\r\n                .join(\"g\")\r\n                    .attr(\"class\", \"group\")\r\n                .on(\"mouseover\", fadeIn(0.1))\r\n                .on(\"mouseout\", fadeOut(0.8));\r\n\r\n            group.append(\"path\")\r\n                .attr(\"class\", \"arc\")\r\n                .attr(\"id\", d => `arc-${d.index}`)\r\n                // .attr(\"stroke\", d => colour(people[d.index]))\r\n                .attr(\"stroke\", \"#000\")\r\n                .attr(\"stroke-width\", \"0.2\")\r\n                .attr(\"fill\", d => colour(names[d.index]))\r\n                .attr(\"d\", arc);\r\n\r\n            group.append(\"title\")\r\n                .text(d => `${names[d.index]}\r\n                ${formatValue(d.value)}`);\r\n\r\n            const groupTick = group.append(\"g\")\r\n                .attr(\"class\", \"axis\")\r\n                .attr(\"id\", (d, i) => `axis-${i}`)\r\n                .selectAll(\"g\")\r\n                .data(ticks)\r\n                .join(\"g\")\r\n                    .attr(\"transform\", d => `rotate(${d.angle * 180 / Math.PI - 90}) translate(${outerRadius}, 0)`);\r\n\r\n            groupTick.append(\"line\")\r\n                .attr(\"stroke\", \"currentColor\")\r\n                .attr(\"x2\", 3)\r\n                .style(\"stroke-width\", 0.2);\r\n                  \r\n            groupTick.append(\"text\")\r\n                .attr(\"x\", 8)\r\n                .attr(\"dy\", \"0.35em\")\r\n                .attr(\"font-size\", 5)\r\n                .attr(\"transform\", d => d.angle > Math.PI ? \"rotate(180) translate(-16)\" : null)\r\n                .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\r\n                .text(d => formatValue(d.value));\r\n\r\n            // names\r\n            // group.append(\"text\")\r\n            //     .each(function(d) { d.angle = (d.startAngle + d.endAngle) / 2; })\r\n            //     .attr(\"dy\", \".35em\")\r\n            //     .attr(\"class\", \"titles\")\r\n            //     .attr(\"font-size\", 8)\r\n            //     .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\r\n            //     .attr(\"transform\", d => `rotate(${d.angle * 180 / Math.PI - 90})` + `translate(${innerRadius + 40})` + (d.angle > Math.PI ? \"rotate(180)\" : \"\"))\r\n            //     .text(d => `${names[d.index]}`);\r\n\r\n            // avatars\r\n            const arcLabels = group.append(\"g\")\r\n                .each((d) => { d.angle = (d.startAngle + d.endAngle) / 2; })\r\n                .attr(\"dy\", \".35em\")\r\n                .attr(\"id\", d => `avatar-${d.index}`)\r\n                .attr(\"class\", \"avatar\")\r\n                .attr(\"transform\", d => \"rotate(\" + (d.angle * 180 / Math.PI - 90) + \")\" + \"translate(\" + (innerRadius + 50) + \", 10)\" + (d.angle > Math.PI ? \"rotate(180)\" : \"translate(-20, -16)\"));\r\n\r\n            arcLabels.append(\"clipPath\")\r\n                    .attr(\"id\", d => `avatar-clip-${d.index}`)\r\n                .append(\"circle\")\r\n                    .attr(\"cx\", 10)\r\n                    .attr(\"cy\", 10)\r\n                    .attr(\"r\", 9);\r\n\r\n            // the images are rotated to make them vertical by reversing the label rotation (multiply by -1)\r\n            arcLabels.append(\"image\")\r\n                .attr(\"width\", 20)\r\n                .attr(\"height\", 20)\r\n                .attr(\"href\", d => `${process.env.PUBLIC_URL}/avatars/${avatars[d.index]}`)\r\n                .attr(\"clip-path\", d => `url(#avatar-clip-${d.index})`)\r\n                .attr(\"transform-origin\", \"10 10\")\r\n                .attr(\"transform\", d => \"rotate(\" + ((d.angle * 180 / Math.PI - 90) * -1) + \")\" + (d.angle > Math.PI ? \"rotate(180)\" : \"\"));\r\n\r\n            // add an avatar image border\r\n            arcLabels.append(\"circle\")\r\n                .attr(\"cx\", 10)\r\n                .attr(\"cy\", 10)\r\n                .attr(\"r\", 9)\r\n                .style(\"fill\", \"none\")\r\n                .style(\"stroke\", d => colours[d.index]);\r\n\r\n            svg.append(\"g\")\r\n                    .attr(\"fill-opacity\", 0.8)\r\n                .selectAll(\"path\")\r\n                .data(chords)\r\n                .join(\"path\")\r\n                    .style(\"mix-blend-mode\", \"multiply\")\r\n                    // .attr(\"fill\", d => colour(people[d.source.index]))\r\n                    .style(\"fill\", d => \"url(#chordGradient-\" + d.source.index + \"-\" + d.target.index + \")\")\r\n                    // .style(\"stroke\", d => d3.rgb(colour(people[d.source.index])).darker())\r\n                    .style(\"stroke\", \"#000\")\r\n                    .style(\"stroke-width\", \"0.2\")\r\n                    .attr(\"class\", \"chord\")\r\n                    .attr(\"d\", ribbon)\r\n                .append(\"title\")\r\n                .text(d => `${formatValue(d.source.value)} ${names[d.target.index]}  ${names[d.source.index]}${d.source.index === d.target.index ? \"\" : \r\n                    `\\n${formatValue(d.target.value)} ${names[d.source.index]}  ${names[d.target.index]}`}`);\r\n\r\n            const grads = svg.append(\"defs\").selectAll(\"linearGradient\")\r\n                .data(chords)\r\n                .enter().append(\"linearGradient\")\r\n                // create a unique id per chord\r\n                .attr(\"id\", d => \"chordGradient-\" + d.source.index + \"-\" + d.target.index)\r\n                // use entire SVG for setting locations instead of the object bounding box\r\n                .attr(\"gradientUnits\", \"userSpaceOnUse\")\r\n                // calculate x and y pos of starting point of gradient which is the centre point of the chord\r\n                // chords has a start and end angle for both the source and target of the chord, so the centre angle is:\r\n                // (end angle - start angle) / 2\r\n                // cosine gets you the x pos and sine the y pos\r\n                // as d3 calculates angles from the vertical subtract it from a quarter of a circle (Math.PI / 2)\r\n                .attr(\"x1\", (d, i) => innerRadius * Math.cos((d.source.endAngle - d.source.startAngle) / 2 + d.source.startAngle - Math.PI / 2))\r\n                .attr(\"y1\", (d, i) => innerRadius * Math.sin((d.source.endAngle - d.source.startAngle) / 2 + d.source.startAngle - Math.PI / 2))\r\n                // and the same for the end point of the gradient\r\n                .attr(\"x2\", (d, i) => innerRadius * Math.cos((d.target.endAngle - d.target.startAngle) / 2 + d.target.startAngle - Math.PI / 2))\r\n                .attr(\"y2\", (d, i) => innerRadius * Math.sin((d.target.endAngle - d.target.startAngle) / 2 + d.target.startAngle - Math.PI / 2));\r\n\r\n            // assign the linear gradient colours\r\n            // start (0%)\r\n            grads.append(\"stop\")\r\n                .attr(\"offset\", \"0%\")\r\n                .attr(\"stop-color\", d => colours[d.source.index]);\r\n\r\n            // end (100%)\r\n            grads.append(\"stop\")\r\n                .attr(\"offset\", \"100%\")\r\n                .attr(\"stop-color\", d => colours[d.target.index]);\r\n\r\n            // converts the people a person spoke to to a nicely formatted string for the info panel\r\n            function spokeToString(spokeToArray) {\r\n                return spokeToArray.map((listener) => {\r\n                    const spokeToSuffix = listener[1] > 1 ? `${listener[1]} times` : \"once\";\r\n                    return `${listener[0]} ${spokeToSuffix}`;\r\n                }).join(\" | \");\r\n            }\r\n\r\n            function fadeIn(opacity) {\r\n                return function(d, i) {\r\n                    // info panel...\r\n                    d3.select(\"#info-avatar\").transition().duration(200).delay(200)\r\n                        .style(\"background-image\", `url(${process.env.PUBLIC_URL}/avatars/${avatars[i.index]})`)\r\n                        .style(\"border\", `5px solid ${colours[i.index]}`)\r\n                        .style(\"width\", \"150px\").style(\"height\", \"150px\");\r\n                    // d3.select(\"#info-text\").transition().duration(200).delay(200).style(\"display\", \"none\");\r\n                    d3.select(\"#info-name\").transition().duration(200).delay(200).style(\"opacity\", 1).text(names[i.index]);\r\n                    d3.select(\"#info-total-lines\").transition().duration(200).delay(200).style(\"opacity\", 1).text(totalLines[i.index] === 1 ? `${totalLines[i.index]} Line` : `${totalLines[i.index]} Lines`);\r\n                    // d3.select(\"#info-spoke-to-heading\").transition().duration(200).delay(200).style(\"display\", \"inline-block\");\r\n                    d3.select(\"#info-spoke-to\").transition().duration(200).delay(200).style(\"opacity\", 1).text(`${spokeToString(spokeTo[i.index])}`);\r\n\r\n                    // chords...\r\n                    const filteredIndices = new Set()\r\n                    \r\n                    svg.selectAll(\"path.chord\")\r\n                        .filter(function(d) {\r\n                            // collect indices of people they spoke to so we can also \r\n                            // hide the arcs as well as the chords\r\n                            filteredIndices.add(i.index);\r\n                            if(d.source.index === i.index || d.target.index === i.index) {\r\n                                filteredIndices.add(d.source.index);\r\n                                filteredIndices.add(d.target.index);\r\n                            }\r\n                            \r\n                            // fade out chords if the person didn't converse with them\r\n                            if(d.source.index !== i.index && d.target.index !== i.index) {\r\n                                return true;\r\n                            }\r\n                            return false;\r\n                        })\r\n                    .transition()\r\n                    .style(\"stroke-opacity\", opacity)\r\n                    .style(\"fill-opacity\", opacity);\r\n                    \r\n                    // get inverse selection of filteredIndices as \r\n                    // we will fade everything else out except these\r\n                    const inverseFilteredIndices = [];\r\n                    for(let i = 0; i < people.length; i++) {\r\n                        if(!filteredIndices.has(i)) {\r\n                            inverseFilteredIndices.push(i);\r\n                        }\r\n                    }\r\n                    \r\n                    // fade the arcs and avatars as well...\r\n                    inverseFilteredIndices.forEach(index => {\r\n                        svg.select(\"#arc-\" + index)\r\n                            .transition()\r\n                            .style(\"stroke-opacity\", opacity)\r\n                            .style(\"fill-opacity\", opacity);\r\n\r\n                        svg.select(\"#avatar-\" + index)\r\n                            .transition()\r\n                            .style(\"opacity\", opacity);\r\n                    });\r\n                }\r\n            }\r\n\r\n            function fadeOut(opacity) {\r\n                return function(d, i) {\r\n                    // info panel...\r\n                    d3.select(\"#info-avatar\").transition().duration(200).delay(200).style(\"background-image\", \"none\").style(\"border\", \"none\").style(\"width\", \"0\").style(\"height\", \"0\");\r\n                    // d3.select(\"#info-text\").transition().duration(200).delay(200).style(\"display\", \"inline-block\");\r\n                    d3.select(\"#info-name\").transition().duration(200).delay(200).style(\"opacity\", 0).text(\"\");\r\n                    d3.select(\"#info-total-lines\").transition().duration(200).delay(200).style(\"opacity\", 1).text(\"\");\r\n                    // d3.select(\"#info-spoke-to-heading\").transition().duration(200).delay(200).style(\"display\", \"none\");\r\n                    d3.select(\"#info-spoke-to\").transition().duration(200).delay(200).style(\"opacity\", 1).text(\"\");\r\n\r\n                    // chords...\r\n                    const filteredIndices = new Set()\r\n                    \r\n                    svg.selectAll(\"path.chord\")\r\n                        .filter(function(d) {\r\n                            // collect indices of people they spoke to so we can also \r\n                            // hide the arcs as well as the chords\r\n                            filteredIndices.add(i.index);\r\n                            if(d.source.index === i.index || d.target.index === i.index) {\r\n                                filteredIndices.add(d.source.index);\r\n                                filteredIndices.add(d.target.index);\r\n                            }\r\n                            \r\n                            // fade out chords if the person didn't converse with them\r\n                            if(d.source.index !== i.index && d.target.index !== i.index) {\r\n                                return true;\r\n                            }\r\n                            return false;\r\n                        })\r\n                        .transition()\r\n                        .style(\"stroke-opacity\", opacity)\r\n                        .style(\"fill-opacity\", opacity);\r\n                    \r\n                    // get inverse selection of filteredIndices as \r\n                    // we will fade everything else out except these\r\n                    const inverseFilteredIndices = [];\r\n                    for(let i = 0; i < people.length; i++) {\r\n                        if(!filteredIndices.has(i)) {\r\n                            inverseFilteredIndices.push(i);\r\n                        }\r\n                    }\r\n                    \r\n                    // fade the arcs and avatars as well...\r\n                    inverseFilteredIndices.forEach(index => {\r\n                        svg.select(\"#arc-\" + index)\r\n                            .transition()\r\n                            .style(\"stroke-opacity\", opacity)\r\n                            .style(\"fill-opacity\", opacity);\r\n\r\n                        svg.select(\"#avatar-\" + index)\r\n                            .transition()\r\n                            .style(\"opacity\", 1);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        // effect cleanup function\r\n        return () => {\r\n            // clean up svg when unmounting\r\n            svg.selectAll(\"*\").remove();\r\n        }\r\n    }, [data]);\r\n\r\n    return (\r\n        <svg id=\"chord-viz\" ref={svgContainer}></svg>\r\n    );\r\n}\r\n\r\nexport default ChordDiagram;\r\n","import * as d3 from \"d3\";\r\n\r\nclass ChordDiagramTutorial {\r\n    constructor() {\r\n        this.tutorialOne = () => {\r\n            d3.select(\"#chord-viz\")\r\n                .selectAll(\"path.chord\")\r\n                .style(\"stroke-opacity\", 0)\r\n                .style(\"fill-opacity\", 0);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .selectAll(\"path.arc\")\r\n                .style(\"stroke-opacity\", 0)\r\n                .style(\"fill-opacity\", 0);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .selectAll(\".avatar\")\r\n                .style(\"stroke-opacity\", 0)\r\n                .style(\"fill-opacity\", 0)\r\n                .style(\"opacity\", 0);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .selectAll(\".axis\")\r\n                .style(\"stroke-opacity\", 0)\r\n                .style(\"fill-opacity\", 0)\r\n                .style(\"opacity\", 0);\r\n        };\r\n\r\n        this.tutorialTwo = () => {\r\n            d3.select(\"#chord-viz\")\r\n                .select(\"path.arc\")\r\n                .transition()\r\n                .duration(1000)\r\n                .style(\"stroke-opacity\", 0.8)\r\n                .style(\"fill-opacity\", 0.8);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .select(\".axis\")\r\n                .transition()\r\n                .duration(1000)\r\n                .style(\"stroke-opacity\", 0.8)\r\n                .style(\"fill-opacity\", 0.8)\r\n                .style(\"opacity\", 0.8);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .select(\".avatar\")\r\n                .transition()\r\n                .duration(1000)\r\n                .style(\"stroke-opacity\", 1)\r\n                .style(\"fill-opacity\", 1)\r\n                .style(\"opacity\", 1);\r\n        };\r\n\r\n        this.tutorialThree = (series) => {\r\n            let selectId = \"1\";\r\n            if(series === \"3\") {\r\n                // Mark is the third speaker in this series\r\n                selectId = \"2\";\r\n            }\r\n            else if(series === \"6\") {\r\n                // Jez is the third speaker in this series\r\n                selectId = \"2\";\r\n            }\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .select(\"path.chord\")\r\n                .transition()\r\n                .duration(1000)\r\n                .style(\"stroke-opacity\", 0.8)\r\n                .style(\"fill-opacity\", 0.8);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .select(`#arc-${selectId}`)\r\n                .transition()\r\n                .duration(1000)\r\n                .style(\"stroke-opacity\", 0.8)\r\n                .style(\"fill-opacity\", 0.8);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .select(`#axis-${selectId}`)\r\n                .transition()\r\n                .duration(1000)\r\n                .style(\"stroke-opacity\", 0.8)\r\n                .style(\"fill-opacity\", 0.8)\r\n                .style(\"opacity\", 0.8);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .select(`#avatar-${selectId}`)\r\n                .transition()\r\n                .duration(1000)\r\n                .style(\"stroke-opacity\", 1)\r\n                .style(\"fill-opacity\", 1)\r\n                .style(\"opacity\", 1);\r\n\r\n            if(series === \"4\") {\r\n                // select Jez as he's the third person in this series\r\n                d3.select(\"#chord-viz\")\r\n                    .select(\"#arc-2\")\r\n                    .transition()\r\n                    .duration(1000)\r\n                    .style(\"stroke-opacity\", 0.8)\r\n                    .style(\"fill-opacity\", 0.8);\r\n\r\n                d3.select(\"#chord-viz\")\r\n                    .select(\"#axis-2\")\r\n                    .transition()\r\n                    .duration(1000)\r\n                    .style(\"stroke-opacity\", 0.8)\r\n                    .style(\"fill-opacity\", 0.8)\r\n                    .style(\"opacity\", 0.8);\r\n\r\n                d3.select(\"#chord-viz\")\r\n                    .select(\"#avatar-2\")\r\n                    .transition()\r\n                    .duration(1000)\r\n                    .style(\"stroke-opacity\", 1)\r\n                    .style(\"fill-opacity\", 1)\r\n                    .style(\"opacity\", 1);\r\n            }\r\n\r\n            if(series === \"8\") {\r\n                // select Mark as he's the third person in this series\r\n                d3.select(\"#chord-viz\")\r\n                    .select(\"#arc-2\")\r\n                    .transition()\r\n                    .duration(1000)\r\n                    .style(\"stroke-opacity\", 0.8)\r\n                    .style(\"fill-opacity\", 0.8);\r\n\r\n                d3.select(\"#chord-viz\")\r\n                    .select(\"#axis-2\")\r\n                    .transition()\r\n                    .duration(1000)\r\n                    .style(\"stroke-opacity\", 0.8)\r\n                    .style(\"fill-opacity\", 0.8)\r\n                    .style(\"opacity\", 0.8);\r\n\r\n                d3.select(\"#chord-viz\")\r\n                    .select(\"#avatar-2\")\r\n                    .transition()\r\n                    .duration(1000)\r\n                    .style(\"stroke-opacity\", 1)\r\n                    .style(\"fill-opacity\", 1)\r\n                    .style(\"opacity\", 1);\r\n            }\r\n        };\r\n\r\n        this.tutorialFour = () => {\r\n            d3.select(\"#chord-viz\")\r\n                .selectAll(\"path.chord\")\r\n                .filter(function(d) {\r\n                    // return internal thought chords only which are where the source and target are the same\r\n                    // also just return mark and jez's mounds as some \"Others\" speak to each other too\r\n                    // (Mark & Jez are always in the first 3 speakers i.e. index 0, 1, or 2)\r\n                    return d.source.index === d.target.index && (d.source.index === 0 || d.source.index === 1 || d.source.index === 2);\r\n                })\r\n                .transition()\r\n                .duration(2000)\r\n                .ease(d3.easeLinear)\r\n                .style(\"stroke-opacity\", 1)\r\n                .style(\"fill-opacity\", 1);\r\n        };\r\n\r\n        this.tutorialFive = () => {\r\n            d3.select(\"#chord-viz\")\r\n                .selectAll(\"path.chord\")\r\n                .transition()\r\n                .style(\"stroke-opacity\", 1)\r\n                .style(\"fill-opacity\", 1);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .selectAll(\"path.arc\")\r\n                .transition()\r\n                .style(\"stroke-opacity\", 1)\r\n                .style(\"fill-opacity\", 1);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .selectAll(\".avatar\")\r\n                .transition()\r\n                .style(\"stroke-opacity\", 1)\r\n                .style(\"fill-opacity\", 1)\r\n                .style(\"opacity\", 1);\r\n\r\n            d3.select(\"#chord-viz\")\r\n                .selectAll(\".axis\")\r\n                .transition()\r\n                .style(\"stroke-opacity\", 1)\r\n                .style(\"fill-opacity\", 1)\r\n                .style(\"opacity\", 1);\r\n\r\n            // now allow pointer events for hovering\r\n            d3.select(\"#fig\").style(\"pointer-events\", \"all\");\r\n        };\r\n    }\r\n}\r\n\r\nexport default ChordDiagramTutorial;","const ReferenceData = function() {\r\n    this.chordAnnotations = [\r\n        \"Mark has more lines than Jez. This is the case throughout each series which was a surprise as I considered it around 50/50 when I watched the show. Mark has around twice the amount of \\\"internal thoughts\\\" than Jez. Again this is the case throughout each series. The TV is classed as a character in series one as Mark & Jez converse with it a lot, even to the point of letting it decide (via Bob Ross) if Mark should proclaim his love for Soph or not. This is a theme which didn't really occur again in later series. Series one has the fewest number of lines out of all the other series.\",\r\n        \"Series 2 has the fewest number of interactions between Mark and Jez out of all the other series. Jez has the fewest number of \\\"internal thoughts\\\" in this series. It also introduces us to April who only appears in a single episode but reappears for the final series. Nancy also appears for the first time. This is the series where we see the most of Jeff as the love triangle between him, Mark and Soph intensifies.\",\r\n        \"This series is the closest Jez comes to having more lines than Mark. Mark has the fewest number of \\\"internal thoughts\\\" in this series. Although mentioned previously, this series is where we see Big Suze for the first time. We also see Big Mad Andy who gladly reappears in later series. Mark and Soph have a lot of lines together as this is the series that culminates in the inadvertent wedding proposal.\",\r\n        \"This is the series that has the most characters and it includes some truly memorable ones: Russell \\\"The Orgazoid\\\", Matt the personal trainer (who for the record doesn't poo in pools), that dickhead Foz and it's the first appearance of Gerrard. Nancy also reappears after missing series three. This, sadly, is the series in which Super Hans appears the least, he only has 17 lines.\",\r\n        \"This series is the first appearance of Dobby as Mark tries to move on from his disastrous wedding. We also meet Paula, Toni's sister, again who last appeared in the very first episode.\",\r\n        \"Interestingly, Mark speaks to himself more than Jez in this series, the only time this happens. This is probably because Jez is too busy being infatuated with Elena. This is the series with the biggest discrepancy between the number of lines spoken by Mark (42%) and Jez (26%). Super Hans actually talks to Mark more than Jez in this series which continues his development in becoming the \\\"third\\\" character as Soph's involvement becomes less and less as the series progress.\",\r\n        \"This is the series where we see the most of Gerrard as he and Mark battle it out to be leader of Dobby club. We also have a lot of medical characters as the series starts with the birth of Mark and Sophie's child. We briefly meet Dobby's boyfriend Simon for the first time who'll reappear in the next series. Memorably we also meet Mark's parents for the first time. This is the last series in which Big Suze appears.\",\r\n        \"In this series we see a lot of interactions between Jez and Dobby as Jez falls in love with her. Jez also has the most number of \\\"internal thoughts\\\" compared to other series as he agonises over the fact that he loves Dobby but doesn't want to hurt Mark. Unbelievably, Johnson only has a single, solitary line. But what a line, we'll investigate this later. Big Mad Andy is back and is in desperate need of therapy but Jez's questionable life-coaching will have to suffice. Joshy, Mark's nephew is also included. Although he only has two lines I just wanted to include him sitting on a display toilet as it's hilarious. This is the only series where Soph doesn't appear. Props also to Dave Franks who after being hustled by Mark and Jez into buying bath taps (that almost certainly are not the same ones that Mark Ronson has) he promises not to snitch to Mark's boss, jumpstarts Jez's car and keeps his promise even after finding a child-size poo in one of his display toilets. Also, we can't leave without mentioning that this is the series where Gerrard passes away, and no, it isn't bullshit.\",\r\n        \"The final series has the most lines but the fewest number of characters out of all the other series. This is the series in which Mark and Jez converse with each other the most. April reappears after last appearing in series two. Dobby has the fewest amount of lines in this series as she moves on from \\\"just sitting on the sofa watching DVDs and eating lamb pasanda like a pair of zombies\\\". Super Hans has the most lines in this series than any other.\"\r\n    ];\r\n\r\n    this.chordTutorial = [\r\n        {\r\n            arc: \"Here we can see Jez's arc which shows Jez had around 27% of all lines spoken in the series.\",\r\n            chords: \"For example here is the chord for conversations between Jez and Mark which shows that just under half of Jez's lines were with Mark. The chords are directional meaning that we can read them in the opposite direction which shows that Mark spent less of his lines speaking to Jez, under a third.\",\r\n            mounds: \"Here we can see Mark had more internal thoughts (around 11% of his lines) than Jez (around 5%).\"\r\n        },\r\n        {\r\n            arc: \"Here we can see Jez's arc which shows Jez had around 27% of all lines spoken in the series.\",\r\n            chords: \"For example here is the chord for conversations between Jez and Mark which shows that around 40% of Jez's lines were with Mark. The chords are directional meaning that we can read them in the opposite direction which shows that Mark spent less of his lines speaking to Jez, around 30%.\",\r\n            mounds: \"Here we can see Mark had more internal thoughts (around 8% of his lines) than Jez (around 3%).\"\r\n        },\r\n        {\r\n            arc: \"Here we can see Jez's arc which shows Jez had around 34% of all lines spoken in the series.\",\r\n            chords: \"For example here is the chord for conversations between Jez and Mark which shows that nearly half of Jez's lines were with Mark. The chords are directional meaning that we can read them in the opposite direction which shows that Mark spent less of his lines speaking to Jez, around 40%.\",\r\n            mounds: \"Here we can see Mark had more internal thoughts (around 8% of his lines) than Jez (around 5%).\"\r\n        },\r\n        {\r\n            arc: \"Here we can see Soph's arc which shows Sophie had around 5% of all lines spoken in the series.\",\r\n            chords: \"For example here is the chord for conversations between Jez and Mark which shows that around 40% of Mark's lines were with Jez. The chords are directional meaning that we can read them in the opposite direction which shows that Jez spent over half of his lines speaking to Mark.\",\r\n            mounds: \"Here we can see Mark had more internal thoughts (around 8% of his lines) than Jez (around 4%).\"\r\n        },\r\n        {\r\n            arc: \"Here we can see Mark's arc which shows Mark had around 40% of all lines spoken in the series.\",\r\n            chords: \"For example here is the chord for conversations between Jez and Mark which shows that around 30% of Mark's lines were with Jez. The chords are directional meaning that we can read them in the opposite direction which shows that Jez spent more of his lines speaking to Mark, around 40%.\",\r\n            mounds: \"Here we can see Mark had more internal thoughts (around 10% of his lines) than Jez (around 4%).\"\r\n        },\r\n        {\r\n            arc: \"Here we can see Mark's arc which shows Mark had around 42% of all lines spoken in the series.\",\r\n            chords: \"For example here is the chord for conversations between Jez and Mark which shows that around 30% of Mark's lines were with Jez. The chords are directional meaning that we can read them in the opposite direction which shows that Jez spent more of his lines speaking to Mark, around 40%.\",\r\n            mounds: \"Here we can see Mark had more internal thoughts (around 12% of his lines) than Jez (around 4%).\"\r\n        },\r\n        {\r\n            arc: \"Here we can see Mark's arc which shows Mark had around 40% of all lines spoken in the series.\",\r\n            chords: \"For example here is the chord for conversations between Jez and Mark which shows that 40% of Mark's lines were with Jez. The chords are directional meaning that we can read them in the opposite direction which shows that Jez spent half of his lines speaking to Mark.\",\r\n            mounds: \"Here we can see Mark had more internal thoughts (around 9% of his lines) than Jez (around 5%).\"\r\n        },\r\n        {\r\n            arc: \"Here we can see Super Hans' arc which shows Super Hans had around 5% of all lines spoken in the series.\",\r\n            chords: \"For example here is the chord for conversations between Jez and Mark which shows that nearly half of Jez's lines were with Mark. The chords are directional meaning that we can read them in the opposite direction which shows that Mark spent only a third of his lines speaking to Jez.\",\r\n            mounds: \"Here we can see Mark had more internal thoughts (around 10% of his lines) than Jez (around 5%).\"\r\n        },\r\n        {\r\n            arc: \"Here we can see Jez's arc which shows Jez had around 30% of all lines spoken in the series.\",\r\n            chords: \"For example here is the chord for conversations between Jez and Mark which shows that over half of Jez's lines were with Mark. The chords are directional meaning that we can read them in the opposite direction which shows that Mark spent less of his lines speaking to Jez, around 40%.\",\r\n            mounds: \"Here we can see Mark had more internal thoughts (around 11% of his lines) than Jez (around 4%).\"\r\n        },\r\n    ];\r\n\r\n    this.seriesColours = [\r\n        \"#0C662D\",\r\n        \"#005E8D\",\r\n        \"#A9251E\",\r\n        \"#882373\",\r\n        \"#F07122\",\r\n        \"#29AB87\",\r\n        \"#5147BB\",\r\n        \"#AC0C59\",\r\n        \"#150B41\"\r\n    ];\r\n\r\n    this.seriesSummaries = [\r\n        \"Mark and Jez start out with similar aims of sleeping with their next-door neighbour Toni. Jez does this, while she is separating from her husband, Tony. Mark is obsessed with his colleague Sophie, who is more interested in their manly colleague Jeff. Mark has a one-night stand with a teenage goth girl. Mark and Jez endure awkward situations: Mark admires his boss, Alan Johnson, and struggles to work out whether or not he is sexually attracted to him. Jez remembers engaging in fellatio with Super Hans during a drug binge. Sophie beats Mark to a promotion, so Mark and Jez desperately team up to prank call Sophie, which leads to her shooting them with a pellet gun. They also launch a pepper spray attack on Super Hans, who has begun a fling with Toni. Mark sees a therapist, and nearly succeeds in having sex with Sophie, but this chance is ruined by Jez's apparent drug overdose. Shortly afterwards, Jez claims to Toni that he has a terminal illness in order to persuade her to have sex with him.\",\r\n        \"Tony moves back in with Toni. Super Hans develops a crack cocaine addiction. Jez meets, falls in love with and starts an open relationship with Nancy, an attractive and happy-go-lucky American. They briefly enjoy a wild sex life, but Nancy then decides to become celibate. Jez briefly appears to be having some success with his music career with Super Hans. Mark's life is falling apart, as Sophie plans to move in with Jeff. Mark forges a brief friendship with a colleague, Daryl, which he ends after he discovers that Daryl is a neo-Nazi. Mark falls for a shy, attractive student in a shoe shop and makes an ill-judged visit to his old university, Dartmouth, where she studies. Mark finds out from Jez that Jeff has been cheating on Sophie, and Mark informs Sophie of that, after which Sophie ends the relationship. Nancy asks Jez to marry her, for visa reasons, and Jez accepts gleefully; Mark gets Super Hans to lie to Jez and say that she had sex with him, but after they see his reaction they cannot go through with it. Jez and Nancy do get married despite Mark's efforts, but after they decide to start having sex again Jez admits to Nancy, who is now his wife, that he hooked up with Toni. Nancy leaves him.\",\r\n        \"The series begins with Jez in a relationship with Michelle, of whom he is not fond but with whom he stays as they plan a threesome with another woman. Big Suze re-enters Jez's life, and has a new boyfriend, Stu. Mark and Sophie have finally become a couple, but Mark is mugged and is separated from Sophie once again when their employer relocates her to Bristol. Merry, Jez and Mark's friend from university, visits and Mark arranges for her to be sectioned. Jez and Super Hans attempt to run a pub. Jez holds a magic mushroom party in the flat. Jez has a fling with Mark's sister, while Mark falls in love with Suze. Jez serves on a jury and has a date with the female defendant. In the last episode, Mark plans to propose to Sophie but changes his mind upon realising that they have nothing in common. Nonetheless he agrees to marry her to avoid \\\"embarrassment\\\" after she accidentally finds his engagement ring and accepts a proposal which he had not actually made. Jez's efforts to get back together with Suze are hindered somewhat by Hans's attempts to go cold turkey.\",\r\n        \"During this series, recently engaged Mark and Sophie visit Sophie's parents, and Jez has sex with Sophie's mother. Big Suze breaks up with Jez once again after Johnson offers to pay him in order to have sex with her and he agrees. Despite being disgusted by the offer, she subsequently starts a relationship with Johnson claiming that he is an \\\"alpha male\\\". Mark's attempt, at Johnson's request, to head a group of staff to formulate a merger between two departments is a failure, which leads to Mark being humiliated at JLB's conference. In an attempt to get away from Sophie, Mark joins a gym and discovers that Nancy is working there, after which Jez makes a failed attempt to reconcile. Sophie leaves on a business trip to Frankfurt, leaving Mark to consider a fling with a woman whom he recently met at his school reunion. Jez finds some well-paid work as a handyman for \\\"The Orgazoid\\\", one of his musical heroes, but discovers that his new employer expects him to give him \\\"a hand\\\". Mark and Jeremy spend a weekend on a narrowboat in Shropshire for Mark's stag do, at which Mark and Jez meet two sisters in a pub. After meeting the businessman father of the girls, Mark attempts to secure a job with him in Bangalore as a means of escaping his impending wedding. The plan backfires when Jez accidentally kills the pet dog of one of the girls and the family find out when a series of attempts to cover it up lead to him eating it. As the wedding approaches, Jez is having difficulty juggling a hungover Super Hans, the wedding, Nancy, and his desperate need to urinate. After several attempts to avoid marrying, including proposing marriage to a member of staff in a local cafe, stepping out in front of a car, and hiding in the church, Mark, with visible reluctance, marries Sophie. However, realising he was trying to get out of marrying her by hiding, she runs out on him after the ceremony, planning to seek an annulment because Mark is \\\"horrible\\\".\",\r\n        \"Much of the series revolves around Mark's search for \\\"the one\\\". His first date since his wedding is a double date which goes wrong due to going to a boring play, his date being uninterested in him and then returning to the house to find a burglar. He asks out the IT girl, Dobby, although the date ends badly when they find a vomiting Sophie in the toilets, who reveals to Dobby that she is married to him. Dobby remains interested, even when Mark rejects her offer to be his date at his upcoming birthday party to take a young Australian woman whom he had recently met whilst speed dating. Jez runs out of money and steals from Johnson's credit card and is temporarily evicted by Mark. Jez asks Big Suze if he can stay with her and Johnson, but is rejected. He tries to obtain money from his mother after his great aunt dies, which reveals their strained relationship. Mark, however, thrives in her company and is given the job of writing her boyfriend's military biography. Angry, Jeremy ruins Mark's ambitions by revealing how Mark was raped by the veteran's daughter, which she had initiated while he was asleep. Jeremy and Hans get a manager, Cally, for their band and go to a music festival. Jez and Mark both have sex with Cally, but she quickly rejects both of them. Mark fails to ask Dobby out and she finally moves on. Jez and Hans join a cult. Mark is promoted to Senior Credit Manager by Johnson but does not fire Sophie as ordered, after she reveals that she is pregnant with what may be his child. In the closing moments of the series, Jez tells Mark that he recently had sex with Sophie and that her baby might be his.\",\r\n        \"The series begins with JLB Credit closing down. Sophie tells Mark and Jez that Jeff is also a possible father of her baby. The mystery is solved when Sophie reveals that Mark is the baby's father. Jez meets Elena, a beautiful young European woman and occasional marijuana dealer who lives in their building. Jeremy quickly falls in love with her, but things deteriorate when it is revealed that Elena has a long-term partner, Gail, who is returning to London. Mark looks for work, starting a company with an ill-equipped Johnson, almost landing his dream job as a guide for historic walks, then becoming a waiter in Gail's Mexican restaurantall the while trying to get anywhere with Dobby. To resolve their woman troubles, Jeremy and Mark host a party, which ends in Jeremy trying to rekindle his love for Elena, Mark failing to win over Dobbie, and Gail and Elena deciding to enter into a civil partnership. Mark pledges to take driving lessons in order to drive Sophie to the hospital when the baby arrives, but lies to her when he fails his test. Jeremy is upset over losing Elena, especially after she reveals that she is moving to Quebec with Gail. Sophie goes into labour early, and with Mark forced to reveal he cannot drive, a drunk Jeremy attempts to drive Sophie to the hospital and nearly runs Gail over. Jeremy admits that he and Elena were having an affair, then Sophie drives herself to the hospital with the two boys in the back seat.\",\r\n        \"Zahra and her boyfriend Ben are introduced, whom Jez meets while Sophie is giving birth. Jez is instantly attracted to Zahra and is selfishly pleased when he discovers that Ben is in a coma, potentially making Zahra single. However, Ben recovers fully, and, as thanks for being so friendly to Zahra, offers Jez a job with his record company, which Jez accepts as he hopes it will allow him to get closer to Zahra. The job does not go well, and his attempts to sign up his and Super Hans's band fails badly and ends up with him being fired from the band. Mark finally beats off competition from Gerard to become Dobby's boyfriend, although he continues to behave awkwardly in her company. Gail sacks Mark from his job at the restaurant. Jez pretends to be an intellectual in order to impress Zahra, which enables him to have sex with her. When Mark comes to meet him the next morning the two find themselves locked in Zahra's flat, causing Ben to discover them and Mark to miss his son's christening. Jez, Hans, Dobby, Mark, Mark's sister and parents all have Christmas dinner at Jez and Mark's. After Zahra tells Jez that she has split from Ben, Jez accepts her offer to move in with her. Mark needs to salvage his relationship with Dobby, and asks her to move in with him, to which she agrees. Zahra rejects Jez after she learns he has been flirting with Super Hans's girlfriend, dumping him.\",\r\n        \"The series begins with Mark waiting for Dobby to move in, while Dobby waits for Jez to move out. Mark suspects that Dobby will never move in, and that Gerard is trying to steal her from him; however, Gerard dies of flu. Jez and Super Hans amicably end their band, and this causes Jez to contemplate his life so far: he eventually agrees to undertake therapy sessions, which are paid for by Mark. Impressed by the therapy, Jez decides to become a life coach, but he fails a course of questionable value. Mark then gives Jez a fake life coach certificate and he begins \\\"coaching\\\" anyone who will let him, causing emotional and personal harm. Mark writes a book, which is published by an incompetent vanity publisher. Mark, Dobby, Jez and Hans go paintballing. Mark gets a job at the bathroom supplies company where Hans works, but is soon sacked. He also starts an evening course to gain an MBA. Jez falls in love with Dobby and declares his feelings, as does Mark. While Mark and Jez fight, Dobby leaves the scene and heads to New York, where she has a new job.\",\r\n        \"The final series opens with Mark and Jez meeting for the first time since their fight over Dobby, with Mark still bearing a grudge over the role Jez played in his break-up with her. Jez is living in Super Hans's bathroom, while Mark has a new flatmate. After reconciling, Jez moves back in with Mark and they go back to their old ways. Jez begins a relationship with a younger man, Joe, and also has sex with Joe's girlfriend Megan. Mark seeks out April (previously seen only in a single episode in series 2), whom he always thought to be his perfect woman, despite her now being married. Dobby has moved to New York and has a new boyfriend. He beats up Mark when he discovers Mark had been tracking Dobby's movements. Hans marries Molly in Norfolk. Sophie turns up at the flat depressed and appears to have a drink problem. She is in a relationship with a man whom she thinks is having an affair. She offers Mark a chance to give their relationship another go, which he initially accepts, but Mark decides to try and break up April's marriage and start a new life with her. In the final episode, all the duo's past lies and selfish decisions catch up with them. Mark loses his job at a bank because of a loan he gave Jez previously (ironically, to exploit him) without asking for correct identification paperwork, and he is replaced by his rival Jeff. Joe leaves Jez after his lies about him being popular and young are caught out, and Jez claims he is tired of partying all the time. Super Hans's wife is upset because he is unwilling to stop his old disreputable lifestyle, and after he kidnaps and threatens April's husband, she finally leaves him. Super Hans ends up leaving for Macedonia to open a moped hire business and leaves Mark and Jez right back where they always end up due to their bad choices, with Mark losing his newest relationship and job, while Jez remains stuck in a rut with no prospects. It ends with the two watching TV together, asking and answering inane questions, with Jez thinking to himself how they both \\\"love each other really\\\" and Mark reminding himself that he \\\"simply must get rid of him\\\".\",\r\n    ];\r\n\r\n    this.episodeTitles = {\r\n        \"1\": [\r\n            \"Warring Factions\",\r\n            \"The Interview\",\r\n            \"On the Pull\",\r\n            \"Mark Makes a Friend\",\r\n            \"Dream Job\",\r\n            \"Funeral\",\r\n        ],\r\n        \"2\": [\r\n            \"Dance Class\",\r\n            \"Jeremy Makes It\",\r\n            \"Local Zero\",\r\n            \"University Challenge\",\r\n            \"The Man Show\",\r\n            \"Wedding\",\r\n        ],\r\n        \"3\": [\r\n            \"Mugging\",\r\n            \"Sectioning\",\r\n            \"Shrooming\",\r\n            \"Sistering\",\r\n            \"Jurying\",\r\n            \"Quantocking\",\r\n        ],\r\n        \"4\": [\r\n            \"Sophie's Parents\",\r\n            \"Conference\",\r\n            \"Gym\",\r\n            \"Handyman\",\r\n            \"Holiday\",\r\n            \"The Wedding\",\r\n        ],\r\n        \"5\": [\r\n            \"Burgling\",\r\n            \"Spin War\",\r\n            \"Jeremy Broke\",\r\n            \"Jeremy's Mummy\",\r\n            \"Jeremy's Manager\",\r\n            \"Mark's Women\",\r\n        ],\r\n        \"6\": [\r\n            \"Jeremy at JLB\",\r\n            \"The Test\",\r\n            \"Jeremy in Love\",\r\n            \"The Affair\",\r\n            \"The Party\",\r\n            \"Das Boot\",\r\n        ],\r\n        \"7\": [\r\n            \"St Hospitals\",\r\n            \"Man Jam\",\r\n            \"A Beautiful Mind\",\r\n            \"Nether Zone\",\r\n            \"Seasonal Beatings\",\r\n            \"New Year's Eve\",\r\n        ],\r\n        \"8\": [\r\n            \"Jeremy Therapised\",\r\n            \"Business Secrets of the Pharaohs\",\r\n            \"The Love Bunker\",\r\n            \"Big Mad Andy\",\r\n            \"Chairman Mark\",\r\n            \"Quantocking II\",\r\n        ],\r\n        \"9\": [\r\n            \"The William Morris Years\",\r\n            \"Gregory's Beard\",\r\n            \"Threeism\",\r\n            \"Mole-Mapping\",\r\n            \"Kid Farm\",\r\n            \"Are We Going To Be Alright?\"\r\n        ]\r\n    };\r\n\r\n    this.characterColours = {\r\n        \"Mark\": \"#005E8D\",\r\n        \"Jeremy\": \"#0C662D\",\r\n        \"Sophie\": \"#A9251E\",\r\n        \"Boys\": \"#111111\",\r\n        \"TV\": \"#555555\",\r\n        \"Toni\": \"#29AB87\",\r\n        \"Super Hans\": \"#882373\",\r\n        \"Paula\": \"#AC0C59\",\r\n        \"Barry\": \"#777777\",\r\n        \"Others\": \"#333333\",\r\n        \"Jeff\": \"#5147BB\",\r\n        \"Barbara\": \"#b2df8a\",\r\n        \"Valerie\": \"#ffff99\",\r\n        \"Tony\": \"#fb9a99\",\r\n        \"Johnson\": \"#F07122\",\r\n        \"Therapist\": \"#150B41\",\r\n        \"Band member\": \"#333333\",\r\n        \"Ray\": \"#666666\",\r\n        \"Nurse\": \"#cab2d6\",\r\n        \"Paramedic\": \"#222222\",\r\n        \"Dance Teacher\": \"#b5946e\",\r\n        \"Nancy\": \"#AC0C59\",\r\n        \"Gwyn\": \"#b2df8a\",\r\n        \"Gog\": \"#ffff99\",\r\n        \"Daryl\": \"#150B41\",\r\n        \"Security Guys\": \"#777777\",\r\n        \"Nim\": \"#cab2d6\",\r\n        \"April\": \"#8dd3c7\",\r\n        \"MacLeish\": \"#fb8072\",\r\n        \"Student\": \"#d9d9d9\",\r\n        \"Pete\": \"#b3de69\",\r\n        \"Karen\": \"#80b1d3\",\r\n        \"Sam\": \"#bc80bd\",\r\n        \"Registrar\": \"#222222\",\r\n        \"Michelle\": \"#fb9a99\",\r\n        \"Mugger\": \"#fdb462\",\r\n        \"Big Suze\": \"#29AB87\",\r\n        \"Stu\": \"#b2df8a\",\r\n        \"Vicky\": \"#777777\",\r\n        \"Mugger's Mate\": \"#cab2d6\",\r\n        \"Merry\": \"#8dd3c7\",\r\n        \"Doctor\": \"#ffff99\",\r\n        \"Andy\": \"#150B41\",\r\n        \"Sarah\": \"#fb8072\",\r\n        \"Carla\": \"#AC0C59\",\r\n        \"Foreman\": \"#d9d9d9\",\r\n        \"Dom\": \"#b3de69\",\r\n        \"Olly\": \"#80b1d3\",\r\n        \"Jurors\": \"#bc80bd\",\r\n        \"Gerard\": \"#222222\",\r\n        \"Isabelle\": \"#123456\",\r\n        \"Penny\": \"#fb9a99\",\r\n        \"Ian\": \"#fdb462\",\r\n        \"Jamie\": \"#cab2d6\",\r\n        \"Gerrard\": \"#b2df8a\",\r\n        \"Lisa\": \"#777777\",\r\n        \"Lap Dancer\": \"#8dd3c7\",\r\n        \"Board Member\": \"#ffff99\",\r\n        \"Matt\": \"#150B41\",\r\n        \"Eva\": \"#b3de69\",\r\n        \"Gym Manager\": \"#222222\",\r\n        \"Russell\": \"#fb8072\",\r\n        \"Sally\": \"#123456\",\r\n        \"Foz\": \"#d9d9d9\",\r\n        \"Counsellor\": \"#80b1d3\",\r\n        \"Aurora\": \"#bc80bd\",\r\n        \"Lucy\": \"#b15928\",\r\n        \"Malcolm\": \"#ccebc5\",\r\n        \"Cafe Girl\": \"#fccde5\",\r\n        \"Driver\": \"#fb8072\",\r\n        \"Vicar\": \"#b3de69\",\r\n        \"Heather\": \"#fb9a99\",\r\n        \"Burglar\": \"#cab2d6\",\r\n        \"Burglar's Mates\": \"#ffff99\",\r\n        \"Barney\": \"#b3de69\",\r\n        \"Dobby\": \"#150B41\",\r\n        \"Saz\": \"#123456\",\r\n        \"Jackie\": \"#fb8072\",\r\n        \"Martin\": \"#d9d9d9\",\r\n        \"Natalie\": \"#bc80bd\",\r\n        \"Cally\": \"#80b1d3\",\r\n        \"Recruiter\": \"#b15928\",\r\n        \"Steffan\": \"#cab2d6\",\r\n        \"Elena\": \"#fb9a99\",\r\n        \"Peter\": \"#ffff99\",\r\n        \"Michael\": \"#b3de69\",\r\n        \"Tourist\": \"#123456\",\r\n        \"Jan\": \"#d9d9d9\",\r\n        \"Gail\": \"#AC0C59\",\r\n        \"Party Crasher\": \"#bc80bd\",\r\n        \"Driving Instructor\": \"#80b1d3\",\r\n        \"Yana\": \"#123456\",\r\n        \"Zahra\": \"#fb9a99\",\r\n        \"Midwife\": \"#d9d9d9\",\r\n        \"Theatre Nurse\": \"#bc80bd\",\r\n        \"Games Shop Assistant\": \"#ffff99\",\r\n        \"Ben\": \"#01665e\",\r\n        \"Simon\": \"#80b1d3\",\r\n        \"Door-to-door Seller\": \"#b15928\",\r\n        \"Delivery Driver\": \"#fdbf6f\",\r\n        \"Pam\": \"#a6cee3\",\r\n        \"Dan\": \"#6a3d9a\",\r\n        \"Party Guest\": \"#543005\",\r\n        \"Grayson\": \"#b3de69\",\r\n        \"Katie\": \"#bc80bd\",\r\n        \"Neil\": \"#fb9a99\",\r\n        \"Trish\": \"#fdb462\",\r\n        \"Celia\": \"#b15928\",\r\n        \"Greg\": \"#ffff99\",\r\n        \"Charlie\": \"#a6cee3\",\r\n        \"Deena\": \"#6a3d9a\",\r\n        \"Sara\": \"#777777\",\r\n        \"Stephanie\": \"#A9251E\",\r\n        \"Alan McGurnegy\": \"#777777\",\r\n        \"Mo\": \"#777777\",\r\n        \"Ben Prenderghast\": \"#777777\",\r\n        \"Dave Franks\": \"#777777\",\r\n        \"Joshie\": \"#777777\",\r\n        \"Ticket Inspector\": \"#777777\",\r\n        \"Megan\": \"#b15928\",\r\n        \"Jerry\": \"#b2df8a\",\r\n        \"Molly\": \"#80b1d3\",\r\n        \"Joe\": \"#fb9a99\",\r\n        \"Gregory\": \"#fdb462\",\r\n        \"Frank\": \"#ffff99\",\r\n        \"Will\": \"#a6cee3\",\r\n        \"Angus\": \"#b3de69\",\r\n        \"Wadey\": \"#29AB87\",\r\n        \"Printer\": \"#777777\",\r\n    };\r\n\r\n    this.seriesCharacters = [\r\n        [\"Mark\", \"Jeremy\", \"Sophie\", \"Boys\", \"TV\", \"Toni\", \"Super Hans\", \"Paula\", \"Barry\", \"Others\", \"Jeff\", \"Barbara\", \"Valerie\", \"Tony\", \"Johnson\", \r\n            \"Therapist\", \"Band member\", \"Ray\", \"Nurse\", \"Paramedic\"],\r\n        [\"Jeremy\", \"Mark\", \"Johnson\", \"Sophie\", \"Jeff\", \"Toni\", \"Tony\", \"Dance Teacher\", \"Others\", \"Nancy\", \"Gwyn\", \"Super Hans\", \"Gog\", \"Daryl\", \"Security Guys\", \r\n            \"Nim\", \"April\", \"MacLeish\", \"Student\", \"Pete\", \"Karen\", \"Sam\", \"Registrar\"], \r\n        [\"Jeremy\", \"Michelle\", \"Mark\", \"Mugger\", \"Sophie\", \"Big Suze\", \"Stu\", \"Vicky\", \"Mugger's Mate\", \"Super Hans\", \"Merry\", \"Doctor\", \"Others\", \"Andy\", \r\n            \"Jeff\", \"Johnson\",  \"Sarah\", \"Carla\", \"Foreman\", \"Dom\", \"Olly\", \"Jurors\", \"Gerard\", \"Isabelle\"],\r\n        [\"Sophie\", \"Mark\", \"Jeremy\", \"Super Hans\", \"Penny\", \"Ian\", \"Jamie\", \"Johnson\", \"Gerrard\", \"Big Suze\", \"Lisa\", \"Jeff\", \"Lap Dancer\", \"Board Member\", \r\n            \"Matt\", \"Nancy\", \"Eva\", \"Gym Manager\", \"Russell\", \"Sally\", \"Foz\", \"Counsellor\", \"Aurora\", \"Lucy\", \"Malcolm\", \"Cafe Girl\", \"Driver\", \"Vicar\"],\r\n        [\"Mark\", \"Jeremy\", \"Heather\", \"Paula\", \"Others\", \"Big Suze\", \"Burglar\", \"Burglar's Mates\", \"Barney\", \"Ian\", \"Lisa\", \"Super Hans\", \"Dobby\", \"Jeff\", \"Sophie\", \r\n            \"Johnson\", \"Saz\", \"Gerrard\", \"Jackie\", \"Martin\", \"Natalie\", \"Cally\", \"Recruiter\"],\r\n        [\"Mark\", \"Super Hans\", \"Jeremy\", \"Jeff\",  \"Others\", \"Dobby\", \"Gerrard\", \"Lisa\", \"Johnson\", \"Sophie\", \"Steffan\", \"Elena\", \"Peter\", \"Michael\", \"Tourist\", \r\n            \"Jan\", \"Big Suze\", \"Gail\", \"Sarah\", \"Party Crasher\", \"Ian\", \"Driving Instructor\"],\r\n        [\"Mark\", \"Jeremy\", \"Yana\", \"Sophie\", \"Zahra\", \"Nurse\", \"Midwife\", \"Super Hans\", \"Others\", \"Doctor\", \"Theatre Nurse\", \"Gerrard\", \"Games Shop Assistant\", \r\n            \"Ben\", \"Dobby\", \"Simon\", \"Door-to-door Seller\", \"Gail\", \"Delivery Driver\", \"Ian\", \"Jeff\", \"Pam\", \"Sarah\", \"Dan\", \"Johnson\", \"Big Suze\", \"Party Guest\"],\r\n        [\"Super Hans\", \"Jeremy\", \"Mark\", \"Dobby\", \"Gerrard\", \"Jeff\", \"Others\", \"Grayson\", \"Katie\", \"Johnson\", \"Simon\", \"Neil\", \"Trish\", \"Celia\", \"Greg\", \"Charlie\", \r\n            \"Andy\", \"Sara\", \"Stephanie\", \"Sarah\", \"Alan McGurnegy\", \"Gail\", \"Mo\", \"Ben Prenderghast\", \"Dave Franks\", \"Joshie\", \"Ticket Inspector\"],\r\n        [\"Jeremy\", \"Mark\", \"Super Hans\", \"Megan\", \"Others\", \"Jerry\", \"Molly\", \"Johnson\", \"Joe\", \"Dobby\", \"Gregory\", \"Frank\", \"Will\", \"April\", \"Angus\", \"Wadey\", \r\n            \"Sophie\", \"Printer\", \"Jeff\"]\r\n    ];\r\n}\r\n            \r\nexport default ReferenceData;","import React from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport \"./SearchResult.css\";\r\nimport ReferenceData from \"../../reference/ReferenceData\";\r\n\r\nfunction SearchResult(props) {\r\n    const { series } = useParams();\r\n    const speakerImg = `${props.res.Speaker.trim().replace(\" \", \"-\").replace(\"'\", \"\").replace(\"\", \"e\").toLowerCase()}.jpg`;\r\n    const listenerImg = `${props.res.To.trim().replace(\" \", \"-\").replace(\"'\", \"\").replace(\"\", \"e\").toLowerCase()}.jpg`;\r\n    const refData = new ReferenceData();\r\n\r\n    return (\r\n        <>\r\n            <div className=\"search-result\">\r\n                <div className=\"avatar\" \r\n                     style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/avatars/${speakerImg})`, border: `3px solid ${refData.characterColours[props.res.Speaker]}` }}>\r\n                </div>\r\n                \r\n                <p className=\"search-result-text\">\r\n                    {props.res.Line.trim()}\r\n                </p>\r\n                \r\n                <div className=\"avatar\" \r\n                     style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/avatars/${listenerImg})`, border: `3px solid ${refData.characterColours[props.res.To]}` }}>\r\n                </div>\r\n            </div>\r\n            <small>Episode {props.res.Episode} - {refData.episodeTitles[series][props.res.Episode - 1]} @ {props.res.Location}</small>\r\n        </>\r\n        \r\n    );\r\n}\r\n\r\nexport default SearchResult;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\nimport \"./WordSearch.css\";\r\nimport SearchResult from \"./SearchResult\";\r\nimport ReferenceData from \"../../reference/ReferenceData\";\r\n\r\nfunction WordSearch() {\r\n    const referenceData = new ReferenceData();\r\n    const { series } = useParams();\r\n    const [data, setData] = useState(null);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [topWords, setTopWords] = useState([]);\r\n    const [topWordUsage, setTopWordUsage] = useState(null);\r\n    const [topWordSaidBy, setTopWordSaidBy] = useState(null);\r\n    const [seriesColour, setSeriesColour] = useState(\"#0C662D\");\r\n\r\n    // reference data hook\r\n    useEffect(() => {\r\n        setSeriesColour(referenceData.seriesColours[series - 1]);\r\n    }, [series]);\r\n\r\n    // fetch data hook\r\n    useEffect(() => {\r\n        async function fetchWordData(url) {\r\n            d3.csv(url).then(data => setData(data));\r\n        }\r\n        fetchWordData(`${process.env.PUBLIC_URL}/data/lines/S${series}_Lines.csv`);\r\n    }, [series]);\r\n\r\n    // search hook\r\n    useEffect(() => {\r\n        if(data) {\r\n            if(searchTerm.length >= 3) {\r\n                const results = data.filter(({ Line }) => Line.trim().toLowerCase().includes(searchTerm));\r\n                setSearchResults(results);\r\n            }\r\n        }\r\n    }, [searchTerm, data]);\r\n\r\n    // top words hook\r\n    useEffect(() => {\r\n        async function fetchTopWordsData(url) {\r\n            await fetch(url).then(res => res.json()).then(json => setTopWords(json));\r\n        }\r\n        fetchTopWordsData(`${process.env.PUBLIC_URL}/data/words/top-words-analysis-s${series}.json`);\r\n    }, [series]);\r\n\r\n    const searchOnChange = (event) => {\r\n        setSearchTerm(event.target.value.toLowerCase());\r\n    };\r\n\r\n    const showTopWordUsage = (event) => {\r\n        // apply series colour underline to word on hover\r\n        event.target.style.borderBottom = `5px solid ${seriesColour}`;\r\n\r\n        const word = event.target.outerText.replace(',', '').trim();\r\n        const usage = topWords[word];\r\n        setTopWordUsage(usage);\r\n\r\n        const saidBy = [];\r\n        if(usage) {\r\n            for(const person in usage.who) {\r\n                saidBy.push({\r\n                    saidBy: person,\r\n                    total: usage.who[person]\r\n                });\r\n            }\r\n        }\r\n        setTopWordSaidBy(saidBy);\r\n    };\r\n\r\n    const clearTopWordUsage = (event) => {\r\n        // clear underlined hover effect\r\n        event.target.style.borderBottom = \"none\";\r\n        setTopWordUsage(null);\r\n        setTopWordSaidBy(null);\r\n    };\r\n\r\n    return (\r\n        <div className=\"word-search-container\">\r\n            <h1 className=\"word-search-top-words\">\r\n                {topWords ? Object.keys(topWords).map((word, idx) => {\r\n                    return (\r\n                        <>\r\n                            <span key={idx} className=\"top-word\" onMouseOver={showTopWordUsage} onMouseLeave={clearTopWordUsage}>\r\n                                {idx === 9 ? word : word + ','}</span>\r\n                            <span> </span>\r\n                        </>\r\n                    );\r\n                }) : null}\r\n            </h1>\r\n            {\r\n                topWordUsage && topWordSaidBy ? \r\n                    <p>Said {topWordUsage.total} times by {topWordSaidBy.map((w, idx) => `${w.saidBy} (${w.total})${idx === topWordSaidBy.length - 1 ? '' : ', '}`)}</p> : \r\n                    <p></p>\r\n            }\r\n\r\n            <div id=\"search-input\">\r\n                <input style={{ borderBottom: `3px solid ${seriesColour}` }}\r\n                    type=\"text\" \r\n                    name=\"search\" \r\n                    placeholder=\"Search for a word or phrase\"\r\n                    value={searchTerm}\r\n                    onChange={searchOnChange}\r\n                />\r\n            </div>\r\n\r\n            <div id=\"search-results\">\r\n                {searchResults.map((res, idx) => <SearchResult key={idx} res={res} />)}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default WordSearch;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nfunction LocationRadialBubbleChart(props) {\r\n    const chart = useRef(null);\r\n    const { data, longest } = props;\r\n\r\n    // initialise chart hook\r\n    useEffect(() => {\r\n        const margin = {\r\n            top: 10,\r\n            right: 10,\r\n            bottom: 10, \r\n            left: 10\r\n        };\r\n        const height = 250 - margin.top - margin.bottom;\r\n        const width = 250 - margin.left - margin.right;\r\n        const svg = d3.select(chart.current)\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", height + margin.top + margin.bottom)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + (margin.left + width / 2) + \",\" + (margin.top + height / 2) + \")\");\r\n\r\n        if(data) {\r\n            const maxRadius = 100;\r\n            const padding = 10;\r\n            const bubbleSizeFudge = 5;\r\n            const locations = data.flatMap(d => Object.keys(d));\r\n            const locationLengths = data.flatMap(d => Object.values(d));\r\n            const uniqueLocations = locations.reduce((a, b) => {\r\n                if(a.indexOf(b) < 0) {\r\n                    a.push(b);\r\n                }\r\n                return a;\r\n            }, []);\r\n\r\n            const locationRadii = {};\r\n            uniqueLocations.forEach((loc, idx) => locationRadii[loc] = maxRadius - idx * padding);\r\n\r\n            // event handlers\r\n            const mouseover = (event, data) => {\r\n                d3.select(event.currentTarget).style(\"fill-opacity\", 1);\r\n            };\r\n\r\n            const mouseout = (event, data) => {\r\n                d3.select(event.currentTarget).style(\"fill-opacity\", 0.7);\r\n            };\r\n            \r\n            // make each chart use 360deg or normalise to longest episode?\r\n            // const theta = 2 * Math.PI / locations.length;\r\n            const theta = 2 * Math.PI / longest;\r\n            const arcGenerator = d3.arc()\r\n                .innerRadius(0)\r\n                .outerRadius(d => d)\r\n                .startAngle(0)\r\n                .endAngle(theta * locations.length - theta);\r\n\r\n            // grid arcs\r\n            svg.selectAll(\".grid-loc-arc\")\r\n                .data(Object.values(locationRadii))\r\n                .enter()\r\n                .append(\"path\")\r\n                .attr(\"d\", (d) => {\r\n                    const arc = arcGenerator(d);\r\n                    // just the arcs, not the line \"caps\"\r\n                    return arc.split(\"L\")[0];\r\n                })\r\n                .attr(\"class\", \"grid-loc-arc\")\r\n                .attr(\"fill\", \"none\")\r\n                .attr(\"stroke\", \"#999\")\r\n                .style(\"stroke-dasharray\", (\"10,3\"))\r\n                .style(\"stroke-opacity\", 0.3);\r\n\r\n            // colour scheme\r\n            const colours = d3.scaleOrdinal(d3.schemeCategory10).domain(uniqueLocations);\r\n\r\n            // bubbles\r\n            svg.selectAll('.loc-circle')\r\n                .data(locations)\r\n                .enter()\r\n                .append(\"circle\")\r\n                .attr(\"r\", (d, i) => Math.sqrt(locationLengths[i] * bubbleSizeFudge))\r\n                .attr(\"cx\", (d, i) => locationRadii[d] * Math.cos(i * theta))\r\n                .attr(\"cy\", (d, i) => locationRadii[d] * Math.sin(i * theta))\r\n                .attr(\"class\", \"loc-circle\")\r\n                .attr(\"fill\", d => colours(d))\r\n                .attr(\"transform\", \"rotate(-90)\")\r\n                .style(\"fill-opacity\", 0.7)\r\n                .style(\"mix-blend-mode\", \"color-burn\")\r\n                .on(\"mouseover\", mouseover)\r\n                .on(\"mouseout\", mouseout);\r\n\r\n            \r\n        }\r\n\r\n        // effect cleanup function\r\n        return () => {\r\n            // clean up svg when unmounting\r\n            svg.selectAll(\"*\").remove();\r\n        }\r\n    }, [data, longest]);\r\n    \r\n    return (\r\n        <svg ref={chart} style={{ display: \"inline-block\" }}></svg>\r\n    );\r\n}\r\n\r\nexport default LocationRadialBubbleChart;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\nimport LocationRadialBubbleChart from \"./LocationRadialBubbleChart\";\r\n\r\nfunction Locations() {\r\n    const [data, setData] = useState(null);\r\n    const [longest, setLongest] = useState(0);\r\n    const { series } = useParams();\r\n\r\n    // fetch data hook\r\n    useEffect(() => {\r\n        async function fetchLocationData(url) {\r\n            d3.json(url).then(data => {\r\n                setData(data)\r\n                // get length of longest locations\r\n                setLongest(d3.max(Object.values(data).map(d => d.length)));\r\n            });\r\n        }\r\n        fetchLocationData(`${process.env.PUBLIC_URL}/data/locations/S${series}_Locations.json`);\r\n    }, [series]);\r\n    \r\n    return (\r\n        <>\r\n            { data && longest ? Object.keys(data).map(d => <LocationRadialBubbleChart data={data[d]} longest={longest} />) : null }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Locations;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\n\r\nfunction Timeline() {\r\n    const [data, setData] = useState(null);\r\n    const chart = useRef(null);\r\n    const { series } = useParams();\r\n    const [initialisedSvg, setInitialisedSvg] = useState(null);\r\n    const [xAxisFunction, setXAxisFunction] = useState(null);\r\n    const [yAxisFunction, setYAxisFunction] = useState(null);\r\n\r\n    // fetch data hook\r\n    useEffect(() => {\r\n        async function fetchTimelineData(url) {\r\n            d3.json(url).then(data => setData(data));\r\n        }\r\n        fetchTimelineData(`${process.env.PUBLIC_URL}/data/timelines/timelines_s${series}.json`);\r\n    }, [series]);\r\n\r\n    // initialise viz hook\r\n    useEffect(() => {\r\n        const margin = {\r\n            top: 10,\r\n            right: 30,\r\n            bottom: 20, \r\n            left: 100\r\n        };\r\n        const height = 800 - margin.top - margin.bottom;\r\n        const width = 1200 - margin.left - margin.right;\r\n        const svg = d3.select(chart.current)\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", height + margin.top + margin.bottom)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        setInitialisedSvg(svg);\r\n\r\n        if(data) {\r\n            const { timelines, markers } = data;\r\n\r\n            // x axis\r\n            const x = d3.scaleLinear()\r\n                .domain([1, d3.max(timelines, d => d.end)])\r\n                .range([0, width]);\r\n            \r\n            // setting a function in a useState hook will evaluate the function and \r\n            // use the return value as the initial state, so instead wrap in an anonymous function\r\n            setXAxisFunction(() => x);\r\n\r\n            // y axis\r\n            const y = d3.scaleBand()\r\n                .domain(timelines.map(d => d.name))\r\n                .range([0, height])\r\n                .padding(1);\r\n\r\n            setYAxisFunction(() => y);\r\n\r\n            // append axes\r\n            const xAxis = d3.axisBottom(x)\r\n                .tickValues(markers)\r\n                .tickFormat((d, i) => `Episode ${i + 1}`)\r\n                .tickSize(-height);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n                .call(xAxis);\r\n\r\n            svg.append(\"g\")\r\n                .call(d3.axisLeft(y));\r\n\r\n            // lollipop lines\r\n            svg.selectAll(\"lollipop-line\")\r\n                .data(timelines)\r\n                .enter()\r\n                .append(\"line\")\r\n                    .attr(\"x1\", d => x(d.start))\r\n                    .attr(\"x2\", d => x(d.end))\r\n                    .attr(\"y1\", d => y(d.name))\r\n                    .attr(\"y2\", d => y(d.name))\r\n                    .attr(\"class\", \"lollipop-line\")\r\n                    .attr(\"stroke\", \"grey\")\r\n                    .attr(\"stroke-width\", \"1px\");\r\n            \r\n            // lollipop circles\r\n            svg.selectAll(\"lollipop-circle\")\r\n                .data(timelines)\r\n                .enter()\r\n                .append(\"circle\")\r\n                    .attr(\"cx\", d => x(d.start))\r\n                    .attr(\"cy\", d => y(d.name))\r\n                    .attr(\"r\", 6)\r\n                    .attr(\"class\", \"lollipop-circle\")\r\n                    .style(\"fill\", \"#69b3a2\");\r\n        }\r\n\r\n        // effect cleanup function\r\n        return () => {\r\n            // clean up svg when unmounting\r\n            svg.selectAll(\"*\").remove();\r\n        }\r\n    }, [data]);\r\n\r\n    \r\n    const timelinePerEpisode = (e) => {\r\n        const lines = initialisedSvg.selectAll(\".lollipop-line\")\r\n            .data(data.episodeTimelines);\r\n\r\n        console.log(lines);\r\n\r\n        lines.enter()\r\n            .append(\"line\")\r\n            .merge(lines)\r\n            .transition()\r\n            .duration(2000)\r\n                .attr(\"x1\", d => xAxisFunction(d.start))\r\n                .attr(\"x2\", d => xAxisFunction(d.end))\r\n                .attr(\"y1\", d => yAxisFunction(d.name))\r\n                .attr(\"y2\", d => yAxisFunction(d.name))\r\n                .attr(\"class\", \"lollipop-line\")\r\n                .attr(\"stroke\", \"red\")\r\n                .attr(\"stroke-width\", \"1px\");\r\n        \r\n        lines.exit().remove();\r\n\r\n        const circles = initialisedSvg.selectAll(\".lollipop-circle\")\r\n            .data(data.episodeTimelines);\r\n\r\n        circles.enter()\r\n            .append(\"circle\")\r\n            .merge(circles)\r\n            .transition()\r\n            .duration(2000)\r\n                .attr(\"cx\", d => xAxisFunction(d.start))\r\n                .attr(\"cy\", d => yAxisFunction(d.name))\r\n                .attr(\"r\", 6)\r\n                .attr(\"class\", \"lollipop-circle\")\r\n                .style(\"fill\", \"blue\");\r\n\r\n        circles.exit().remove();\r\n    };\r\n\r\n    \r\n    return (\r\n        <>\r\n            <svg ref={chart}></svg>\r\n            <button onClick={timelinePerEpisode}>Per Episode</button>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Timeline;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\n// import * as d3Annotation from \"d3-svg-annotation\";\r\nimport ReferenceData from \"../../reference/ReferenceData\";\r\n\r\nfunction SentencesChart(props) {\r\n    const { series } = useParams();\r\n    const chart = useRef(null);\r\n    const { data, index, maxLines } = props;\r\n    const speaker = index % 2 === 0 ? \"Mark\" : \"Jeremy\";\r\n    const episode = Math.floor((index / 2) + 1);\r\n\r\n    // initialise viz hook\r\n    useEffect(() => {\r\n        const referenceData = new ReferenceData();\r\n\r\n        const margin = {\r\n            top: 60,\r\n            right: 0,\r\n            bottom: 10, \r\n            left: 50\r\n        };\r\n        const height = 700 - margin.top - margin.bottom;\r\n        const width = 100 - margin.left - margin.right;\r\n        const svg = d3.select(chart.current)\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", height + margin.top + margin.bottom)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        if(data) {\r\n            // x axis\r\n            const x = d3.scaleLinear()\r\n                .domain([0, d3.max(data, d => d.NumWords)])\r\n                .range([0, width]);\r\n\r\n            // range of indices for the y scale\r\n            const range = [];\r\n            // each episode will have a different starting index, so get that first\r\n            const minIdx = d3.min(data, d => d.index);\r\n            // set scale to the longest number of lines spoken throughout the series\r\n            // this way we can also visualise how who spoke the most lines per episode\r\n            for(let i = minIdx; i <= minIdx + maxLines; i++) {\r\n                range.push(i);\r\n            }\r\n\r\n            const y = d3.scaleBand()\r\n                .domain(range)\r\n                .range([0, height]);\r\n                // .padding(6);\r\n\r\n            // append axes\r\n            const xAxis = d3.axisTop(x)\r\n                .ticks(1)\r\n                .tickValues([\"\"])\r\n                .tickSize(-height - margin.top - margin.bottom)\r\n                // .tickSizeInner(0)\r\n                .tickSizeOuter(0);\r\n\r\n            svg.append(\"g\")\r\n                // .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n                .attr(\"class\", \"axis\")\r\n                .call(xAxis);\r\n\r\n            // svg.append(\"g\")\r\n            //     .call(d3.axisLeft(y));\r\n\r\n            svg.selectAll(\".num-words-bar\")\r\n                .data(data)\r\n                .enter()\r\n                .append(\"rect\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"y\", d => y(d.index))\r\n                    .attr(\"width\", 0)\r\n                    // .attr(\"width\", d => x(d.NumWords))\r\n                    .attr(\"height\", y.step() * 0.8)\r\n                    // .attr(\"height\", 4)\r\n                    .attr(\"class\", \"num-words-bar\")\r\n                    .attr(\"id\", (d, i) => `sentence-${d.index}`)\r\n                    .attr(\"fill\", d => d.Internal ? \"tomato\" : \"dodgerblue\")\r\n                    // .style(\"opacity\", 0.25)\r\n                    .on(\"mouseover\", function(d, i) { d3.select(this).attr(\"opacity\", \"0.25\") })\r\n                    .on(\"mouseout\", function(d, i) { d3.select(this).attr(\"opacity\", \"1\") })\r\n                    .on(\"click\", function(d, i) { console.log(i, d) })  // for debugging\r\n                    .transition()\r\n                    .duration(2000)\r\n                    .attr(\"transform\", (d) => {\r\n                        let width = x(d.NumWords);\r\n                        return `translate(-${width / 2}, 0)`\r\n                    })\r\n                    .attr(\"width\", d => x(d.NumWords));\r\n\r\n             // Draw header.\r\n            const header = svg.append('g')\r\n                .attr('class', 'bar-header')\r\n                .attr('transform', `translate(0,${-margin.top * 0.6})`)\r\n                .attr(\"text-anchor\", \"middle\")\r\n                .append('text');\r\n\r\n            header.append('tspan').text(speaker);\r\n\r\n            header.append('tspan')\r\n                .attr('x', 0)\r\n                .attr('dy', '1.5em')\r\n                .style('font-size', '0.6em')\r\n                .style('fill', '#555')\r\n                .text(`${referenceData.episodeTitles[series][episode - 1]}`);\r\n        }\r\n\r\n        // effect cleanup function\r\n        return () => {\r\n            // clean up svg when unmounting\r\n            svg.selectAll(\"*\").remove();\r\n        }\r\n    }, [data]);\r\n\r\n    \r\n    return (\r\n        <svg ref={chart}></svg>\r\n    );\r\n}\r\n\r\nexport default SentencesChart;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nfunction Averages(props) {\r\n    const chart = useRef(null);\r\n    const { data } = props;\r\n\r\n    // initialise viz hook\r\n    useEffect(() => {\r\n        const margin = {\r\n            top: 0,\r\n            right: 0,\r\n            bottom: 0, \r\n            left: 50\r\n        };\r\n        const height = 60 - margin.top - margin.bottom;\r\n        const width = 100 - margin.left - margin.right;\r\n        const svg = d3.select(chart.current)\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", height + margin.top + margin.bottom)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        if(data) {\r\n            // data is a number representing the average number of words per sentence\r\n            // make a range between 1 and this number for a band scale\r\n            const averageData = [];\r\n            for(let i = 1; i <= data; i++) {\r\n                averageData.push({\r\n                    idx: i\r\n                });\r\n            }\r\n            \r\n            // x axis\r\n            const x = d3.scaleLinear()\r\n                .domain([0, 1])\r\n                .range([0, width]);\r\n\r\n            const y = d3.scaleBand()\r\n                // .domain(averageData.map(d => d.idx))\r\n                .domain([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])\r\n                .range([height, 0]);\r\n\r\n            // append axes\r\n            const xAxis = d3.axisTop(x)\r\n                .ticks(1)\r\n                .tickValues([\"\"])\r\n                .tickSize(-height - margin.top - margin.bottom)\r\n                // .tickSizeInner(0)\r\n                .tickSizeOuter(0);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"transform\", \"translate(0,\" + (-margin.top) + \")\")\r\n                .attr(\"class\", \"axis\")\r\n                .call(xAxis);\r\n\r\n            svg.selectAll(\".average-bars\")\r\n                .data(averageData)\r\n                .enter()\r\n                .append(\"rect\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"y\", d => y(d.idx))\r\n                    .attr(\"width\", d => x(0.5))\r\n                    // .attr(\"height\", y.step())\r\n                    .attr(\"height\", 2)\r\n                    .attr(\"class\", \"average-bars\")\r\n                    .attr(\"transform\", (d) => {\r\n                        let width = x(0.5);\r\n                        return `translate(-${width / 2}, 0)`\r\n                    })\r\n                    .attr(\"fill\", \"#333\")\r\n                    .on(\"mouseover\", function(d, i) { d3.select(this).attr(\"opacity\", \"0.25\") })\r\n                    .on(\"mouseout\", function(d, i) { d3.select(this).attr(\"opacity\", \"1\") });\r\n        }\r\n\r\n        // effect cleanup function\r\n        return () => {\r\n            // clean up svg when unmounting\r\n            svg.selectAll(\"*\").remove();\r\n        }\r\n    }, [data]);\r\n\r\n    \r\n    return (\r\n        <svg ref={chart}></svg>\r\n    );\r\n}\r\n\r\nexport default Averages;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nfunction InteralProportion(sentenceData) {\r\n    const chart = useRef(null);\r\n    const { data } = sentenceData;\r\n\r\n    // initialise viz hook\r\n    useEffect(() => {\r\n        const margin = {\r\n            top: 5,\r\n            right: 0,\r\n            bottom: 5, \r\n            left: 50\r\n        };\r\n        const height = 50 - margin.top - margin.bottom;\r\n        const width = 100 - margin.left - margin.right;\r\n        const svg = d3.select(chart.current)\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", height + margin.top + margin.bottom)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        // append axes\r\n        const x = d3.scaleLinear()\r\n                .domain([0, 1])\r\n                .range([0, width]);\r\n                \r\n        const xAxis = d3.axisTop(x)\r\n            .ticks(1)\r\n            .tickValues([\"\"])\r\n            .tickSize(-height - margin.top - margin.bottom)\r\n            // .tickSizeInner(0)\r\n            .tickSizeOuter(0);\r\n\r\n        svg.append(\"g\")\r\n            .attr(\"transform\", \"translate(0,\" + (-margin.top) + \")\")\r\n            .attr(\"class\", \"axis\")\r\n            .call(xAxis);\r\n\r\n        if(data) {\r\n            const maxRadius = 350;\r\n            const internalPercentage = data.filter(d => d.Internal).length / data.length;\r\n            const externalPercentage = data.filter(d => d.Internal === false).length / data.length;\r\n\r\n            const internalRadius = Math.sqrt(internalPercentage * maxRadius);\r\n            const externalRadius = Math.sqrt(externalPercentage * maxRadius);\r\n            \r\n            const internalArc = d3.arc().innerRadius(0).outerRadius(internalRadius).startAngle(180 * (Math.PI / 180)).endAngle(360 * (Math.PI / 180));\r\n            const externalArc = d3.arc().innerRadius(0).outerRadius(externalRadius).startAngle(0).endAngle(180 * (Math.PI / 180));\r\n\r\n            // move down 20px to centralise\r\n            svg.append(\"path\")\r\n                .attr(\"d\", internalArc)\r\n                .attr(\"fill\", \"tomato\")\r\n                .attr(\"transform\", \"translate(0, 20)\");\r\n\r\n            svg.append(\"path\")\r\n                .attr(\"d\", externalArc)\r\n                .attr(\"fill\", \"dodgerblue\")\r\n                .attr(\"transform\", \"translate(0, 20)\");\r\n        }\r\n\r\n        // effect cleanup function\r\n        return () => {\r\n            // clean up svg when unmounting\r\n            svg.selectAll(\"*\").remove();\r\n        }\r\n    }, [data]);\r\n\r\n    \r\n    return (\r\n        <svg ref={chart}></svg>\r\n    );\r\n}\r\n\r\nexport default InteralProportion;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nfunction TopNouns(topNounData) {\r\n    const chart = useRef(null);\r\n\r\n    // initialise viz hook\r\n    useEffect(() => {\r\n        const margin = {\r\n            top: 20,\r\n            right: 0,\r\n            bottom: 20, \r\n            left: 50\r\n        };\r\n        const height = 120 - margin.top - margin.bottom;\r\n        const width = 100 - margin.left - margin.right;\r\n        const svg = d3.select(chart.current)\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", height + margin.top + margin.bottom)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        svg.selectAll(\".num-words-bar\")\r\n            .data(topNounData.topNounData)\r\n            .enter()\r\n            .append(\"text\")\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", (d, i) => i * 20)\r\n            .attr(\"fill\", \"#000\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .text(d => d);\r\n\r\n        // effect cleanup function\r\n        return () => {\r\n            // clean up svg when unmounting\r\n            svg.selectAll(\"*\").remove();\r\n        }\r\n    }, []);\r\n\r\n    \r\n    return (\r\n        <svg ref={chart}></svg>\r\n    );\r\n}\r\n\r\nexport default TopNouns;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\nimport SentencesChart from \"./SentencesChart\";\r\nimport Averages from \"./Averages\";\r\nimport InternalProportion from \"./InternalProportion\";\r\nimport TopNouns from \"./TopNouns\";\r\nimport \"./Sentences.css\";\r\n\r\nfunction Sentences() {\r\n    const schema = (d) => {\r\n        return {\r\n            index: +d.index,\r\n            Episode: +d.Episode,\r\n            Speaker: d.Speaker,\r\n            Internal: d.Internal === \"True\" ? true : false,\r\n            NumWords: +d.NumWords,\r\n            // Sentences: d.Sentences\r\n            Lines: d.Lines\r\n        }\r\n    };\r\n\r\n    const { series } = useParams();\r\n    const [datasets, setDatasets] = useState([]);\r\n    const [topNounDatasets, setTopNounDatasets] = useState([]);\r\n    const [averageSentenceLengthDatasets, setAverageSentenceLengthDatasets] = useState([]);\r\n\r\n    // fetch data hook\r\n    useEffect(() => {\r\n        async function fetchSentenceData(url) {\r\n            const episodeDatasets = [];\r\n\r\n            d3.csv(url, schema).then(data => {\r\n                for(let i = 1; i <= 6; i++) {\r\n                    episodeDatasets.push(data.filter(s => s.Speaker === \"Mark\" && s.Episode === i));\r\n                    episodeDatasets.push(data.filter(s => s.Speaker === \"Jeremy\" && s.Episode === i));\r\n                }\r\n                setDatasets(episodeDatasets);\r\n            });\r\n        }\r\n\r\n        async function fetchTopNounData(url) {\r\n            d3.json(url).then(data => {\r\n                for(let i = 1; i <= 6; i++) {\r\n                    const markTopNouns = data[\"Mark\"][`Episode_${i}`];\r\n                    const jezTopNouns = data[\"Jeremy\"][`Episode_${i}`];\r\n                    \r\n                    setTopNounDatasets(prevDatasets => [...prevDatasets, [markTopNouns]]);\r\n                    setTopNounDatasets(prevDatasets => [...prevDatasets, [jezTopNouns]]);\r\n                }\r\n            });\r\n        }\r\n\r\n        async function fetchAverageSentenceLengthData(url) {\r\n            d3.json(url).then(data => {\r\n                for(let i = 1; i <= 6; i++) {\r\n                    const markAverageSentenceLength = data[\"Mark\"][`${i}`];\r\n                    const jezAverageSentenceLength = data[\"Jeremy\"][`${i}`];\r\n\r\n                    // console.log(markAverageSentenceLength);\r\n                    \r\n                    setAverageSentenceLengthDatasets(prevDatasets => [...prevDatasets, markAverageSentenceLength]);\r\n                    setAverageSentenceLengthDatasets(prevDatasets => [...prevDatasets, jezAverageSentenceLength]);\r\n                }\r\n            });\r\n        }\r\n        \r\n        fetchSentenceData(`${process.env.PUBLIC_URL}/data/sentences/s${series}-lines.csv`);\r\n        fetchTopNounData(`${process.env.PUBLIC_URL}/data/sentences/s${series}-top-nouns.json`);\r\n        fetchAverageSentenceLengthData(`${process.env.PUBLIC_URL}/data/sentences/s${series}-ave-sentence-length.json`);\r\n    }, [series]);\r\n\r\n    return (\r\n        <>\r\n            { /* pass max number of lines to sentences chart to visualise the difference in number of lines spoken in each episode */ }\r\n            { datasets.map((d, idx) => <SentencesChart key={idx} data={d} index={idx} maxLines={d3.max(datasets.map(d => d.length))} />) }\r\n            { averageSentenceLengthDatasets.map((d, idx) => <Averages key={idx} data={d} />) }\r\n            { datasets.map((d, idx) => <InternalProportion key={idx} data={d} />) }\r\n            { topNounDatasets.map((d, idx) => <TopNouns key={idx} topNounData={d[0]} />) }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Sentences;\r\n","import React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\nimport chroma from \"chroma-js\";\r\nimport ReferenceData from \"../../reference/ReferenceData\";\r\nimport \"./Sentiment.css\";\r\n\r\n// using forwardRef in order to gain access to the 'ref' object that is assigned using the 'ref' prop \r\n// inside the Explorer component which will allow us to access functions in this component inside Explorer.\r\nconst Sentiment = forwardRef((props, ref) => {\r\n    const referenceData = new ReferenceData();\r\n    const chart = useRef(null);\r\n    const { series } = useParams();\r\n    const [data, setData] = useState(null);\r\n    const [groupedData, setGroupedData] = useState(null);\r\n    const [svg, setSvg] = useState(null);\r\n    const [x, setX] = useState(null);\r\n    const [y, setY] = useState(null);\r\n    const [yAxisDraw, setYAxisDraw] = useState(null);\r\n    const [finished, setFinished] = useState(false);\r\n    const schema = (d) => {\r\n        return {\r\n            id: +d.id,\r\n            neg: +d.neg,\r\n            neu: +d.neu,\r\n            pos: +d.pos,\r\n            compound: +d.compound,\r\n            sentence: d.sentence,\r\n            episode: +d.episode,\r\n            speaker: d.speaker,\r\n            length: +d.length,\r\n        }\r\n    };\r\n\r\n    // fetch data hook\r\n    useEffect(() => {\r\n        async function fetchSentimentData(url) {\r\n            d3.csv(url, schema).then(data => setData(data));\r\n        }\r\n        fetchSentimentData(`${process.env.PUBLIC_URL}/data/sentiment/S${series}_Sentiment.csv`);\r\n    }, [series]);\r\n\r\n    const groupData = () => {\r\n        const episodeData = d3.group(data, d => d.episode);\r\n        // for each episode/speaker, get the average sentiment score\r\n        const episodeSentiment = Array.from(episodeData, ([key, val]) => d3.rollup(episodeData.get(key), v => d3.mean(v, d => d.compound), d => d.speaker));\r\n        \r\n        // restructure as per the raw data for ease of visualisation\r\n        const restructuredData = [];\r\n        episodeSentiment.map((es, idx) => {\r\n            es.forEach((val, key) => {\r\n                restructuredData.push({\r\n                    compound: val,\r\n                    episode: idx + 1,\r\n                    speaker: key,\r\n                    id: key + idx\r\n                });\r\n            });\r\n        });\r\n\r\n        setGroupedData(restructuredData);\r\n    };\r\n\r\n    // initialise chart hook\r\n    useEffect(() => {\r\n        const margin = {\r\n            top: 20,\r\n            right: 60,\r\n            bottom: 50,\r\n            left: 150\r\n        };\r\n        const height = 850;\r\n        const width = 1100;\r\n        const svg = d3.select(chart.current)\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", height + margin.top + margin.bottom)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        setSvg(svg);\r\n\r\n        // schema results in a dataset of NaNs even if dataset doesn't exist, so check for this before rendering\r\n        if(data && data[0].sentence) {\r\n            // group data\r\n            groupData();\r\n\r\n            const x = d3.scaleBand()\r\n                .domain([1, 2, 3, 4, 5, 6])\r\n                .range([0, width])\r\n                .paddingInner(10);\r\n\r\n            const y = d3.scaleLinear()\r\n                .domain([1, -1])\r\n                .range([0, height]);\r\n\r\n            setX(() => x);\r\n            setY(() => y);\r\n\r\n            // draw axes\r\n            const xAxisDraw = d3.axisBottom(x)\r\n                // .tickFormat((d, i) => `Episode ${i + 1}`)\r\n                .tickFormat((d, i) => referenceData.episodeTitles[series][i])\r\n                .tickPadding(20)\r\n                .tickSize(-height)\r\n                .tickSizeOuter(0);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"xaxis\")\r\n                .attr(\"transform\", `translate(${-x.bandwidth() / 2}, ${height})`)\r\n                .call(xAxisDraw);\r\n\r\n            const yAxisDraw = d3.axisLeft(y)\r\n                .tickValues([1, 0, -1])\r\n                .tickFormat((d, i) => [\"\", \"\", \"\"][i])\r\n                .tickPadding(20)\r\n                // .tickSize(-width)\r\n                .tickSizeOuter(0);\r\n\r\n            setYAxisDraw(() => yAxisDraw);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"yaxis\")\r\n                .attr(\"transform\", `translate(${-margin.left / 2},0)`)\r\n                .call(yAxisDraw);\r\n\r\n            // tick handler\r\n            const ticked = (e) => {\r\n                svg.selectAll(\".sentiment-circle\")\r\n                    // .transition()\r\n                    // .ease(d3.easeCircle)\r\n                    // .delay((d, i) => i * 1)\r\n                    .attr(\"cx\", d => d.x)\r\n                    .attr(\"cy\", d => d.y);\r\n                    // .style(\"fill\", \"#69b3a2\");\r\n            };\r\n\r\n            // mouse handlers\r\n            const mouseover = (event, data) => {\r\n                // console.log(event);\r\n                // console.log(data);\r\n\r\n                const speaker = data.speaker.replaceAll(' ', '-').replace(\"'\", \"\").toLowerCase();\r\n                const tip = d3.select(\".tooltip\");\r\n\r\n                // work out position for tooltip so it doesn't venture off screen\r\n                const xPos = data.episode === 6 ? event.offsetX + 400 : event.clientX;\r\n                const yPos = event.clientY > 700 ? event.clientY - 300 : event.clientY;\r\n\r\n                tip.style(\"left\", `${xPos}px`)\r\n                    .style(\"top\", `${yPos}px`)\r\n                    .style(\"border-top\", `60px solid ${referenceData.characterColours[data.speaker]}`)\r\n                    .transition()\r\n                    .style(\"opacity\", 0.9);\r\n\r\n                tip.select(\".tooltip-avatar\").style(\"background-image\", `url('${process.env.PUBLIC_URL}/avatars/${speaker}.jpg')`);\r\n\r\n                tip.select(\".tooltip-text\").html(data.sentence);\r\n\r\n                // highlight all sentences by that person\r\n                // unless we're in focus mode in which case we don't want to interfere with the current display\r\n                if(svg.selectAll(\".sentiment-circle.focus\").empty()) {\r\n                    svg.selectAll(\".sentiment-circle\")\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", 0.25);\r\n\r\n                    svg.selectAll(`.sentiment-circle.${speaker}`)\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", \"1\");\r\n                }\r\n            };\r\n\r\n            const mousemove = (event, data) => {\r\n                // work out position for tooltip so it doesn't venture off screen\r\n                const xPos = data.episode === 6 ? event.offsetX + 400 : event.clientX;\r\n                const yPos = event.clientY > 700 ? event.clientY - 300 : event.clientY;\r\n\r\n                d3.select(\".tooltip\")\r\n                    .style(\"left\", `${xPos}px`)\r\n                    .style(\"top\", `${yPos}px`);\r\n            };\r\n              \r\n            const mouseout = (event, data) => {\r\n                d3.select(\".tooltip\")\r\n                    .transition()\r\n                    .style(\"opacity\", 0);\r\n\r\n                // re-highlight all elements if we're not in focus mode\r\n                // otherwise we can leave the display as is\r\n                if(svg.selectAll(\".sentiment-circle.focus\").empty()) {\r\n                    svg.selectAll(\".sentiment-circle\")\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", 1);\r\n                }\r\n            };\r\n\r\n            // simulation - adds x and y attributes to the data\r\n            const collisionRad = 5;\r\n            const fudgeFactor = 2;\r\n            d3.forceSimulation(data)\r\n                .velocityDecay(0.2)\r\n                .force(\"x\", d3.forceX(d => x(d.episode)).strength(0.02))\r\n                .force(\"y\", d3.forceY(d => y(d.compound)).strength(0.02))\r\n                .force(\"collide\", d3.forceCollide().radius(d => Math.sqrt(d.length * fudgeFactor + collisionRad)))\r\n                .on(\"tick\", ticked)\r\n                .on(\"end\", setFinished(true));\r\n                // .stop()\r\n                // .tick(50);\r\n\r\n            // draw circles\r\n            svg.selectAll(\".sentiment-circle\")\r\n                .data(data, d => d.id)\r\n                .enter()\r\n                .append(\"circle\")\r\n                .attr(\"cx\", d => x(d.episode))\r\n                .attr(\"cy\", d => y(d.compound))\r\n                .attr(\"r\", d => Math.sqrt(d.length * fudgeFactor))\r\n                .attr(\"class\", d => `sentiment-circle ${d.speaker.replaceAll(' ', '-').replace(\"'\", \"\").toLowerCase()}`)\r\n                // .attr(\"class\", \"sentiment-circle\")\r\n                .style(\"fill\", referenceData.seriesColours[series - 1])\r\n                .on(\"mouseover\", mouseover)\r\n                .on(\"mousemove\", mousemove)\r\n                .on(\"mouseout\", mouseout);\r\n        }\r\n\r\n        // effect cleanup function\r\n        return () => {\r\n            // clean up svg when unmounting\r\n            svg.selectAll(\"*\").remove();\r\n        }\r\n    }, [data]);\r\n\r\n    // useImperativeHandle hook means the component will be extended with \r\n    // whatever we return from the callback passed as the 2nd argument\r\n    useImperativeHandle(ref, () => ({\r\n        // we return our grouping functionality as this will be invoked \r\n        // inside the Explorer component once it scrolls into place\r\n        showGroupedData() {\r\n            if(svg && data) {\r\n                const t = d3.transition().delay(1000).duration(3000);\r\n                const collisionRad = 1;\r\n                const fudgeFactor = 2;\r\n\r\n                // transition axis\r\n                // update y axis domain (add 10% to make sure bubbles don't get cropped)\r\n                const newDomain = d3.extent(groupedData, d => d.compound);\r\n                const min = newDomain[0] + newDomain[0] * 0.1;\r\n                const max = newDomain[1] + newDomain[1] * 0.1;\r\n                y.domain([max, min]);\r\n                // update tick value positions before redrawing\r\n                yAxisDraw.tickValues([max, 0, min]);\r\n                svg.select(\".yaxis\")\r\n                    .transition()\r\n                    .duration(2000)\r\n                    .call(yAxisDraw);\r\n\r\n                // add defs for avatars\r\n                const patterns = svg.append(\"defs\").selectAll(\"patterns\")\r\n                    .data(referenceData.seriesCharacters[series - 1])\r\n                    .enter().append(\"pattern\")\r\n                    .attr(\"id\", d => d.replaceAll(' ', '-').replace(\"'\", \"\"))\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"y\", 0)\r\n                    .attr(\"gradientUnits\", \"userSpaceOnUse\")\r\n                    .attr(\"height\", 40)\r\n                    .attr(\"width\", 40);\r\n\r\n                // append images to pattern defs\r\n                patterns.append(\"image\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"y\", 0)\r\n                    .attr(\"height\", 40)\r\n                    .attr(\"width\", 40)\r\n                    .attr(\"xlink:href\", d => `${process.env.PUBLIC_URL}/avatars/${d.replaceAll(' ', '-').replace(\"'\", \"\").toLowerCase()}.jpg`);\r\n\r\n                const ticked = (e) => {\r\n                    svg.selectAll(\".sentiment-circle\")\r\n                        .transition()\r\n                        // .ease(d3.easeCircle)\r\n                        // .delay((d, i) => i * 1)\r\n                        .attr(\"cx\", d => d.x)\r\n                        .attr(\"cy\", d => d.y);\r\n                        // .style(\"fill\", \"#69b3a2\");\r\n\r\n                    // remember to update connector lines as well!\r\n                    svg.selectAll(\".sentiment-connector\")\r\n                        .attr(\"x1\", d => d[0].x)\r\n                        .attr(\"x2\", d => d[1].x)\r\n                        .attr(\"y1\", d => d[0].y)\r\n                        .attr(\"y2\", d => d[1].y);\r\n                };\r\n\r\n                // function which draws lines between a characters average episode sentiment\r\n                const drawLines = () => {\r\n                    const speakerGroups = d3.group(groupedData, d => d.speaker);\r\n                    // ignore any speakers who only appeared in a single episode\r\n                    for(let speaker of speakerGroups.keys()) {\r\n                        if(speakerGroups.get(speaker).length === 1) {\r\n                            speakerGroups.delete(speaker);\r\n                        }\r\n                    }\r\n\r\n                    // pair data for lines\r\n                    const dataset = [];\r\n                    for(let speaker of speakerGroups.keys()) {\r\n                        const data = speakerGroups.get(speaker);\r\n                        const pairedData = d3.pairs(data);\r\n                        dataset.push(pairedData);\r\n                    }\r\n\r\n                    svg.selectAll(\".sentiment-connector\")\r\n                        .data(dataset.flatMap(el => el))\r\n                        .enter()\r\n                        .append(\"line\")\r\n                        .attr(\"class\", d => `sentiment-connector ${d[0].speaker.replaceAll(' ', '-').replace(\"'\", \"\").toLowerCase()}`)\r\n                        .attr(\"x1\", d => d[0].x)\r\n                        .attr(\"x2\", d => d[1].x)\r\n                        .attr(\"y1\", d => d[0].y)\r\n                        .attr(\"y2\", d => d[1].y)\r\n                        .style(\"fill\", \"none\")\r\n                        .style(\"stroke\", d => chroma(referenceData.characterColours[d[0].speaker]).alpha(0.25).hex())\r\n                        .style(\"stroke-width\", 2);\r\n                }\r\n\r\n                d3.forceSimulation(groupedData)\r\n                    .velocityDecay(0.1)\r\n                    .force(\"x\", d3.forceX(d => x(d.episode)).strength(0.2))\r\n                    .force(\"y\", d3.forceY(d => y(d.compound)).strength(0.2))\r\n                    .force(\"collide\", d3.forceCollide().radius(d => 21))\r\n                    .on(\"tick\", ticked)\r\n                    .on(\"end\", drawLines())\r\n                    .tick(70);\r\n\r\n                // mouse handlers for grouped data\r\n                const mouseover = (event, data) => {\r\n                    const speaker = data.speaker.replaceAll(\" \", \"-\").replace(\"'\", \"\").toLowerCase();\r\n                    const tip = d3.select(\".tooltip\");\r\n\r\n                    // work out position for tooltip so it doesn't venture off screen\r\n                    const xPos = data.episode === 6 ? event.offsetX + 400 : event.clientX;\r\n                    const yPos = event.clientY > 700 ? event.clientY - 300 : event.clientY;\r\n\r\n                    const tooltipText = `<h2>${data.speaker}</h2><p>Average Sentiment<br />${data.compound.toFixed(2)}</p>`;\r\n\r\n                    tip.style(\"left\", `${xPos}px`)\r\n                        .style(\"top\", `${yPos}px`)\r\n                        .style(\"border-top\", `60px solid ${referenceData.characterColours[data.speaker]}`)\r\n                        .transition()\r\n                        .style(\"opacity\", 0.9);\r\n\r\n                    tip.select(\".tooltip-avatar\").style(\"background-image\", `url('${process.env.PUBLIC_URL}/avatars/${speaker}.jpg')`);\r\n\r\n                    tip.select(\".tooltip-text\").html(tooltipText);\r\n\r\n                    // highlight this person\r\n                    svg.selectAll(\".sentiment-circle\")\r\n                        .transition()\r\n                        .style(\"opacity\", 0.25);\r\n                    svg.selectAll('.sentiment-connector')\r\n                        .transition()\r\n                        .style(\"opacity\", 0.25);\r\n\r\n                    svg.selectAll(`.sentiment-circle.${speaker}`)\r\n                        .transition()\r\n                        .style(\"opacity\", 1);\r\n                    svg.selectAll(`.sentiment-connector.${speaker}`)\r\n                        .transition()\r\n                        .style(\"stroke\", d => chroma(referenceData.characterColours[d[0].speaker]).alpha(1).hex())\r\n                        .style(\"opacity\", 1);\r\n                };\r\n\r\n                const mousemove = (event, data) => {\r\n                    // work out position for tooltip so it doesn't venture off screen\r\n                    const xPos = data.episode === 6 ? event.offsetX + 400 : event.clientX;\r\n                    const yPos = event.clientY > 700 ? event.clientY - 300 : event.clientY;\r\n\r\n                    d3.select(\".tooltip\")\r\n                        .style(\"left\", `${xPos}px`)\r\n                        .style(\"top\", `${yPos}px`);\r\n                };\r\n                \r\n                const mouseout = (event, data) => {\r\n                    d3.select(\".tooltip\")\r\n                        .transition()\r\n                        .style(\"opacity\", 0);\r\n\r\n                    svg.selectAll(\".sentiment-circle\")\r\n                        .transition()\r\n                        .style(\"opacity\", 1);\r\n\r\n                    svg.selectAll(\".sentiment-connector\")\r\n                        .transition()\r\n                        .style(\"stroke\", d => chroma(referenceData.characterColours[d[0].speaker]).alpha(0.25).hex())\r\n                        .style(\"opacity\", 1);\r\n                };\r\n\r\n                svg.selectAll(\".sentiment-circle\")\r\n                    .data(groupedData, d => d.id)\r\n                    .join(\r\n                        enter => {\r\n                            enter.append(\"circle\")\r\n                                .attr(\"cx\", d => x(d.episode))\r\n                                .attr(\"cy\", d => y(d.compound))\r\n                                .attr(\"r\", 20)\r\n                                .attr(\"class\", d => `sentiment-circle ${d.speaker.replaceAll(' ', '-').replace(\"'\", \"\").toLowerCase()}`)\r\n                                // .style(\"fill\", \"#f00\");\r\n                                .style(\"fill\", d => `url(#${d.speaker.replaceAll(' ', '-').replace(\"'\", \"\")})`)\r\n                                .style(\"stroke\", d => referenceData.characterColours[d.speaker])\r\n                                .style(\"stroke-width\", 3)\r\n                                .on(\"mouseover\", mouseover)\r\n                                .on(\"mousemove\", mousemove)\r\n                                .on(\"mouseout\", mouseout);\r\n                        },\r\n                        update => { update.style(\"opacity\", 0).remove() },\r\n                        // update => {\r\n                        //     update.call(update => update.transition(t)\r\n                        //         .style(\"opacity\", 0)\r\n                        //         .remove());\r\n                        // },\r\n                        exit => { exit.style(\"opacity\", 0).remove() }\r\n                        // exit => {\r\n                        //     exit.call(exit => exit.transition(t)\r\n                        //         .attr(\"opacity\", 0)\r\n                        //         .remove());\r\n                        // }\r\n                    );\r\n            }\r\n        }\r\n    }));\r\n    \r\n    return (\r\n        <>\r\n            <svg ref={chart}></svg>\r\n            {/* <p>{finished ? \"Simulation finished\" : \"Simulation running\"}</p> */}\r\n            <div className=\"tooltip\">\r\n                <div className=\"tooltip-avatar\"></div>\r\n                <p className=\"tooltip-text\"></p>\r\n            </div>\r\n        </>\r\n    );\r\n});\r\n\r\nexport default Sentiment;","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\nimport chroma from \"chroma-js\";\r\nimport ReferenceData from \"../../reference/ReferenceData\";\r\nimport \"./Lines.css\";\r\n\r\nfunction Lines() {\r\n    const chart = useRef(null);\r\n    const { series } = useParams();\r\n    const [data, setData] = useState(null);\r\n    const schema = (d) => {\r\n        return {\r\n            index: +d.index,\r\n            Season: +d.Season,\r\n            Episode: +d.Episode,\r\n            NumLines: +d.NumLines\r\n        }\r\n    };\r\n\r\n    // fetch data hook\r\n    useEffect(() => {\r\n        async function fetchNumLinesData(url) {\r\n            d3.csv(url, schema).then(data => setData(data));\r\n        }\r\n        fetchNumLinesData(`${process.env.PUBLIC_URL}/data/stats/num_lines.csv`);\r\n    }, []);\r\n\r\n    // initialise chart hook\r\n    useEffect(() => {\r\n        const referenceData = new ReferenceData();\r\n        const episodeTitles = Object.values(referenceData.episodeTitles).flatMap(x => x);\r\n        const seriesColour = referenceData.seriesColours[series - 1];\r\n\r\n        const margin = {\r\n            top: 100,\r\n            right: 20,\r\n            bottom: 150, \r\n            left: 100\r\n        };\r\n        const height = 900 - margin.top - margin.bottom;\r\n        const width = 1300 - margin.left - margin.right;\r\n        const svg = d3.select(chart.current)\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", height + margin.top + margin.bottom)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        if(data) {\r\n            const x = d3.scaleBand()\r\n                .domain(data.map(d => d.index))\r\n                .range([0, width])\r\n                .paddingInner(1);\r\n\r\n            // y range taken from https://chezvoila.com/blog/yaxis/: b = 3c - a / 2\r\n            // where b is the min scale value, c is the min data value and a is the max scale value\r\n            const min = d3.min(data, d => d.NumLines);\r\n            // round max to the nearest hundred (as max lines in data is 392)\r\n            const max = Math.ceil(d3.max(data, d => d.NumLines) / 100) * 100;\r\n            const b = (3 * min - max) / 2;\r\n            const y = d3.scaleLinear()\r\n                .domain([b, max])\r\n                .range([height, 0]);\r\n\r\n            // draw axes\r\n            const xAxisDraw = d3.axisBottom(x)\r\n                .tickFormat((d, i) => episodeTitles[i])\r\n                .tickPadding(20)\r\n                .tickSize(-height)\r\n                .tickSizeOuter(0);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"lines-xaxis\")\r\n                .attr(\"transform\", `translate(0, ${height})`)\r\n                .call(xAxisDraw)\r\n                .call(g => g.select(\".domain\").remove())\r\n                .selectAll(\"text\")\r\n                    .attr(\"y\", 0)\r\n                    .attr(\"x\", 9)\r\n                    .attr(\"dy\", \".35em\")\r\n                    .attr(\"transform\", \"rotate(90)\")\r\n                    .style(\"text-anchor\", \"start\");\r\n\r\n            const yAxisDraw = d3.axisLeft(y)\r\n                .tickPadding(20)\r\n                .tickSize(-width)\r\n                .tickSizeOuter(0);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"lines-yaxis\")\r\n                .call(yAxisDraw)\r\n                .call(g => g.select(\".domain\").remove());\r\n\r\n            // mouse handlers\r\n            const mouseover = (event, data) => {\r\n                const tip = d3.select(\".lines-tooltip\");\r\n                const episodeTitle = referenceData.episodeTitles[data.Season][data.Episode - 1];\r\n                const seriesColour = referenceData.seriesColours[data.Season - 1];\r\n                const tooltipHtml = `<p style=\"border-bottom: 3px solid ${seriesColour}\">${episodeTitle}</p>\r\n                    <small>Series ${data.Season}, Episode ${data.Episode}</small>\r\n                    <p>${data.NumLines} lines</p>`;\r\n\r\n                tip.style(\"left\", `${event.clientX + 20}px`)\r\n                    .style(\"top\", `${event.clientY}px`)\r\n                    .transition()\r\n                    .style(\"opacity\", 0.9);\r\n\r\n                tip.select(\".lines-tooltip-text\").html(tooltipHtml);\r\n            };\r\n\r\n            const mouseout = (event, data) => {\r\n                d3.select(\".lines-tooltip\")\r\n                    .transition()\r\n                    .style(\"opacity\", 0);\r\n            };\r\n\r\n            // using a path for a single line (can't colour it separately though...)\r\n            // const lineGen = d3.line().x(d => x(d.index)).y(d => y(d.NumLines));\r\n            // svg.append(\"path\")\r\n            //     .attr(\"class\", \"num-lines\")\r\n            //     .transition()\r\n            //     .attr(\"d\", d => lineGen(data))\r\n            //     .style(\"fill\", \"none\")\r\n            //     .style(\"stroke\", \"#333\");\r\n\r\n            // use separate line elements instead\r\n            // need to pair the data to get the start/end co-ordinates of the line\r\n            const pairedData = d3.pairs(data);\r\n\r\n            svg.selectAll(\".num-lines\")\r\n                .data(pairedData)\r\n                .enter()\r\n                .append(\"line\")\r\n                .attr(\"class\", \"num-lines\")\r\n                .attr(\"x1\", d => x(d[0].index))\r\n                .attr(\"x2\", d => x(d[1].index))\r\n                .attr(\"y1\", d => y(d[0].NumLines))\r\n                .attr(\"y2\", d => y(d[1].NumLines))\r\n                .style(\"fill\", \"none\")\r\n                .style(\"stroke\", d => d[0].Season === +series ? seriesColour : chroma(seriesColour).brighten().alpha(0.5).hex())\r\n                .style(\"stroke-width\", 2);\r\n\r\n            // add dots\r\n            svg.selectAll(\".num-lines-dots\")\r\n                .data(data)\r\n                .enter()\r\n                .append(\"circle\")\r\n                .attr(\"cx\", d => x(d.index))\r\n                .attr(\"cy\", d => y(d.NumLines))\r\n                .attr(\"r\", 5)\r\n                .style(\"stroke\", \"none\")\r\n                .style(\"fill\", d => d.Season === +series ? seriesColour : chroma(seriesColour).brighten().alpha(0.5).hex())\r\n                .on(\"mouseover\", mouseover)\r\n                .on(\"mouseout\", mouseout);\r\n        }\r\n\r\n        // effect cleanup function\r\n        return () => {\r\n            // clean up svg when unmounting\r\n            svg.selectAll(\"*\").remove();\r\n        }\r\n    }, [data, series]);\r\n    \r\n    return (\r\n        <>\r\n            <svg ref={chart}></svg>\r\n            <div className=\"lines-tooltip\">\r\n                <p className=\"lines-tooltip-text\"></p>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Lines;","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\nimport chroma from \"chroma-js\";\r\nimport ReferenceData from \"../../reference/ReferenceData\";\r\nimport \"./Swears.css\";\r\n\r\nfunction Swears() {\r\n    const chart = useRef(null);\r\n    const { series } = useParams();\r\n    const [data, setData] = useState(null);\r\n    const schema = (d) => {\r\n        return {\r\n            index: +d.index,\r\n            Season: +d.Season,\r\n            Episode: +d.Episode,\r\n            NumSwears: +d.NumSwears\r\n        }\r\n    };\r\n\r\n    // fetch data hook\r\n    useEffect(() => {\r\n        async function fetchSwearData(url) {\r\n            d3.csv(url, schema).then(data => setData(data));\r\n        }\r\n        fetchSwearData(`${process.env.PUBLIC_URL}/data/stats/swears.csv`);\r\n    }, []);\r\n\r\n    // initialise chart hook\r\n    useEffect(() => {\r\n        const referenceData = new ReferenceData();\r\n        const episodeTitles = Object.values(referenceData.episodeTitles).flatMap(x => x);\r\n        const seriesColour = referenceData.seriesColours[series - 1];\r\n\r\n        const margin = {\r\n            top: 100,\r\n            right: 20,\r\n            bottom: 150, \r\n            left: 100\r\n        };\r\n        const height = 900 - margin.top - margin.bottom;\r\n        const width = 1300 - margin.left - margin.right;\r\n        const svg = d3.select(chart.current)\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", height + margin.top + margin.bottom)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        if(data) {\r\n            const x = d3.scaleBand()\r\n                .domain(data.map(d => d.index))\r\n                .range([0, width])\r\n                .paddingInner(0.2);\r\n\r\n            // round max up to nearest 5\r\n            const y = d3.scaleLinear()\r\n                .domain([0, Math.ceil(d3.max(data, d => d.NumSwears) / 5) * 5])\r\n                .range([height, 0]);\r\n\r\n            // draw axes\r\n            const xAxisDraw = d3.axisBottom(x)\r\n                .tickFormat((d, i) => episodeTitles[i]);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"swears-xaxis\")\r\n                .attr(\"transform\", `translate(0, ${height})`)\r\n                .call(xAxisDraw)\r\n                .call(g => g.select(\".domain\").remove())\r\n                .selectAll(\"text\")\r\n                    .attr(\"y\", 0)\r\n                    .attr(\"x\", 9)\r\n                    .attr(\"dy\", \".35em\")\r\n                    .attr(\"transform\", \"rotate(90)\")\r\n                    .style(\"text-anchor\", \"start\");\r\n\r\n            const yAxisDraw = d3.axisLeft(y)\r\n                .tickPadding(20)\r\n                .tickSize(-width);\r\n\r\n            // mouse handlers\r\n            const mouseover = (event, data) => {\r\n                const tip = d3.select(\".swears-tooltip\");\r\n                const episodeTitle = referenceData.episodeTitles[data.Season][data.Episode - 1];\r\n                const seriesColour = referenceData.seriesColours[data.Season - 1];\r\n                const tooltipHtml = `<p style=\"border-bottom: 3px solid ${seriesColour}\">${episodeTitle}</p>\r\n                    <small>Series ${data.Season}, Episode ${data.Episode}</small>\r\n                    <p>${data.NumSwears} swears</p>`;\r\n\r\n                tip.style(\"left\", `${event.clientX + 20}px`)\r\n                    .style(\"top\", `${event.clientY}px`)\r\n                    .transition()\r\n                    .style(\"opacity\", 0.9);\r\n\r\n                tip.select(\".swears-tooltip-text\").html(tooltipHtml);\r\n            };\r\n\r\n            const mousemove = (event, data) => {\r\n                d3.select(\".tooltip\")\r\n                    .style(\"left\", `${event.clientX + 20}px`)\r\n                    .style(\"top\", `${event.clientY}px`);\r\n            };\r\n\r\n            const mouseout = (event, data) => {\r\n                d3.select(\".swears-tooltip\")\r\n                    .transition()\r\n                    .style(\"opacity\", 0);\r\n            };\r\n\r\n\r\n            // draw bars\r\n            svg.selectAll(\".swear-bar\")\r\n                .data(data, d => d.index)\r\n                .enter()\r\n                .append(\"rect\")\r\n                .attr(\"class\", \"swear-bar\")\r\n                .attr(\"x\", d => x(d.index))\r\n                .attr(\"y\", d => y(0))\r\n                .attr(\"width\", x.bandwidth())\r\n                .attr(\"height\", 0)\r\n                .on(\"mouseover\", mouseover)\r\n                .on(\"mousemove\", mousemove)\r\n                .on(\"mouseout\", mouseout)\r\n                .transition()\r\n                .delay((d, i) => i * 20)\r\n                .attr(\"y\", d => y(d.NumSwears))\r\n                .attr(\"height\", d => height - y(d.NumSwears))\r\n                .style(\"fill\", d => d.Season === +series ? seriesColour : chroma(seriesColour).brighten().alpha(0.5).hex());\r\n\r\n            // draw y axis on top of bars\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"swears-yaxis\")\r\n                .call(yAxisDraw)\r\n                .call(g => g.select(\".domain\").remove());\r\n        }\r\n\r\n        // effect cleanup function\r\n        return () => {\r\n            // clean up svg when unmounting\r\n            svg.selectAll(\"*\").remove();\r\n        }\r\n    }, [data, series]);\r\n    \r\n    return (\r\n        <>\r\n            <svg ref={chart}></svg>\r\n            <div className=\"swears-tooltip\">\r\n                <p className=\"swears-tooltip-text\"></p>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Swears;","import React, { useEffect, useState } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nfunction SentenceAnnotation(props) {\r\n    const { annotation } = props;\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n    const playAudio = () => {\r\n        const audioElement = new Audio(`${process.env.PUBLIC_URL}/audio/${annotation.audio}`);\r\n\r\n        audioElement.addEventListener('loadeddata', () => {\r\n            // get existing width of sentence bar\r\n            const width = d3.select(`#sentence-${annotation.index}`).node().getBoundingClientRect().width;\r\n            // revert width to zero\r\n            d3.select(`#sentence-${annotation.index}`)\r\n                .attr(\"width\", 0);\r\n\r\n            audioElement.play();\r\n            setIsPlaying(true);\r\n\r\n            const intervalId = setInterval(function () {\r\n                const percent = audioElement.currentTime / audioElement.duration * 100;\r\n                const delta = audioElement.currentTime / audioElement.duration * width;\r\n\r\n                // grow sentence bar width as audio plays\r\n                d3.select(`#sentence-${annotation.index}`)\r\n                    .attr(\"width\", delta);\r\n\r\n                // linear gradient progress bar on text\r\n                // switch bg colour depending on internal/external line\r\n                if(annotation.internal) {\r\n                    d3.select(`#sound-clip-${annotation.index}`)\r\n                        .style('background', 'linear-gradient(to right, rgb(255,99,71)' + ' ' + percent + '%,' + 'rgba(255,99,71,0.5)' + ' ' + (percent + 0.5) + '%)');\r\n                } else {\r\n                    d3.select(`#sound-clip-${annotation.index}`)\r\n                        .style('background', 'linear-gradient(to right, rgb(30,144,255)' + ' ' + percent + '%,' + 'rgba(30,144,255,0.5)' + ' ' + (percent + 0.5) + '%)');\r\n                }\r\n                \r\n                if (audioElement.currentTime === audioElement.duration) {\r\n                    clearInterval(intervalId);\r\n                    setIsPlaying(false);\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <p>{annotation.annotation}</p>\r\n\r\n            <p>\r\n                <span className={`sound-clip ${annotation.internal ? \"internal\" : \"external\"}`} id={`sound-clip-${annotation.index}`}>\r\n                    <span className=\"sound-clip-control\" onClick={playAudio}>\r\n                        { isPlaying ? \"  \" : \"  \" }\r\n                    </span>{annotation.line}\r\n                </span>\r\n            </p>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default SentenceAnnotation;\r\n","const SentenceAnnotations = function() {\r\n\r\n    this.sentenceAnnotations = [\r\n        // index 0 = average sentence length annotations\r\n        // index 1 = internal vs external ratio annotations\r\n        // index 2 = top noun annotations\r\n        [\r\n            \"So for example, Mark's average sentence length was 6 words during the first episode and likewise for Jez. In fact this holds pretty much throughout except for episodes 4 and 5 where Mark's average drops to 5. So much for him being the more learned of the two.\",\r\n            \"We see for the very first episode Mark nearly had a 50/50 split internal vs external but this tapered off during the series. In contrast Jez started with very few internal lines, but this increased as the series progressed.\",\r\n            \"Cancer is mentioned a lot during episode 1 as an argument ensues over the doctor's name for Toni's sister. You can see which episode Johnson makes his grand first appearance and in the final episode we see a lot of soul searching going on as Jez contemplates his own existence after Uncle Ray passes away.\"\r\n        ],\r\n        [\r\n            \"So for example, Mark's average sentence length was 6 words during the first episode but only 5 for Jez.\",\r\n            \"This is the series where Jez has the least amount of internal thoughts compared to other series. This is particularly evident in episodes 2, 4, 5 and 6.\",\r\n            \"This is the series in which Nancy is introduced for the first time and we can see from Jez's words how much he talks about her. Daryl the racist is prominent in Mark's words from episode 2. This is the same episode where Jez is trying to do the track for Gog's film. Jeff appears at the top of Mark's words on two occasions as he begins to plot his way into breaking up his and Soph's relationship. Jeff also appears in Jez's top words from episode 5 as they form a brief friendship. Student is mentioned by Mark and Jez in episode 4 as they both venture off to Darty, Jez to play a gig (not like Bez) and Mark to stalk April from the shoe shop.\",\r\n        ],\r\n        [\r\n            \"So for example, Mark's average sentence length was 8 words during the first episode and 7 for Jez. This series shows a big increase in average sentence lengths compared with the first two series. It even goes up to 9 words per sentence for Mark during the final episode as he grapples with the prospect of proposing to Soph.\",\r\n            \"We see that Mark continues to have the more internal lines compared to Jez, although Jez has more this series than in series 2 despite the lack of internal thoughts in episode 2. This is probably because of his constant bickering with Super Hans over the name of the pub...\",\r\n            \"This is the series where we meet Big Suze for the first time. You can see from Jez's top words how besotted he his with her. Mark also mentions her a lot in episode 4 when they spend time together. Mark's words in episode 1 reflect his mildly harrowing experience at the hands of the muggers. Merry is mentioned a lot by both in episode 2 as they prove no help at all with her spiralling mental state. Illness is a theme in episode 3 as Jez locks the sick man of Europe in his room so as not to dampen his mushroom party. There's a legal theme for Jez in episode 5 for obvious reasons and Mark frets about the hotel in the Quantocks in the final episode as this is where he pops the question to Soph, albeit inadvertently.\"\r\n        ],\r\n        [\r\n            \"So for example, Mark's average sentence length was 8 words during the first episode but only 6 for Jez. Mark also has a higher average for episodes 2 and 3 but for the rest of the series both characters are tied with an average of 7.\",\r\n            \"As usual, Mark has the more internal lines than Jez although during episode 6, \\\"The Wedding\\\", they both have fewer internal lines. This is surprising as usually the more stressful the situation is, the more \\\"internal thoughts\\\" the characters have as they fret over the situation. Perhaps because Mark and Jez are together the whole time meant they were sounding off each other as opposed to internalising their neuroses.\",\r\n            \"Jez has some strange words. We see \\\"Finger\\\" and \\\"Blair\\\" in episode 1 as Sophie's Mum tempts him with some \\\"Blair resignation jam\\\". Russell, episode 4, is Russell \\\"The Orgazoid\\\", one of the most brilliant techno pioneers of all time who Jez gives a \\\"hand\\\" to from time to time. \\\"Dog\\\", \\\"Turkey\\\" and \\\"Mummy\\\" in episode 5 reflect the horror that is Jez killing, attempting to dispose of, barbecuing and finally eating, a dog. The less said about \\\"Melon\\\" in episode 6 the better. Mark's words are a bit more conventional. We see him struggling with Project Zeus during episode 2, Johnson's unworkable plan where Marketing becomes an arm of Sales which Mark has to pitch to the JLB board. Episode 3 is where Mark joins a gym. \\\"Foz\\\" in episode 4 is the dickhead who used to bully Mark at school.\"\r\n        ],\r\n        [\r\n            \"So for example, Mark's average sentence length was 6 words during the first episode but only 5 for Jez. In fact Jez never has longer sentences than Mark throughout the series. The longest average is Mark's during episode 3, this could be due to him attempting to turn on the charm during his disastrous speed dating encounter.\",\r\n            \"Again we see Mark having the more internal lines than Jez. Jez starts with very few but it does increase slightly as the series progresses. Mark actually has closer to a 50/50 split compared to previous series as he grapples with finding \\\"the one\\\", how to defeat Sophie in the post-jilting spin war, controlling Jeremy's finances, trying to ignore crystal skulls and contemplating becoming a father.\",\r\n            \"\\\"Date\\\" is mentioned by both during episode 1 as they venture on a double date to get Mark back in the game. The presence of the word \\\"Police\\\" indicates how that went. We see Mark mention Dobby in episode 2 as this is the series we meet her for the first time. \\\"Elgar\\\" refers to the composer Edward Elgar. Not that Jez turns to classical music, he's simply broke and Elgar appears on the back of a 20 note. \\\"Gun\\\" is mentioned by both in episode 4 as they find Jez's great-aunt's revolver which they christen \\\"gunny\\\". Finally, \\\"Orgones\\\" in the final episode refers to Jez joining a cult which according to them are the \\\"invisible molecules of universal life energy which govern our moods and our actions\\\".\"\r\n        ],\r\n        [\r\n            \"So for example, Mark's average sentence length was 8 words during the first episode and 7 for Jez. Episode 4 is one of the very few times Jez beats Mark. Probably because Jez has to improvise as he lies to Gail about seeing Elena behind her back.\",\r\n            \"As per previous series, Mark has more internal lines than Jez. Jez has very few internal lines during the first episode, probably because he's too busy bemoaning the loss of employment at JLB after his half a day's service to anyone that will listen.\",\r\n            \"We can see \\\"Baby\\\" mentioned a lot, by both characters, as the mystery over who the dad concludes. Episode 1 is where JLB closes which we can see is Mark's top word. \\\"Dobby\\\" is mentioned a lot by Mark as he tries to win her over. Jeremy mentions Elena and Gail a lot as his dirty love triangle develops. We can see Mark's history walk career move from episode 3 as he tries to avoid taking the loss-adjusters job and we can see a party theme from the words in episode 5.\",\r\n        ],\r\n        [\r\n            \"So for example, Mark's average sentence length was 8 words during the first episode and 7 for Jez. Mark beats or equals Jez's average in each episode with 8 being the highest in both episodes 1 and 5 as he tries to converse with the hospital staff and his overbearing father.\",\r\n            \"Mark edges the amount of internal lines compared to Jez, but Jez does have more than previous series (in fact this is one of the very few series which has episodes in which Jez has more lines than Mark, see episodes 3 and 4). Episode 4 reduces his ratio a lot but this is the same for Mark as well. I guess being stuck in the \\\"Nether Zone\\\" together limits the internal thoughts each had, taking out their frustration on each other instead.\",\r\n            \"We can see Mark's top words are baby themed as this is the series his son is born. He also talks about Dobby a lot as the battle for leader of Dobby club with Gerrard heats up. \\\"Book\\\" is the top word of both characters in episode 3 as Jez tries to read a \\\"relatively short book\\\" to impress Zahra's book group which Mark ends up reading for him. \\\"Kenneth\\\" may seem an odd word, bonus points if you remember what that refers to, I'd rather not say. \\\"Ben\\\" dominates Jez's top words as he obsesses over getting rid of him to be with Zahra. \\\"Suit\\\" is mentioned a fair bit in episode 2 as he tries to get Super Hans' band to perform in Zoot suits as a deal breaker to sign them to Ben's label. The top words are rounded off with Christmas and \\\"Party\\\" type words as the series ends with Christmas dinner and a failure to party hard on New Year's Eve.\",\r\n        ],\r\n        [\r\n            \"So for example, Mark's average sentence length was 7 words during the first episode and 6 for Jez. As in previous series, Mark always equals or beats Jez's average, he's particularly wordy in episode 2 which is appropriate considering he's launching his new book.\",\r\n            \"Jez really competes with Mark in this series for internal lines. In the final episodes he's almost equal as he agonises over the decision to come clean about his love for Dobby. Episode 3 is surprising in that Mark nearly has a 50/50 split internal to external what with fretting over Dobby moving in and trying to avoid being hit by \\\"The Snitch\\\" during paintballing.\",\r\n            \"We see \\\"Interview\\\", and \\\"Gerrard\\\" are popular for Mark in the first episode as he juggles attending an interview at Baths, Bathrooms and Fittings and delivering the eulogy at Gerrard's funeral. \\\"Book\\\" is the third most popular in the second episode as Mark takes the literary world by storm with the release of Business Secrets of the Pharaohs. Episode 3's words look odd at first glance until you remember this is the episode with the famous band name game. We can see \\\"Committee\\\" in episode 5 as Mark \\\"The Honourable Man\\\" launches a putsch to take over as chairman of the housing committee. Finally we see \\\"York\\\" in the final episode which refers to Dobby's impending move to New York. Jez's words are dominated by his career move into life coaching and in the later episodes we can see \\\"Dobby\\\" appearing as he falls in love with her and frets over whether to come clean to Mark.\",\r\n        ],\r\n        [\r\n            \"So for example, Mark's average sentence length was 6 words during the first episode and 7 for Jez. In fact this is the only series where Jez has an equal or higher average than Mark. Maybe this is due to him grappling with the prospect of middle age whilst trying to maintain a love triangle.\",\r\n            \"The final series is no different in that Mark has more internal lines than Jez. Jez's internal thoughts diminish quite a lot towards the end of the series. Maybe this marks the end of Jez's youth and he begins middle age and leaves his partying life behind.\",\r\n            \"You'll notice \\\"Jerry\\\" mentioned by both characters during the first episode. This isn't a typo for Jeremy, it is Mark's new cultured flatmate who Jez tries to get kicked out. \\\"Joe\\\" is one of Jez's top words throughout the series as he begins a relationship with both him and his girlfriend Megan. \\\"Bank\\\" is mentioned by both at points in the series as Mark begins his new job and Jez becomes an accomplice in robbing it. \\\"Dobby\\\" reappears just for the second episode but Mark finally moves on to his old crush, April. There's just the small problem of her being married, see \\\"Angus\\\" in episode 4.\",\r\n        ],\r\n    ];\r\n\r\n    this.audioAnnotations = [\r\n        {\r\n            series: \"1\",\r\n            index: 546,\r\n            internal: true,\r\n            audio: \"sophie.mp3\",\r\n            annotation: \"Let's zoom in on some memorable lines from the series. Here Mark takes the unorthodox historical approach to love:\",\r\n            line: \"Yes, that's the way. Sophie's the one. Toni's Russia - vast, mysterious, unconquerable. Sophie's Poland - manageable, won't put up too much of a fight.\",\r\n        },\r\n        {\r\n            series: \"1\",\r\n            index: 604,\r\n            internal: false,\r\n            audio: \"voicemail.mp3\",\r\n            annotation: \"The chart really accentuates the longer lines, be it a prolonged internal monolgue or external rant. Here is the excruciating message left by Mark on Sophie's voicemail:\",\r\n            line: \"Uh, Sophie. If you heard that, please ignore it, I'm not a racist. Far from it. Anyway uh it's good to hear your voice. I know it's only a recording but you have got a bloody nice voice and... God, I just called up to say hi and then, then I go and spoil it all by saying something stupid like I like you. I mean, not that. But anyway I noticed that the paper in the photocopier is running a bit low so I know it's not really your job but uh well you know, so, uh see you tomorrow.\",\r\n        },\r\n        {\r\n            series: \"1\",\r\n            index: 162,\r\n            internal: false,\r\n            audio: \"tins.mp3\",\r\n            annotation: \"Jez makes his thoughts on tinned food abundantly clear:\",\r\n            line: \"You realize tinned food is just for crackheads and wars.\",\r\n        },\r\n        {\r\n            series: \"1\",\r\n            index: 228,\r\n            internal: true,\r\n            audio: \"drugs.mp3\",\r\n            annotation: \"Jez struggles to recover from a drugs binge the night before. What was the bad thing?\",\r\n            line: \"Oh, I feel like loam, a piece of loam. Jesus, what am I talking about? I wish Mark was here. No more drugs. I don't need drugs. I mean what great music was ever made on drugs? Bowie, obviously, The Floyd, The Prodge, Aphex - the list is endless really, but they could have done it twice as fast with half the mess if they just... Ahh, was that the bad thing?\",\r\n        },\r\n        {\r\n            series: \"1\",\r\n            index: 236,\r\n            internal: false,\r\n            audio: \"ira.mp3\",\r\n            annotation: \"Here's Jez trying, and failing, to join in with a political debate between Mark and Johnson:\",\r\n            line: \"What I mean is that they should be more honest. I mean, at least Tony Adams from the IRA, he's like \\\"Yeah, I shoot people. I like shooting people.\\\" You know, if they were more honest, then maybe people would vote and not switch straight over when the news comes on.\",\r\n        },\r\n        {\r\n            series: \"1\",\r\n            index: 838,\r\n            internal: true,\r\n            audio: \"gay.mp3\",\r\n            annotation: \"Noticeable are the episodes with more shorter bars because of an extra long outlier. Here Mark performs an experiment to see if he really does fancy Johnson:\",\r\n            line: \"Good old unfriendly Mr Patel. Never says a word... whether you're buying cornflakes, fabric softener, or gay porn. So here we go, watch without prejudice. I'm just testing the water. I'm a sexual scientist. So OK, I'm keeping in trim. This is fine. Typical evening in, Johnson's doing the spreadsheet. There's nothing to be afraid of. It was very popular with the Romans and they got a lot done. How's it going Johnson? Haha, so quick. Yeah, some good kissing. Maybe I'm just bi-curious? What if that actually was Johnson, would that make me hotter? What about if he had Sophie's face? Or Sophie's body with Johnson's face. Mum, dad, I'm bi-curious. Yeah right, the bum. Nothing wrong with the bum. Ah! That's a little too rich for me! I just don't know!\",\r\n        },\r\n        {\r\n            series: \"1\",\r\n            index: 398,\r\n            internal: false,\r\n            audio: \"enya.mp3\",\r\n            annotation: \"Same goes for Jez in episode 6. This is because of his \\\"Enya\\\" speech during Uncle Ray's funeral:\",\r\n            line: \"Look, what I'm trying to say is that, if I was dying, and I decided that even though I'd never particularly been into, say uh... Enya before, but that now I really, really was into Enya and that in fact I thought Enya was great, and that Enya died for our sins and I wanted an Enya-themed funeral with pictures of Enya and lots and lots of mentions of... Enya, then I think it would be a bit bloody rich for my sister to ban all mention of Enya from my funeral.\",\r\n        },\r\n        {\r\n            series: \"2\",\r\n            index: 478,\r\n            internal: true,\r\n            audio: \"kalashnikov.mp3\",\r\n            annotation: \"Let's zoom in on some of the more memorable lines from the series. Here Mark wonders if he's the type of person to go on a mass shooting spree:\",\r\n            line: \"Yeah, you won't be so cocky, Jeff, when I come into the office with a Kalashnikov and two hundred rounds of ammunition. I'm probably exactly the sort of person who could end up doing something like that.\",\r\n        },\r\n        {\r\n            series: \"2\",\r\n            index: 511,\r\n            internal: true,\r\n            audio: \"freak.mp3\",\r\n            annotation: \"Here's where Mark tries to let it all out at Rainbow Rhythms:\",\r\n            line: \"Yeah, sure, honey. Appear to be opening the box while in fact, the lid stays very firmly on. She's buying it! God, it's so easy being a freak, no wonder they're ten a penny. I should get extra marks for not feeling a fucking thing.\",\r\n        },\r\n        {\r\n            series: \"2\",\r\n            index: 150,\r\n            internal: false,\r\n            audio: \"democracy.mp3\",\r\n            annotation: \"Jez tries to convince Mark to let Daryl the racist play music for his upcoming video:\",\r\n            line: \"It is kind of the same. I mean, aren't we supposed to be living in a multicultural democracy? And isn't that the point? You know, the Jews and the Muslims and the racists all living happily together, side by side, doing and saying whatever the hell they like?\",\r\n        },\r\n        {\r\n            series: \"2\",\r\n            index: 654,\r\n            internal: false,\r\n            audio: \"daryl.mp3\",\r\n            annotation: \"Mark educates Daryl the racist about political correctness:\",\r\n            line: \"No! I hate political correctness gone mad more than anyone! I don't want to teach the world to sing, that would be horrible, but slavery? The Holocaust? That's just not on! Whereas, \\\"I Have A Dream\\\", South Africa, Benetton, it's- you've got to say, fair enough. Yeah?\",\r\n        },\r\n        {\r\n            series: \"2\",\r\n            index: 314,\r\n            internal: false,\r\n            audio: \"revels.mp3\",\r\n            annotation: \"Jez blows the lid on Mark's lie about being a mature student:\",\r\n            line: \"He's not a mature student. He's been a loan manager for the last five years. He lives with me and he eats ready meals, and we play \\\"Guess the Revels\\\" and we watch Men In Black in front of our massive telly and we have a fucking good time.\",\r\n        },\r\n        {\r\n            series: \"2\",\r\n            index: 883,\r\n            internal: true,\r\n            audio: \"doomed.mp3\",\r\n            annotation: \"Mark tries to get to grips with lad culture to try and fit in with Jeff as part of his plan to win Sophie back:\",\r\n            line: \"OK, going undercover. Jeff's apparent mate, who couldn't possibly be trying to nick his bird from right under his stupid old fashioned nose. Mmm, OK, man-chat topics. Footballer Darren Anderton, figure of ridicule due to repeated injuries. Turkish shepherd, ate his own testicles. NB, ignore tragic earthquake context. Ferrari Testarossa, fast car. Obviously, no need to note that. Shit, I'm making too many notes! Just imbibe the culture. Um, yes. Civilisation is definitely doomed.\",\r\n        },\r\n        {\r\n            series: \"2\",\r\n            index: 351,\r\n            internal: false,\r\n            audio: \"geezer.mp3\",\r\n            annotation: \"Unlike Mark's attempt to imbibe lad culture, Jez has no such problems, in fact, he's probably been spending too much time with Jeff:\",\r\n            line: \"So, I was gonna twat this geezer. Then it turns out they're both Polish!\",\r\n        },\r\n        {\r\n            series: \"2\",\r\n            index: 980,\r\n            internal: true,\r\n            audio: \"condoms.mp3\",\r\n            annotation: \"After Mark's plan to spend more time with Sophie fails he ends up in the ridiculous situation of having to buy condoms for Jeff:\",\r\n            line: \"This is it. This is my lowest ever. Wish I told him to fuck off. Except then, I'd never be allowed back. OK, right. Fetherlite. Don't want him to enjoy it any more than is strictly necessary. Ultra Strong. Yeah, he won't feel a thing. But then, maybe he'll last longer and- oh Jesus! This is a minefield! Serve him right if I prick them all with pins and then... Sophie got pregnant, and therefore, he ended up getting married? Got to think through these plans more! I'll just go for these. Coloured. Least that'll make him look faintly ridiculous. Heh, I win! In the most minor way possible.\",\r\n        },\r\n        {\r\n            series: \"2\",\r\n            index: 1073,\r\n            internal: false,\r\n            audio: \"speech.mp3\",\r\n            annotation: \"Mark's speech at Jez and Nancy's impromptu visa wedding:\",\r\n            line: \"So, ladies and gentlemen. You'll forgive me, I haven't prepared a proper speech, but then perhaps that's appropriate, since this isn't a proper wedding. Or so the cynics may say. But I say to those cynics, listen, cynics, this is the modern world, and just because it's new and strange and unnerving doesn't mean it's not brilliant. In Ancient Rome, they had Cupid. In modern days, it's the Home Office. Love is blind. That's not a joke about David Blunkett. No, seriously, I would never make that joke.\",\r\n        },\r\n        {\r\n            series: \"3\",\r\n            index: 1044,\r\n            internal: false,\r\n            audio: \"systems.mp3\",\r\n            annotation: \"Mark puts the slackers in their place in one of the best political lines in comedy history outside of The Thick of It:\",\r\n            line: \"Listen, while we're at it, there are systems for a reason in this world. Economic stability, interest rates, growth. It's not all a conspiracy to keep you in little boxes. All right? It's only the miracle of consumer capitalism that means you're not lying in your own shit, dying at forty-three with rotten teeth, and a little pill with a chicken on it is not going to change that. Now come on. Fuck off!\",\r\n        },\r\n        {\r\n            series: \"3\",\r\n            index: 364,\r\n            internal: false,\r\n            audio: \"frosties.mp3\",\r\n            annotation: \"Jez opines that Frosties are an acceptable breakfast cereal despite Mark's statement to the contrary:\",\r\n            line: \"Oh right. What should I be having? Gentleman's relish with olives? Anyway, Crunchy Nut Corn Flakes are just Frosties for wankers.\",\r\n        },\r\n        {\r\n            series: \"3\",\r\n            index: 942,\r\n            internal: false,\r\n            audio: \"reality.mp3\",\r\n            annotation: \"But Mark has the final word on the matter:\",\r\n            line: \"Yeah well, Frosties are just Corn Flakes for people who can't face reality.\",\r\n        },\r\n        {\r\n            series: \"3\",\r\n            index: 867,\r\n            internal: true,\r\n            audio: \"porn.mp3\",\r\n            annotation: \"Mark nearly gets caught by Big Suze researching nudey ladies on the internet:\",\r\n            line: \"This is fine, there's nothing to be embarrassed about nowadays, looking at porn's just like lying to Parliament. It used to be wrong but now it's just a great big funny joke.\",\r\n        },\r\n        {\r\n            series: \"3\",\r\n            index: 444,\r\n            internal: false,\r\n            audio: \"jury.mp3\",\r\n            annotation: \"Jez auditions for the modern remake of 12 Angry Men:\",\r\n            line: \"OK, sure. If you want. Say it's a mistrial, go crying to Daddy. But look, maybe I didn't play by the rules this time. Maybe I am a bit of a maverick, but I think I've got this case pretty much solved. And, yes, I can apologise for how I've done that, but I could never apologise for telling the truth. And the truth is that this woman is evil! And if we let her go today, we are going to be responsible for whatever she does, so help me God, and let the Lord be my witness!\",\r\n        },\r\n        {\r\n            series: \"3\",\r\n            index: 895,\r\n            internal: true,\r\n            audio: \"jogger.mp3\",\r\n            annotation: \"Mark finds jogging is the sport for him only to realise actually, it isn't, all within 10 or 11 seconds:\",\r\n            line: \"Oh yeah, I'm ready. Ready to watch your lovely bottom before I have a heart attack. Hey, wow, I'm actually good at this. Maybe I'm a natural. Yeah, I'm a jogger. Of course, there had to be a sport for me. I just never realised. I'm a natural jogger. Feel the legs like two great steam locomotives pumping away. I'm Cram, I'm Ovett, I'm unstoppable. I'm- Jesus, is that a stitch? I- fuck, I think I'm gonna be sick. I've gotta... slow. I need to... walk. Oh, I think I'm gonna puke. I'm literally gonna die. What an idiotic boob I was about ten or eleven seconds ago.\",\r\n        },\r\n        {\r\n            series: \"3\",\r\n            index: 828,\r\n            internal: true,\r\n            audio: \"crapped.mp3\",\r\n            annotation: \"A feverish Mark, after being locked in his room by Jez to prevent him spoiling his mushroom party, contemplates doing his business in a takeaway bag:\",\r\n            line: \"Oh, God. Can I do this? If I do this, even if I end up marrying Sophie and we live in a detached house in Surrey, and buy a holiday home in Umbria, our children will always look up at the face of a man who once crapped in a takeaway bag. Plus, I'd have to hide it here somewhere in my room next to one of my... things. I could throw it out the window. No, that's what they want you to do. That's where society's headed! People shitting in bags and throwing them out the window at each other. Well, I'm not going to be the first! Not in my name!\",\r\n        },\r\n        {\r\n            series: \"3\",\r\n            index: 777,\r\n            internal: true,\r\n            audio: \"carpenter.mp3\",\r\n            annotation: \"Mark proves that he knows nothing at all about the working class:\",\r\n            line: \"What the hell is he laughing with the carpenter about? You have to maintain the barrier, or they'll re-tune your radio to a commercial station, and force you to borrow their pornography.\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 628,\r\n            internal: false,\r\n            audio: \"tyrants.mp3\",\r\n            annotation: \"Let's look at some of the more memorable lines from the series. Here Mark tries to quash his doubts about the wedding even after Sophie tries to buy him a Chairman Mao t-shirt:\",\r\n            line: \"Look, I know I might have mentioned some doubts, but that was pub talk. You can't bring up pub talk in the cold light of day. You know how I get after the pub, like when I ordered the Abdominizer. Besides, she's good for me, Jez, she's dragging me into the 21st century, with its meaningless logos and ironic veneration of tyrants. It's all good, my friend. It's all good.\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 680,\r\n            internal: false,\r\n            audio: \"diana.mp3\",\r\n            annotation: \"But he ultimately fails and the doubts turn to a sort of resignation towards a loveless marriage:\",\r\n            line: \"I don't know, maybe. I mean, she's so nice. So what if I don't really love her. Charles didn't really love Diana and they were all right. Sort of.\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 806,\r\n            internal: false,\r\n            audio: \"prick.mp3\",\r\n            annotation: \"Mark's Project Zeus all-nighter with Gerrard fails to materialise anything of substance:\",\r\n            line: \"Yes, of course. OK, so, final analysis. What have we actually got, what am I gonna present to the board? Not that, that sounded good at 3am when we were high on Diet Coke. That's bullshit. That's just table talk, that's not fit for public consumption. This... is that it? Where's the actual sustenance, where's the beef? Gerrard, we've got... there's... nothing. I've got nothing, I've got fucking nothing here. We haven't got anything. We've spent all night doing nothing, Gerrard, you prick!\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 215,\r\n            internal: false,\r\n            audio: \"sandwiches.mp3\",\r\n            annotation: \"Jez has his first brush with the real world:\",\r\n            line: \"You know, I'm the first white English person on the cleaning staff. I'm getting a whole new view of life, the other side of the potato. They have these sandwiches, but they don't come from shops, they make them themselves.\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 302,\r\n            internal: false,\r\n            audio: \"playstation.mp3\",\r\n            annotation: \"Jez proves his lack of understanding of how the modern economy functions:\",\r\n            line: \"Oh yeah, that's really gonna break his balls if I roll in an hour late. Mark, this is Russell Orgazoid. He's a creative, I'm a creative. We don't make steam engines out of pig iron in this country any more, yeah? We hang out, we fuck around on the PlayStation, we have some Ben and Jerry's. That's how everyone makes their money now, yeah?\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 1028,\r\n            internal: true,\r\n            audio: \"lions.mp3\",\r\n            annotation: \"At the safari park Jez throws Mark to the lions:\",\r\n            line: \"Christ, what do you do to avoid lion attack? Soil yourself? Or is that grizzly bears? Hate to shit myself for no reason and get eaten. The final humiliation.\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 1133,\r\n            internal: false,\r\n            audio: \"bishop.mp3\",\r\n            annotation: \"Mark prefers an evening of culture rather than Jez's debauchery:\",\r\n            line: \"I don't want sweet punani action. I wanna take your bishop and grind you down.\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 434,\r\n            internal: true,\r\n            audio: \"dog.mp3\",\r\n            annotation: \"Jez does his bit for Greenpeace, but not, sadly, for the RSPCA:\",\r\n            line: \"Oh yeah, pissed and stoned in a gas-guzzler. This is the life. Already given a quid to Greenpeace this year, so I'm golden. Not the dog, not the dog. Shit, the dog!\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 458,\r\n            internal: false,\r\n            audio: \"laid.mp3\",\r\n            annotation: \"Jez really needs to get his priorities straight:\",\r\n            line: \"Mark, if I can just get rid of the dog corpse, there's a chance I still might get laid, here.\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 1213,\r\n            internal: false,\r\n            audio: \"hole.mp3\",\r\n            annotation: \"Mark, quite rightly, refuses to get involved:\",\r\n            line: \"Jeremy, there are many things I would do to help you, but digging a hole in the wintry earth with my bare hands so that you can bury the corpse of a dog you killed, is not one of them.\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 1227,\r\n            internal: true,\r\n            audio: \"wedding.mp3\",\r\n            annotation: \"Mark gets the wedding jitters and a comatose Super Hans in his hallway doesn't help:\",\r\n            line: \"OK, here we go, wedding day. I am heading for a wedding. How do I feel? Empty? Check. Scared? Check. Alone? Check. Just another ordinary day. Ha ha. Very funny. Oh, great, I didn't expect a freshly ironed shirt, but him?\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 1274,\r\n            internal: true,\r\n            audio: \"kidney.mp3\",\r\n            annotation: \"Mark resorts to physical harm to try and get out of the marriage:\",\r\n            line: \"God, what's happening to me? Am I really gonna get married? Don't want to, but calling off the wedding at the last minute? Don't want to hurt lovely Sophie. Need time to think. How can I buy some time? Contract TB? But where from? No badgers. Try to get beaten up? I could say, he's got a fat head. Call him a jizz-cock? Not actually an insult, all cocks are jizz-cocks really. Be like calling him a piss-kidney. Road traffic accident? Yeah, that'd kick everything into touch for a few months. Shit, could I? Here it comes. Come on, Mark, take the hit. Keep your eyes on the prize.\",\r\n        },\r\n        {\r\n            series: \"4\",\r\n            index: 592,\r\n            internal: false,\r\n            audio: \"piss.mp3\",\r\n            annotation: \"Finally, no analysis of this series would be complete without Jez's failure to reach a toilet:\",\r\n            line: \"Yes, I'm doing it already. I'm so pathetic that as soon as you ordered me to piss myself, I started the procedure. This is what you've done. You've ground down my sense of self-worth over the years. I hope you're proud.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 490,\r\n            internal: true,\r\n            audio: \"champagne.mp3\",\r\n            annotation: \"Let's look at some of the more memorable lines from the series. In fact this is the very first line, talk about setting the tone for the series:\",\r\n            line: \"So unhappy. I wonder if anyone has ever been this unhappy while drinking champagne?\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 30,\r\n            internal: false,\r\n            audio: \"shit.mp3\",\r\n            annotation: \"Jez manages to escape the boring play, presumably to go home and watch Heat on DVD, and generously donates his ticket so somebody else can share his pain:\",\r\n            line: \"Here you go mate. Go and see the second half. It's shit.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 587,\r\n            internal: true,\r\n            audio: \"nazi.mp3\",\r\n            annotation: \"As usual, Mark ends up with the bad side of the bargain compared to Jez after their double date:\",\r\n            line: \"Great, it's me protecting civilisation again while Jeremy has sex. If this was the war, I'd be getting shot by Rommel while he was in Paris getting a blowjob from a Nazi.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 636,\r\n            internal: true,\r\n            audio: \"spin.mp3\",\r\n            annotation: \"Mark loses the first battle of the spin war with Sophie:\",\r\n            line: \"OK, grab your nuts Corrigan, first contact. There she is, Sophie. Should I go over, forget the spin war? Apologise? Stab myself with a fork? They only have plastic. Oh crying, yes nice. That's going to play very well with the floating voters. Nice tears, Goebbels. Her and her mates will probably start handing out vicious cartoons of me as a rodent in a big top hat and everyone will think it's hilarious until a mob comes round and smashes my shop window. At least I've got off the roast wagon. Oh God, there she goes. This is a public relations nightmare. Where do I sit? This must be what it's like being a nonce in prison.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 685,\r\n            internal: true,\r\n            audio: \"pants.mp3\",\r\n            annotation: \"Mark has the last laugh... sort of:\",\r\n            line: \"Oh yeah, they can laugh, but I win because they think I pissed myself. They've no clue I came all in my pants.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 144,\r\n            internal: true,\r\n            audio: \"vaginas.mp3\",\r\n            annotation: \"Here we get a glimpse into Jez's pre-gig warm up ritual:\",\r\n            line: \"I wonder if the A&R guy's here yet. Which one could he be? Could be him, perfect cover. Or her. Or her. Lot of women here. Hmm, women. There they are, walking around. And they've all got them, under their clothes, hiding there, but I know the secret. Vaginas. She's got one, she's got one, she's got one. She's definitely got one. She's trying to make out she hasn't got one but I know she has. Got to stop thinking about vaginas, it's my big night. Mmm, vaginas.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 739,\r\n            internal: true,\r\n            audio: \"chad.mp3\",\r\n            annotation: \"Mark objects to the speed dating vote count by comparing it to Florida 2000:\",\r\n            line: \"Doesn't really work, but she gets the point. I'm just another reject slowly slipping out of the gene pool to get hoovered up by the sex industry. Oh Saz. She implied she might be ticking. Maybe she did tick. Maybe the data wasn't collated correctly. Maybe she's my hanging chad.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 180,\r\n            internal: true,\r\n            audio: \"elgar.mp3\",\r\n            annotation: \"Jez struggles to make a \\\"donation\\\" at the sperm bank:\",\r\n            line: \"Hey where's the porn? No porn? Am I supposed to just dry hump myself? There must be something I can use. Would it be wrong? Why not? It's a free country. OK Queeny, it's back in the 50s, you're nice and young, you've just been coronated. I'm taking off your cloak. No, leave the crown on. Oooh, what's this? Stockings? You've been getting through your nylon ration book pretty quickly, you naughty, sexy Queen. Oh shit. Right here we- Oh, Elgar! Oh I've totally lost it now. Thanks a bunch Elgar!\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 229,\r\n            internal: false,\r\n            audio: \"gwen.mp3\",\r\n            annotation: \"Jez tries to contain his grief after his Great Aunt dies:\",\r\n            line: \"She is dead, she is dead! Dead old Gwen is dead, dead, dead! Dead, dead, dead, dead, dead, dead, dead! Dead old Gwen is dead!\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 876,\r\n            internal: false,\r\n            audio: \"kebab.mp3\",\r\n            annotation: \"Mark finally gets to talk shop with a fellow history buff:\",\r\n            line: \"Well, I did once start a business book, and I've always fancied doing an article about the evacuation of Greece in '41 for the local paper. Not that it would really fit in among all the kebab shop stabbings.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 900,\r\n            internal: true,\r\n            audio: \"tiramisu.mp3\",\r\n            annotation: \"Mark has the best night of his life after events finally turn in his favour:\",\r\n            line: \"Which way will Caesar Corrigan's thumb point? This is a fantastic evening. I've become a military historian, and Jeremy's future happiness rests in my hands. And I've got a tiramisu! This is fucking amazing!\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 951,\r\n            internal: true,\r\n            audio: \"orgasm.mp3\",\r\n            annotation: \"Mark wakes up in the middle of the night to finally discover that Natalie is not in fact a lesbian:\",\r\n            line: \"I'm having an orgasm against my will. Oh, God! She's stolen sex off me.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 1019,\r\n            internal: true,\r\n            audio: \"pensioners.mp3\",\r\n            annotation: \"Mark does the dirty on Jez and steals Cally from him:\",\r\n            line: \"Wow, I've got a date. I'm a real piece of shit. I bet those two things go hand in hand. Bet if I got into defrauding pensioners the pussy would really start rolling in.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 1149,\r\n            internal: true,\r\n            audio: \"sperm.mp3\",\r\n            annotation: \"After spending the night with Sophie, Mark finds that \\\"Old Meg\\\" his trusty condom has perished and frets over the consequences:\",\r\n            line: \"That is low. That is really low. She's taken my sperm, and sperm is like lending someone less than a fiver. You can't really ask for it back.\",\r\n        },\r\n        {\r\n            series: \"5\",\r\n            index: 1205,\r\n            internal: false,\r\n            audio: \"dads.mp3\",\r\n            annotation: \"The series ends on a cliffhanger when we discover Sophie's child could be Mark's or Jez's:\",\r\n            line: \"Well, if Sophie continues down her path toward self destruction, we'll end up adopting like a couple of gay dads anyway, so we'll never need to find out whose it is.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 547,\r\n            internal: false,\r\n            audio: \"grunt.mp3\",\r\n            annotation: \"Let's zoom in on some of the more memorable lines from the series. The series starts with Mark pulling some strings to get Jez a job at JLB:\",\r\n            line: \"Hi, Colin, listen, buddy, could you do me a favour and take a punt on a grunt? Yeah, farmyard fodder, a day player. No overheads, no holiday, no contract. Cut and shut, a phone pig. Ha-ha! Exactly, cool, bro, thanks.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 641,\r\n            internal: false,\r\n            audio: \"skit.mp3\",\r\n            annotation: \"Mark takes the demise of JLB quite well:\",\r\n            line: \"Yeah, I'm having a mini wobble on the moustache. What do you think? I just feel, I'm not trying to associate JLB HQ with the Nazis, that would be reductive. I just want to hint at certain similarities in terms of the unquestioning approach both power structures want their underlings to adopt. Do you think people will get that?\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 697,\r\n            internal: false,\r\n            audio: \"shopping.mp3\",\r\n            annotation: \"Mark reviews Elena's shopping and he doesn't like what he sees:\",\r\n            line: \"Right. Yeah, she is attractive. Although, brown rice and Pop-Tarts, chamomile tea and economy vodka. That's a car crash of a shopping basket.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 717,\r\n            internal: true,\r\n            audio: \"boiler.mp3\",\r\n            annotation: \"Mark wonders if spending money on a new boiler was really worth it:\",\r\n            line: \"A new boiler. Surely the least enjoyable way to spend a thousand pounds. At least throwing the money out the window you'd see the scrabbling mass, the hate filled faces. I have spent a cool grand on acquiring the resumption of an equitable temperature.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 151,\r\n            internal: false,\r\n            audio: \"bush.mp3\",\r\n            annotation: \"Jez should really write more poetry:\",\r\n            line: \"\\\"Fuck you, Bush. Fuck you, Bush! It's time to get out of Iraq, Bush. What were you even doing there in the first place, Bush? You didn't even get properly elected, Bush. Are you happy now, Bush? Fuck you, Bush!\\\"\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 821,\r\n            internal: false,\r\n            audio: \"hot.mp3\",\r\n            annotation: \"Mark has just found out that he is in fact the father of Sophie's baby after Jez comes clean after originally telling him that he wasn't to impress Elena. But as a consolation he at least wins the battle of the boiler:\",\r\n            line: \"Yes! Did you hear that Jeremy! Sophie says it's too hot in here! So I was right. I win! Shove that up your bollocks!\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 869,\r\n            internal: true,\r\n            audio: \"ripper.mp3\",\r\n            annotation: \"Dobby's Jack The Ripper knowledge ticks a box for Mark:\",\r\n            line: \"I love that she knows it was 1888. So few women these days are Ripper-literate.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 872,\r\n            internal: false,\r\n            audio: \"helix.mp3\",\r\n            annotation: \"Mark bemoans the modern state of the world and its addiction to fun:\",\r\n            line: \"Why does everything have to be fun to be worthwhile? \\\"Crick and Watson have discovered the double helix\\\". \\\"Did they do it on a skateboard? No? Well, fuck off then, I'm not interested.\\\"\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 956,\r\n            internal: true,\r\n            audio: \"sniper.mp3\",\r\n            annotation: \"After Jez lectures Mark about love, Mark wonders if he should deliver the truth bomb about Elena:\",\r\n            line: \"Could wipe that patronising smile off his face with the truth. No, would be like picking off innocent bystanders with a sniper rifle. Fun at first but it'd quickly become a depressing chore.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 978,\r\n            internal: true,\r\n            audio: \"slang.mp3\",\r\n            annotation: \"Mark ponders the lack of slang among the middle classes:\",\r\n            line: \"Builder's tea, I suppose that's middle class slang. We don't coin much slang in the middle classes. \\\"Pants\\\", \\\"'mare\\\". \\\"Ooh, I'm having a 'mare. This builder's tea came out pants.\\\"\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 309,\r\n            internal: false,\r\n            audio: \"plate.mp3\",\r\n            annotation: \"Jez tries to reconcile the fact that he's the third party in a same-sex relationship:\",\r\n            line: \"Well, a bit. But basically, not really. I mean, me and this Gail, we're just eating from different sides of the plate. I play woodwind, she's on brass.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 368,\r\n            internal: false,\r\n            audio: \"party.mp3\",\r\n            annotation: \"Jez invites Elena to the party:\",\r\n            line: \"Oh, hi Elena. Yeah, Jez here. Just to say, you know, me and Mark are partying hard this Saturday. I've invited everyone else and then I thought of you. So, uh, there's gonna be some cats from the music biz. Uh, a few cats from film and new media. You know, a whole crowd of cool cats and crazy chicks. Chicks with dicks, chicks without dicks. Guys with dicks. Maybe see you up here, maybe not. Bye-bye. Bye bye-bye bye.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 1150,\r\n            internal: false,\r\n            audio: \"petty.mp3\",\r\n            annotation: \"Jez wonders why Mark invited Gerrard to the party:\",\r\n            line: \"I thought it'd look petty and vindictive not to. And as a petty and vindictive individual I have to take extra care to not appear petty or vindictive.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 1188,\r\n            internal: false,\r\n            audio: \"crashers.mp3\",\r\n            annotation: \"Mark ousts the party crashers:\",\r\n            line: \"Excuse me everyone. I'd like to make an announcement. These two gentlemen are party crashers so I'd be very grateful if none of you spoke to them for the rest of the evening. There is an exclusion zone around them. A cordon sanitaire. Thank you.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 1280,\r\n            internal: true,\r\n            audio: \"ringtone.mp3\",\r\n            annotation: \"Mark's first impression of his driving instructor isn't good:\",\r\n            line: \"Ugh, I'm doing something I hate for someone who doesn't like me, in order to drive around somebody who, as yet, doesn't even exist. Great, I was hoping for a David Attenborough-type instructor. He's more of your chain-wanking, ringtone fanatic.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 1286,\r\n            internal: false,\r\n            audio: \"drive.mp3\",\r\n            annotation: \"The first impression proves fairly prescient as Mark struggles with the instructors lax approach to teaching:\",\r\n            line: \"Look, I'm sorry, but I can't drive. Maybe in your career as a driving instructor you may get one or two pupils from failed states like Eritrea where they have no licensing infrastructure, but basically already know how to drive. However I feel I should warn you that the vast majority are gonna be people like me, who can't drive.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 1290,\r\n            internal: true,\r\n            audio: \"chips.mp3\",\r\n            annotation: \"Unsurpisingly, Mark quits his driving lessons and retreats to a cafe for some Shakespeare and chips:\",\r\n            line: \"This is the life. Bit of Shake-y, enormous plate of chips. And when Sophie goes into labour, we'll call a minicab. What's the big deal? This is a much more productive way of spending four hours than breathing in my instructor's second-hand Superking smoke. I could write a play in the time I'll save. Yeah, what's my play gonna be about? A bloke, a genius, unrecognized in his own time. Mark... Borrigan? And he loves, or maybe even hates, chips.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 1326,\r\n            internal: false,\r\n            audio: \"evil.mp3\",\r\n            annotation: \"Mark comforts Jez after he thinks he might have pushed Gail into the lake on purpose:\",\r\n            line: \"No, Jez, the absolute worst thing anyone could say about you is that you are a selfish, moral blank, whose lazy cynicism and sneering, ironic take on the world encapsulates everything wrong with a generation. But you, my friend, are not evil.\",\r\n        },\r\n        {\r\n            series: \"6\",\r\n            index: 513,\r\n            internal: false,\r\n            audio: \"cushty.mp3\",\r\n            annotation: \"Mark, eventually, drives Jez to see Elena for his last ever sex window:\",\r\n            line: \"There, you see? You can do it. Very, very slowly, thirty to forty stalls, one major steering error, bit of me on clutch at the crossroads when the nasty man was beeping, but you can do it. Right, I'm just gonna nip in there, persuade her not to get married, convince her that I'm the guy for her, quick bit of how's-your-father, not murder anyone, back in five, off to the hospital. Cushty.\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 47,\r\n            internal: false,\r\n            audio: \"tubes.mp3\",\r\n            annotation: \"Let's look into some of the most memorable lines from the series. Here Jez tries to subconciously tell Ben to give up on life from his comatose state whilst reading to him from a lad mag:\",\r\n            line: \"...the premier Wrangler collection. When has good denim ever been cheap? The answer is never. Look, dude, bit of a weird one, but if you aren't gonna make it through, I mean if you can't, then don't worry, because Zahra's great. And, I'll be waiting, and if you check out, in a friendly way, not like a vulture, to check in. And don't worry, I'm not gonna start waggling on any of your tubes, but, and if you have a problem with anything I've just said then, do give me a sign. No? OK. \\\"I'm in a swimming pool and my bikini pops off. I'm not bothered, I'll just carry on\\\", and that's a comment from \\\"Kayleigh, Islip\\\". You see a picture of Kayleigh there, and her nice bum.\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 770,\r\n            internal: true,\r\n            audio: \"baby.mp3\",\r\n            annotation: \"Mark sets out his hopes and dreams for his newly born son as he cuts the umbilical chord:\",\r\n            line: \"God, I can't get any purchase. Thought it would be like Sarah Ferguson, cutting a ribbon, but it's much more meaty, like sawing a dog's leg in half. Oh, my God, there he is, I've got a baby. Maybe, maybe I might be a good person from now on. That might be a good idea. Yeah, lead a wholesome life and be a decent citizen and make the whole world OK, and yeah, this is a biggie, this is definitely a biggie. Maybe my son can sort climate change. He might figure out cold fusion! Not as one of the main guys, that's unrealistic, but in an administrative capacity.\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 939,\r\n            internal: false,\r\n            audio: \"kenneth.mp3\",\r\n            annotation: \"If you didn't get the bonus points from above here's the answer:\",\r\n            line: \"Nine inches. It's a nine-incher. Thought it might spice things up. Trouble is, I find it quite intimidating, as a man. I mean look at it, it's like a leg of lamb. So I've decided to call it \\\"Kenneth\\\", to take the curse off.\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 243,\r\n            internal: true,\r\n            audio: \"friday.mp3\",\r\n            annotation: \"Jez struggles to keep up with Zahra's intellectual pursuits after she asks him to see a Richard Avedon symposium on Friday:\",\r\n            line: \"Jesus Christ I am so out of my depth. Who's Richard Avedon? What's a symposium? At least I know which day Friday is, that's something to cling on to.\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 1061,\r\n            internal: false,\r\n            audio: \"relax.mp3\",\r\n            annotation: \"Mark sets out his strategy for dealing with being stuck in the Nether Zone:\",\r\n            line: \"You can't relax! We've got to fight, worry, speculate, tut, pace, swear!\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 1182,\r\n            internal: false,\r\n            audio: \"turkey.mp3\",\r\n            annotation: \"Mark reacts quite reasonably to Jez not having purchased a turkey for Christmas dinner:\",\r\n            line: \"You what? No turkey?! You fucking idiot, Jeremy, you total fucking idiot! That was your job, you fucking moron! You cretin! You're a fuckhead! That's what you are, a fucking shit head!!\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 492,\r\n            internal: false,\r\n            audio: \"potatoes.mp3\",\r\n            annotation: \"Jez was only joking about the turkey, but he was also in charge of veg and there's a lack of potatoes in the kitchen draw:\",\r\n            line: \"Are you sure potatoes aren't veg? Aren't they... not earth but like, salt. I mean, tomatoes are fruit, and potatoes are... bread? No, I mean they're wheat-y, they don't go in the drawer in the fridge, so... yeah?\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 1241,\r\n            internal: true,\r\n            audio: \"english.mp3\",\r\n            annotation: \"Mark gets away with introducing Dobby to his parents:\",\r\n            line: \"It's fine, luckily we're all English, so no one's going to ask any questions. Thank you, centuries of emotional repression.\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 1312,\r\n            internal: false,\r\n            audio: \"messages.mp3\",\r\n            annotation: \"Mark tries to win Dobby back via answer phone:\",\r\n            line: \"Nothing from Dobby since Christmas. I want to call again, but when I leave long messages, I have this nagging sense that I'll end up hearing them played back to me in a court of law.\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 537,\r\n            internal: false,\r\n            audio: \"paxman.mp3\",\r\n            annotation: \"Jez is up for a biggie on New Year's Eve:\",\r\n            line: \"Oh, come on man. Shake your booty. Tonight, even Paxman's out, hoovering up lines of crank off Krishnan Guru-Murthy. Tonight's the big one!\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 1369,\r\n            internal: true,\r\n            audio: \"lonely.mp3\",\r\n            annotation: \"After telling Mark he's moving in with Zahra, Mark begins to worry about loneliness:\",\r\n            line: \"Can't believe he's actually moving out. I'm going to be an unemployed single mother stuck in the flat, eating Frosties from a salad bowl, until I die from loneliness. And two weeks later they break down the door to find Ian sucking on my cold, dead teats.\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 604,\r\n            internal: false,\r\n            audio: \"osborne.mp3\",\r\n            annotation: \"Jez gets one too many requests for Canaps and dips at Big Suze's posh New Years' Eve party:\",\r\n            line: \"Oh, I'm sorry. I'm afraid I've left it all in George Osborne's ball-sack. Tell you what, why don't you nip upstairs, wank him off and dip it in that?\",\r\n        },\r\n        {\r\n            series: \"7\",\r\n            index: 610,\r\n            internal: false,\r\n            audio: \"hootenanny.mp3\",\r\n            annotation: \"Jez refuses to compromise partying with a bit of Jools Holland:\",\r\n            line: \"No! Not the Hootenanny. Never the Hootenanny. We're better than that. We are going to this party! Come on, Mark. Scrabble. Help me scrabble. It's not long till the bongs!\",\r\n        },\r\n        {\r\n            series: \"8\",\r\n            index: 571,\r\n            internal: true,\r\n            audio: \"fritzl.mp3\",\r\n            annotation: \"Let's look at some of the memorable lines from the series. Here Mark tries to get Dobby to move in with him:\",\r\n            line: \"So great that Dobby's agreed to move in. Just got to close the deal. Get her into the flat, and keep her locked down like Fritzl. No, not like Fritzl. Like a nice, normal, loving guy who knows where she is at all times. Which at no point would be locked in the cellar.\",\r\n        },\r\n        {\r\n            series: \"8\",\r\n            index: 613,\r\n            internal: false,\r\n            audio: \"walcott.mp3\",\r\n            annotation: \"Mark reveals Jez's get rich quick scheme:\",\r\n            line: \"Jeremy's planning to sell the headline, \\\"Three-oh Walcott\\\" to a tabloid newspaper when Theo Walcott turns thirty, and we've agreed not to argue whether that's a good plan.\",\r\n        },\r\n        {\r\n            series: \"8\",\r\n            index: 664,\r\n            internal: true,\r\n            audio: \"tariff.mp3\",\r\n            annotation: \"Gerrard's death hits Mark hard:\",\r\n            line: \"Jesus. Life. Spinning past. Every second, every single fleeting moment till we're gone. I'm taking a look at my phone tariff. I've got a very strong feeling I'm being fucked in the arse.\",\r\n        },\r\n        {\r\n            series: \"8\",\r\n            index: 686,\r\n            internal: true,\r\n            audio: \"rivals.mp3\",\r\n            annotation: \"After acing the interview at Baths, Bathrooms and Fittings, Mark gets a bit carried away at Gerrard's funeral:\",\r\n            line: \"This is a mega funeral. It was a mega interview. Hugh was the only real rival. But look what's happened to Gerrard. This is what I do to rivals. I put my rivals in the ground.\",\r\n        },\r\n        {\r\n            series: \"8\",\r\n            index: 50,\r\n            internal: false,\r\n            audio: \"therapy.mp3\",\r\n            annotation: \"Jez starts his first therapy session:\",\r\n            line: \"So what do you want me to do? Pull down my pants and fertilise the plants? Oh, you'd love that, wouldn't you? Yeah, then you'd have a real patient on your hands. More mental millions for your high interest account, or ISA, or share portfolio, or to spend on your wife, or your boyfriend, chowing down on an Aberdeen Angus steak from your Volkswagen Passat. That's right, kemosabe, I've got your number. Yeah, doesn't feel very nice when the searchlight is turned on the searchlight operator. Hmm, yeah, pal? How about if I just pulled my knob out, and started wanking? Yeah? Oh, you'd love that wouldn't you? My gonads out, one ball dangling in front of each eye. That's your dream, yeah? Well I'm not going to!\",\r\n        },\r\n        {\r\n            series: \"8\",\r\n            index: 874,\r\n            internal: true,\r\n            audio: \"napoleon.mp3\",\r\n            annotation: \"After a spectacular performance in the band name game, Mark plots his revenge:\",\r\n            line: \"Round one to you, Simon. Next time we do a quiz, it'll be on Napoleon, and while you might scrape through a few Waterloo questions, when I pin you down on the emperor's domestic reforms, I will fuck you very hard in the mouth.\",\r\n        },\r\n        {\r\n            series: \"8\",\r\n            index: 967,\r\n            internal: true,\r\n            audio: \"granada.mp3\",\r\n            annotation: \"Mark buys a cat to lure Dobby into moving in with him:\",\r\n            line: \"Yes, and this cat's gonna help me lure Dobby in. Like a classic 70s paedo in a Ford Granada.\",\r\n        },\r\n        {\r\n            series: \"8\",\r\n            index: 1003,\r\n            internal: true,\r\n            audio: \"mamba.mp3\",\r\n            annotation: \"Mark starts his MBA course:\",\r\n            line: \"The start of my new life. \\\"Hi there, I'm Mark Corrigan, MA, MBA\\\". That spells \\\"mamba\\\", which is a kind of sexy snake. You'll be gone by next week. Why do the thickos come to these things? I suppose because the thickos have insisted no one's allowed to say you're a thicko any more. That's actually quite a clever move by the thickos.\"\r\n        },\r\n        {\r\n            series: \"8\",\r\n            index: 493,\r\n            internal: true,\r\n            audio: \"train.mp3\",\r\n            annotation: \"Jez's plan to come clean to Mark and escape the train so as to not face the music backfires:\",\r\n            line: \"Before my best friend kills me with a tuna baguette. Oh, my fucking God, this train is running on time. This is unprecedented. Oh, no. Oh, fuck! Oh, back to the scene of the crime to face the music and dance, like some mad musical murderer. How the hell am I gonna play this? Just going to totally fucking ignore it. It never happened.\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 681,\r\n            internal: true,\r\n            audio: \"wolf.mp3\",\r\n            annotation: \"Let's look at some of the best lines from the series. Mark starts the series with a new job:\",\r\n            line: \"Finally working at a bank, and banks have turned into phone shops. But it is still a bank. I'm the Wolf of Wall Street. Look out, Boots, I'm going to buy a hundred meal deals and eat them off a prossie in the nude.\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 704,\r\n            internal: true,\r\n            audio: \"viking.mp3\",\r\n            annotation: \"Mark has finally reached his culture limit thanks to Jerry's William Morris documentaries:\",\r\n            line: \"Ugh, more William Morris. Wallpaper and workers' rights. God, this is like the Dark Ages. Centuries and centuries with nothing to look forward to except the slim possibility a Viking might break down the door and rape me.\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 76,\r\n            internal: false,\r\n            audio: \"antwerp.mp3\",\r\n            annotation: \"Jez tries to convince Mark that he'll be better off living with him than Jerry and his evenings of culture:\",\r\n            line: \"Look, the problem for you is I'm your friend. I know you, Mark. I know you like to pretend that you're this stuffed shirt who reads incredibly boring books about dead people killing each other with bayonets and typhoid, but I know the truth. I've watched Grand Designs with you. That smile when some eco-glass gets delayed on its way from Antwerp and the nice couple gets pushed over budget. That's the real you.\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 112,\r\n            internal: false,\r\n            audio: \"litvinenko.mp3\",\r\n            annotation: \"Jez's plan to get rid of Jerry takes a turn for the macabre:\",\r\n            line: \"Not full Litvinenko. Just a little bit of something debilitating in his pasta each night. Grind him down, weaken him, till he's all pathetic and you can just scoop him up like a sick whippet and dump him.\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 880,\r\n            internal: true,\r\n            audio: \"best-man.mp3\",\r\n            annotation: \"Mark rehearses his best man's speech for Super Hans' wedding but gets somewhat distracted:\",\r\n            line: \"Mention the seven years working in Richer Sounds in Kew, miss out the Thai jail, onto the bands, drop the first marriage, hit Jeremy and their long friendship, minus all the bad blood and occasional sucking each other off, blah, blah, blah, wrap up with a toast to the bride and groom, Hans, or possibly Simon, and his wife, whose Christian name I've unfortunately forgotten. Shit, I don't really know either of their names. There's Dobby. She doesn't like pasanda and quality TV drama. She likes hitchhiking and terrifying actual drama. We don't fit. Oh, my God, I'm letting go. I've crossed the bridge into adulthood. I'm moving on. I'm going to delete her off my GPS. Weird, it looks like she's right behind me. Fuck, what the-\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 193,\r\n            internal: false,\r\n            audio: \"best-man-speech.mp3\",\r\n            annotation: \"Jez has to deputise for Mark (see above) and deliver an impromptu best man's speech, what could go wrong?\",\r\n            line: \"Hans. Super Hans, I've known Hans for many a year now. It's been a long road and now, as you've found Molly, er, and I don't really want to get into this, but I've started it now, but I'm going to bring it round, so don't worry. People said Molly wasn't right for you. That she was a downer. But you know what? If someone loves someone, he just loves them. And if that person is considered to be a downer, or even a yawn-a-thon, who cares? And even if someone loves another man, or, what's in a name? Or gender? Is it possible to love two people at once? Three? Four is surely the limit. But is it? What is love anyway? Is it, er, an act, or a feeling or, who am I to speak? Who are you to listen? Why is a marriage a marriage? But society says it's wrong for two men to love one another even though now it says it says that now it's OK? Is it OK because society says it's OK? What next? Dogs getting married? Could I marry my own son? No. Possibly not? Correct. Or is it? What I'm trying to say is that people should do whatever they want to do, at a temperature that suits them, within limits. Thank you.\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 222,\r\n            internal: true,\r\n            audio: \"burgers.mp3\",\r\n            annotation: \"Jez ponders the ethics of causing Megan's relationship problems and giving her therapy about it at the same time:\",\r\n            line: \"I'm creating my own work, I'm living off my own mess. Like when they fed all the cows to the other cows in the 90s and we got, what was it? Super burgers?\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 285,\r\n            internal: false,\r\n            audio: \"paintings.mp3\",\r\n            annotation: \"Jez tries to get involved with an intellectual discussion and ends up comparing Jesus Christ to Hitler:\",\r\n            line: \"I'm not knocking the guy. I'm just saying, you know, apart from that, what did he actually achieve? I'm not saying I like him but at least Hitler did some paintings.\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 1118,\r\n            internal: false,\r\n            audio: \"poppadoms.mp3\",\r\n            annotation: \"Mark takes some Class A drugs to impress April but it doesn't really have any effect:\",\r\n            line: \"I feel completely normal. But also, a bit like I want to karate-chop my hand through a very high stack of poppadoms.\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 425,\r\n            internal: false,\r\n            audio: \"average.mp3\",\r\n            annotation: \"Mark tries to prove to Jez that he has above average intelligence, you be the judge:\",\r\n            line: \"Mark no one does maths these days. We've all got calculators in our pockets, just like all our maths teachers said we wouldn't. Anyway this proves nothing. Probably most people are below average.\",\r\n        },\r\n        {\r\n            series: \"9\",\r\n            index: 529,\r\n            internal: false,\r\n            audio: \"forty.mp3\",\r\n            annotation: \"Jez attempts to justify lying about his age after telling Joe he's turning 39 instead of 40:\",\r\n            line: \"I don't know. Forty is basically fifty, and fifty is dead. Whereas thirty-nine is like thirty-five. Thirty-five is practically thirty. Thirty is twenty. You know?\",\r\n        },\r\n    ];\r\n}\r\nexport default SentenceAnnotations;","const SentimentAnnotations = function() {\r\n\r\n    this.characterSentiments = [\r\n        \"As expected most characters cluster around the neutral sentiment mark. The TV takes the prize for being the most positive. This is probably due to the repeated appearance of Bob Ross, the nicest person ever to appear on television. Jeff is an outlier in episode 5, but to be fair he had just a single line which was obviously not very complimentary. I was surprised to see that the gang of local youths had a positive sentiment in the first episode. This is probably due to them complimenting Mark's clean shirt. You can just make out a positive trend as the episodes progress, up until the final episode where the funeral brings it back down.\",\r\n        \"Again we see a clustering around the neutral mark although the first episode shows a definite positive skew with, surprisingly, Johnson way out on top courtesy of his pep talk at JLB. We also see other positive outliers but they are mainly the minor characters like Tony, Nim and the registrar from Jez's sham wedding who only had a couple of lines each. Pete from The Executioner's Bong is the most negative (episode 4) presumably because he bumps off Super Hans to get Jez to perform at the gig.\",\r\n        \"This series is slightly more positive than the first two as you can see clustering just above the neutral mark. Both Sophie and Big Suze maintain a positive sentiment throughout the series. Jez is slightly more positive than Mark, especially in episodes 2 and 4 as he tries to gain favour with Merry and Sarah. Jeff is the big outlier here but again it's a small sample size, his only line being his opinion of Colin Cooper, obviously it isn't very complimentary. The most surprising aspect of this chart is the fact that episode 4 only had 4 characters! This probably explains why that particular episode has the lowest number of lines out of the entire Peep Show oeuvre.\",\r\n        \"As usual most characters cluster around the neutral mark. Sophie maintains a positive outlook, that is until the fateful jilting on the wedding day. Super Hans goes through the entire gamut of human emotions in this series from very positive in episode 1 (although he only had a couple of lines) to negative in the final episode, probably due to his massive hangover on Mark's wedding day. Lisa is a positive outlier in episode 2 as she joined the Project Zeus work group and got out before Mark turned into the worst boss in human history. Nancy remained positive throughout, the break in series 3 obviously did her good. Not even the Vicar's positive sentiment in episode 6 can save Mark and Sophie's wedding. I think the driver's negative sentiment in the final episode can be excused as he wouldn't have known that Mark was trying to get run over on purpose to avoid getting married.\",\r\n        \"As expected most characters cluster around the neutral mark. Sophie's sentiment starts off much lower in this series as she deals with the post wedding fiasco. Lisa is the most negative person in the series, this is due to episode 2 where she tells Mark her thoughts on him jilting Sophie. Jeff veers from one extreme to the other due to only having a very few lines in this series. Jez is positive throughout except for episode 4 due to him being incredibly rude to his Mum and trying to play mind games with his new Dad after realising the money pipe is being cut off. Mark stays positive throughout surprisingly. He obviously moves on pretty quickly from the failed wedding.\",\r\n        \"As expected most characters cluster around the neutral mark but there are some positive outliers, particularly Gail in episode 5. This is the party episode where she proposes to Elena which explains that. The minor characters covered under \\\"Others\\\" are also outliers but this is a very small sample size. The negative sentiment in episode 1 comes from a security guard at JLB warning everyone about a fire alarm and the positive sentiment in episode 6 comes from the instructor during Mark's driving test. Elena remains positive throughout the series, she's probably too self-centred to have any negative thoughts. Dobby is quite negative in episode 2 as she finally finds out why Mark is acting strangely. Another negative character is the Tourist from episode 3. This is the guy heckling Mark during his Jack The Ripper tour. Sentiment aside you can see this series had a lot of characters appear in it, especially in the party episode as Mark finally manages to arrange a social gathering.\",\r\n        \"As usual most characters cluster around the neutral mark but overall we do see it skewing slightly to the positive side, maybe because we have episodes with happier themes such as a new baby, Christmas and New Year's Eve. We can see a couple of positive outliers, Zahra in episode 2 and Sophie in episode 4, although they don't have many lines in these episodes. In fact, Zahra remains positive throughout the series even though she could probably do better for herself in the romance department. Episode 1 is fairly positive on average as this is the episode where Sophie gives birth and we can see most of the hospital staff are being kind, except for the theatre nurse who's probably negative as she warns Mark not to look at the \\\"goal end\\\". I was surprised to see the door-to-door seller from episode 3 in neutral sentiment territory, obviously his meekness trying to flog expensive feather dusters helped balance out his aggression when Mark brings him the wrong order at Banditos. The pizza delivery guy in episode 4 has the lowest sentiment average, probably due to him trying to deliver a pizza slice by slice through a letterbox. Ian, Sophie's Father, is also negative in that episode as he's disgusted with Mark for missing his son's christening. I was also surprised to see Mark's Dad come out with a positive average, the sentiment analysis obviously didn't pick up on his thinly veiled sarcasm.\",\r\n        \"Just as in the previous series we see a slight trend towards an overall positive sentiment. Again we see positive outliers for minor characters and characters with very few lines (Neil in episode 6). The positive \\\"Others\\\" in the first two episodes mainly come from Mark's interview rivals at Baths, Bathrooms and Fittings, the Vicar at Gerrard's funeral and a waitress at a caf. Johnson has the lowest sentiment in the series, his eulogy at Gerrard's funeral obviously didn't go down too well. Big Mad Andy has a negative sentiment in episode 4 as his life spirals out of control and Jez becomes his only hope. He seems to recover in episode 5 but this is only because he offers Jez a corner and a bin bag to sleep in. Mark's highest sentiment average was in episode 2 as he manages to get his book \\\"published\\\". Super Hans' sentiment is up and down as he becomes Mark's boss, loses it during paintballing, and tries to engineer his love life via the classified ads.\",\r\n        \"We see clustering around the neutral mark as before but episode 2 is clearly more positive, probably due to it being Super Hans and Molly's wedding. Only Gregory's aggression, Dobby's lament over her and Mark's past and the driver Frank, who to be fair thought he was going to be murdered, bring it down. Poor Megan goes through the mill in this series. She's struggling with life decisions only to be given false hope from life coach Jez with catastrophic results. By episode 4 her hatred for Jez really shows. Angus and April remain positive despite their marital problems, they are obviously just too nice for it to affect how they deal with others. The minor characters under \\\"Others\\\" are again outliers due to the small number of lines that they have. It dips from positive (the registrar at Super Hans and Molly's wedding) to negative (the TV in the very last episode delcaring that wolves have been reintroduced).\"\r\n    ]\r\n}\r\n\r\nexport default SentimentAnnotations;","const WordAnnotations = function() {\r\n\r\n    this.annotations = [\r\n        \"There is a sense of prevarication in these words. Words such as maybe, fine, nice and sure do not come across as very assertive which I think reflects the internal conflict between Mark and Jez's inner thoughts and what comes out of their mouths. There's also no surprise that a curse word found its way into the top list but we'll look more into this later.\",\r\n        \"We see a lot of the same words from series 1 repeated again (really, going, mean, maybe, actually, sure). Interestingly we see \\\"love\\\" appear in this series as the focus shifts on to Mark and Jez's relationships.\",\r\n        \"Again we see a repeat of words from the first two series. Interestingly Jez says \\\"love\\\" a lot more than Mark in this series as he tries to get back together with Big Suze whereas Mark has finally got together with Sophie.\",\r\n        \"We don't see any new words that haven't appeared in previous series, continuing the theme. Mark mentions \\\"love\\\" more than Jez as he struggles with the prospect of marriage. We see the re-appearance of a curse word for the first time since the first series. This is probably due to the wedding fiasco.\",\r\n        \"We see a lot of words from previous series reappear like really, going, maybe and actually. The potty-mouth level seems to have increased in this series with the presence of two curse words. Interestingly Super Hans is one of the most foul-mouted in this series, even beating Mark in some cases.\",\r\n        \"\",\r\n        \"\",\r\n        \"\",\r\n        \".\"\r\n    ]\r\n}\r\n\r\nexport default WordAnnotations; ","const StatsAnnotations = function() {\r\n\r\n    this.linesAnnotations = [\r\n        \"The first series had the least amount of lines out of all other series. This is even with the increase in episode 5 (Dream Job) which was probably due to Mark's descent into paranoia over Sophie and his failed promotion at JLB.\",\r\n    ]\r\n}\r\n\r\nexport default StatsAnnotations;","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\n// import gsap from \"gsap\";\r\n// import ScrollTrigger from \"gsap/ScrollTrigger\";\r\nimport \"intersection-observer\";\r\nimport scrollama from \"scrollama\";\r\n\r\nimport ChordDiagram from \"./visualisations/chord/ChordDiagram\";\r\nimport ChordDiagramTutorial from \"./visualisations/chord/ChordDiagramTutorial\";\r\nimport WordSearch from \"./visualisations/words/WordSearch\";\r\nimport Locations from \"./visualisations/locations/Locations\";\r\nimport Timeline from \"./visualisations/timeline/Timeline\";\r\nimport Sentences from \"./visualisations/sentences/Sentences\";\r\nimport Sentiment from \"./visualisations/sentiment/Sentiment\";\r\nimport Lines from \"./visualisations/stats/Lines\";\r\nimport Swears from \"./visualisations/stats/Swears\";\r\n\r\nimport SentenceAnnotation from \"./visualisations/sentences/SentenceAnnotation\";\r\nimport ReferenceData from \"./reference/ReferenceData\";\r\nimport SentenceAnnotations from \"./visualisations/sentences/SentenceAnnotations\";\r\nimport SentimentAnnotations from \"./visualisations/sentiment/SentimentAnnotations\";\r\nimport WordAnnotations from \"./visualisations/words/WordAnnotations\";\r\nimport StatsAnnotations from \"./visualisations/stats/StatsAnnotations\";\r\nimport \"./Explorer.css\";\r\n\r\n\r\nfunction Explorer() {\r\n    const referenceData = new ReferenceData();\r\n    const sentenceAnnotationsData = new SentenceAnnotations();\r\n    const sentimentAnnotationsData = new SentimentAnnotations();\r\n    const wordAnnotationData = new WordAnnotations();\r\n    const statsAnnotations = new StatsAnnotations();\r\n\r\n    const [visualisation, setVisualisation] = useState(null);\r\n    const [dataStep, setDataStep] = useState(0);\r\n    const [showVisual, setShowVisual] = useState(\"none\");\r\n    \r\n    const [seriesSummary, setSeriesSummary] = useState(\"\");\r\n    \r\n    const [chordTutorial, setChordTutorial] = useState(\"\");\r\n    const [chordAnnotations, setChordAnnotations] = useState(\"\");\r\n\r\n    const [sentenceAnnotations, setSentenceAnnotations] = useState(\"\");\r\n    const [audioAnnotations, setAudioAnnotations] = useState([]);\r\n\r\n    // ref for the sentiment component (gives us access to its group function)\r\n    const sentimentRef = useRef();\r\n    const [sentimentAnnotations, setSentimentAnnotations] = useState(\"\");\r\n    const [sentimentSelectedCharacter, setSentimentSelectedCharacter] = useState(\"Mark\");\r\n\r\n    const [wordAnnotations, setWordAnnotations] = useState(\"\");\r\n\r\n    const [linesAnnotations, setLinesAnnotations] = useState(\"\");\r\n\r\n    const { series } = useParams();\r\n\r\n    // annotations hook\r\n    useEffect(() => {\r\n        setSeriesSummary(referenceData.seriesSummaries[series - 1]);\r\n\r\n        setChordTutorial(referenceData.chordTutorial[series - 1]);\r\n        setChordAnnotations(referenceData.chordAnnotations[series - 1]);\r\n\r\n        setSentenceAnnotations(sentenceAnnotationsData.sentenceAnnotations[series - 1]);\r\n        setAudioAnnotations(sentenceAnnotationsData.audioAnnotations.filter(a => a.series === series));\r\n\r\n        setSentimentAnnotations(sentimentAnnotationsData.characterSentiments[series - 1]);\r\n\r\n        setWordAnnotations(wordAnnotationData.annotations[series - 1]);\r\n\r\n        setLinesAnnotations(statsAnnotations.linesAnnotations[series - 1]);\r\n    }, [series]);\r\n\r\n    const getVisualisation = (idx) => {\r\n        let component;\r\n        switch(idx) {\r\n            case 0:\r\n                component = <ChordDiagram />\r\n                break;\r\n\r\n            case 1:\r\n                component = <WordSearch />\r\n                break;\r\n\r\n            case 2:\r\n                component = <Locations />\r\n                break;\r\n\r\n            case 3:\r\n                component = <Timeline />\r\n                break;\r\n\r\n            case 4:\r\n                component = <Sentences />\r\n                break;\r\n\r\n            case 5:\r\n                component = <Sentiment ref={sentimentRef} />\r\n                break;\r\n\r\n            case 6:\r\n                component = <Lines />\r\n                break;\r\n\r\n            case 7:\r\n                component = <Swears />\r\n                break;\r\n\r\n            default:\r\n                component = null;\r\n        }\r\n\r\n        setVisualisation(component);\r\n    }\r\n\r\n    useEffect(() => {\r\n        const chordDiagramTutorial = new ChordDiagramTutorial();\r\n        const main = d3.select(\"main\");\r\n        const scrolly = main.select(\"#scrolly\");\r\n        const figure = scrolly.select(\"figure\");\r\n        const article = scrolly.select(\"article\");\r\n        const step = article.selectAll(\".step\");\r\n\r\n        // initialise the scrollama\r\n        const scroller = scrollama();\r\n\r\n        scroller.setup({\r\n            step: \"#scrolly article .step\",\r\n            offset: 0.3,\r\n            // debug: true,\r\n        })\r\n        .onStepEnter((res) => {\r\n            // console.log(res);\r\n            const scrolledDataStep = res.element.dataset.step;\r\n            const trigger = res.element.dataset.trigger;\r\n            step.classed(\"is-active\", (d, i) => i === res.index);\r\n\r\n            if(scrolledDataStep !== dataStep) {\r\n                // change displayed visualisation\r\n                setDataStep(res.element.dataset.step);\r\n                getVisualisation(res.element.dataset.step - 1);\r\n            }\r\n\r\n            switch(trigger) {\r\n                case \"chord-tut-1\":\r\n                    chordDiagramTutorial.tutorialOne();\r\n                    setShowVisual(\"block\");\r\n                    break;\r\n\r\n                case \"chord-tut-2\":\r\n                    chordDiagramTutorial.tutorialTwo();\r\n                    break;\r\n\r\n                case \"chord-tut-3\":\r\n                    chordDiagramTutorial.tutorialThree(series);\r\n                    break;\r\n\r\n                case \"chord-tut-4\":\r\n                    chordDiagramTutorial.tutorialFour();\r\n                    break;\r\n\r\n                case \"chord-tut-5\":\r\n                    chordDiagramTutorial.tutorialFive();\r\n                    break;\r\n\r\n                case \"words-intro\":\r\n                    d3.selectAll(\".top-word\")\r\n                        .style(\"opacity\", 0);\r\n\r\n                    d3.select(\"#search-results\")\r\n                        .style(\"opacity\", 0);\r\n\r\n                    d3.select(\"#search-input\")\r\n                        .style(\"opacity\", 0);\r\n                    break;\r\n\r\n                case \"words-reveal\":\r\n                    d3.select(\".word-search-top-words\")\r\n                        .style(\"display\", \"initial\");\r\n\r\n                    d3.selectAll(\".top-word\")\r\n                        .transition()\r\n                        .delay((d, i) => i * 200)\r\n                        .duration(500)\r\n                        .ease(d3.easeLinear)\r\n                        .style(\"opacity\", 1)\r\n                        .style(\"pointer-events\", \"all\");\r\n                    break;\r\n\r\n                case \"word-search-reveal\":\r\n                    d3.select(\".word-search-top-words\")\r\n                        .transition()\r\n                        .style(\"display\", \"none\");\r\n\r\n                    d3.select(\"#search-results\")\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", 1);\r\n\r\n                    d3.select(\"#search-input\")\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", 1);\r\n                    break;\r\n\r\n                case \"mark-vs-jez\":\r\n                    // if scrolling back up then reset opacity\r\n                    if(res.direction === \"up\") {\r\n                        d3.selectAll(\".num-words-bar\")\r\n                            .transition()\r\n                            .duration(1000)\r\n                            .style(\"opacity\", 1);\r\n                    }\r\n                    break;\r\n\r\n                case \"sentence-annotation\":\r\n                    const sentenceIndex = res.element.dataset.sentence;\r\n                    // highlight this specific sentence\r\n                    d3.selectAll(\".num-words-bar\")\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", (d, i) => {\r\n                            // only == as custom \"data-\" attribute is a string\r\n                            if(d.index == sentenceIndex) {\r\n                                return 1;\r\n                            } else {\r\n                                return 0.25;\r\n                            }\r\n                        });\r\n                    break;\r\n\r\n                case \"mark-sentiment\":\r\n                    // highlight Mark's sentence bubbles\r\n                    d3.selectAll(\".sentiment-circle\")\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", 0.25);\r\n\r\n                    d3.selectAll(\".sentiment-circle.mark\")\r\n                        .classed(\"focus\", true)\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", 1);\r\n                    break;\r\n\r\n                case \"sentiment-grouped\":\r\n                    // now we can invoke the group function inside the Sentiment component \r\n                    // thanks to the useRef/useImperativeHandle hooks\r\n                    sentimentRef.current.showGroupedData();\r\n                    break;\r\n\r\n                case \"swear-bars-highlight\":\r\n                    // highlight 90th percentile and above swear bars which is 53 swears\r\n                    d3.selectAll(\".swear-bar\")\r\n                        .transition()\r\n                        .duration(800)\r\n                        .style(\"fill\", d => referenceData.seriesColours[series - 1])\r\n                        .style(\"opacity\", d => d.NumSwears >= 53 ? 1 : 0.4);\r\n\r\n            }\r\n        });\r\n\r\n        const handleResize = () => {\r\n            // const stepHeight = Math.floor(window.innerHeight * 0.95);\r\n            // step.style(\"height\", stepHeight + \"px\");\r\n\r\n            const figureHeight = window.innerHeight;\r\n            // const figureMarginTop = (window.innerHeight - figureHeight) / 2;\r\n            const figureMarginTop = 0;\r\n\r\n            figure\r\n                .style(\"height\", figureHeight + \"px\")\r\n                .style(\"top\", figureMarginTop + \"px\");\r\n\r\n            scroller.resize();\r\n        };\r\n\r\n        handleResize();\r\n        window.addEventListener(\"resize\", handleResize);\r\n    }, [audioAnnotations]);\r\n\r\n    // character selection change in sentiment viz\r\n    useEffect(() => {\r\n        d3.selectAll(\".sentiment-circle\")\r\n            .transition()\r\n            .duration(500)\r\n            .style(\"opacity\", 0.25);\r\n\r\n        d3.selectAll(`.sentiment-circle.${sentimentSelectedCharacter.replaceAll(' ', '-').replace(\"'\", \"\").toLowerCase()}`)\r\n            .classed(\"focus\", true)\r\n            .transition()\r\n            .duration(500)\r\n            .style(\"opacity\", 1);\r\n\r\n    }, [sentimentSelectedCharacter]);\r\n\r\n    const filterSentimentBubbles = (e) => {\r\n        setSentimentSelectedCharacter(e.target.dataset.character);\r\n        // remove selected class from previous selection and add to current\r\n        const elements = document.getElementsByClassName(\"sentiment-avatar\");\r\n        Array.prototype.forEach.call(elements, el => el.classList.remove(\"selected\"));\r\n        e.target.classList.add(\"selected\");\r\n    };\r\n\r\n    return (\r\n        <main>\r\n            <section id=\"scrolly\">\r\n                <article>\r\n                    {/* Conversation (chords) Section */}\r\n                    <div className=\"step\" data-step=\"1\">\r\n                        <h1>Series {series}</h1>                    \r\n                        <p>{seriesSummary}</p>\r\n                    </div>\r\n\r\n                    <div className=\"step\" data-step=\"1\" data-trigger=\"chord-tut-1\">\r\n                        <h2>Conversations</h2>\r\n                        <p>Let's visualise all of the conversations that took place in the series. We'll use a chord diagram to do this.</p>\r\n                    </div>\r\n\r\n                    <div className=\"step\" data-step=\"1\" data-trigger=\"chord-tut-2\">\r\n                        <p>Each \"arc\" represents a character from the series with the length of the arc representing the number of lines that character \r\n                            spoke. {chordTutorial.arc}</p>\r\n                    </div>\r\n\r\n                    <div className=\"step\" data-step=\"1\" data-trigger=\"chord-tut-3\">\r\n                        <p>The chords between the arcs visualise the number of lines spoken between characters. The thickness of the chord encodes the \r\n                            percentage of that character's overall lines that were spent speaking to that character. {chordTutorial.chords}</p>\r\n                    </div>\r\n\r\n                    <div className=\"step\" data-step=\"1\" data-trigger=\"chord-tut-4\">\r\n                        <p>Although chord diagrams are better at visualising asymmetrical patterns (conversations should be symmetrical ), you can still get \r\n                            an overall picture of who spoke to whom. An interesting aspect of the visual are the \"mounds\" which show how many \"internal\" thoughts \r\n                            Mark and Jez had. {chordTutorial.mounds}</p>\r\n                    </div>\r\n\r\n                    <div className=\"step\" data-step=\"1\" data-trigger=\"chord-tut-5\">\r\n                        <p>Now showing all characters in the series to complete the visual. Note minor characters who only have 1 or 2 lines, or characters that do \r\n                            not speak are gathered together under \"Others\" to keep the visual from becoming too cluttered. But don't worry, we'll explore these \r\n                            minor characters later on.\r\n                        </p>\r\n\r\n                        <p>{chordAnnotations}</p>\r\n\r\n                        <p>Feel free to interact with the visualisation. Hover over the characters for more info and hover over the chords to see the percentages.</p>\r\n                        <div id=\"info-panel\">\r\n                            <div id=\"info-avatar\"></div>\r\n                            {/* <p id=\"info-text\">Hover over the characters for more info!</p> */}\r\n                            <div id=\"info-col\">\r\n                                <h3 id=\"info-name\"></h3>\r\n                                <p id=\"info-total-lines\"></p>\r\n                                {/* <h4 id=\"info-spoke-to-heading\">Spoke To</h4> */}\r\n                                <p id=\"info-spoke-to\"></p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    {/* Mark v Jez sentences chart */}\r\n                    <div className=\"step\" data-step=\"5\" data-trigger=\"mark-vs-jez\">\r\n                        <h1>Mark vs Jez</h1>\r\n                        <p>As the main characters with the vast majority of lines, let's focus in on Mark and Jez now, looking at how their lines compare with each other.</p>\r\n                        <p>Each horizontal bar represents a line spoken by Mark and Jez for each episode. The width of the bar \r\n                            indicates the number of words in the line with the colour highlighting if it was \r\n                            spoken <span style={{ borderBottom: \"3px solid dodgerblue\"}}>aloud</span> or <span style={{ borderBottom: \"3px solid tomato\"}}>\"internally\"</span>. From \r\n                            the number of bars we can also see who had the most lines per episode.\r\n                        </p>\r\n                        <p>The horizontal \"ticks\" below represent the average number of words per <span className=\"bold\">sentence</span> where each tick equals one word. {sentenceAnnotations[0]}</p>\r\n                        <p>The circles visualise the ratio of internal versus external lines. {sentenceAnnotations[1]}</p>\r\n                        <p>Finally, the words show the top five most common nouns utterred by each character per episode. {sentenceAnnotations[2]}</p>\r\n                    </div>\r\n\r\n                    {\r\n                        audioAnnotations.map((a, idx) => {\r\n                            return (\r\n                                <div key={idx} className=\"step\" data-step=\"5\" data-trigger=\"sentence-annotation\" data-sentence={a.index}>\r\n                                    <SentenceAnnotation annotation={a} />\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n\r\n\r\n                    { /* Sentiment Analysis */}\r\n                    <div className=\"step\" data-step=\"6\">\r\n                        <h1>Sentiment</h1>\r\n                        <p>Now let's delve a level deeper by breaking the lines down into individual sentences.</p>\r\n                        <p>Here, each bubble represents a sentence from the script, where the size of the bubble represents the number of words in the sentence. Sentiment analysis has \r\n                            been performed on each sentence and the bubble positioned ranging from a positive sentiment at the top, to a negative sentiment at the bottom, staggered \r\n                            to prevent any overlaps.\r\n                        </p>\r\n                        <p>Hover over the bubbles to see the sentence info. It also highlights all of the sentences spoken by that particular character.</p>\r\n                    </div>\r\n\r\n                    <div className=\"step\" data-step=\"6\" data-trigger=\"mark-sentiment\">\r\n                        <p>Here we have highlighted just Mark's sentences. As you can see it is hard to infer an overall sentiment. This is especially true for \r\n                            the main characters as we watch their journey through life and the wide gamut of emotions that come with it.\r\n                        </p>\r\n                        <p>Feel free to highlight other characters below and see if you can deduce an overall positive or negative sentiment.</p>\r\n                        <div>\r\n                            {\r\n                                referenceData.seriesCharacters[series - 1].map(c => \r\n                                    <div className={c === \"Mark\" ? \"sentiment-avatar selected\" : \"sentiment-avatar\"} data-character={c} \r\n                                        style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/avatars/${c.replaceAll(' ', '-').replace(\"'\", \"\").toLowerCase()}.jpg)` }}\r\n                                        title={c} onClick={filterSentimentBubbles}>\r\n                                    </div>\r\n                                )\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"step\" data-step=\"6\" data-trigger=\"sentiment-grouped\">\r\n                        <p>Now let's group all of the sentences together by character and get an overall sentiment average. {sentimentAnnotations}</p>\r\n                    </div>\r\n\r\n\r\n                    {/* Words Section */}\r\n                    {/* <div className=\"step\" data-step=\"2\" data-trigger=\"words-intro\">\r\n                        <h1>Words</h1>\r\n                        <p>Now let's break down the sentences into individual words and look at how they are used throughout the series.</p>\r\n                    </div>\r\n\r\n                    <div className=\"step\" data-step=\"2\" data-trigger=\"words-reveal\">\r\n                        <p>Here are the top ten words used most in the series. Common words have been ignored to try and make the analysis \r\n                            more interesting. Hover over them to see who said what.\r\n                        </p>\r\n                        <p>{wordAnnotations}</p>\r\n                    </div> */}\r\n\r\n                    <div className=\"step\" data-step=\"2\" data-trigger=\"word-search-reveal\">\r\n                        <h1>Words</h1>\r\n                        <p>Now let's break down the sentences into individual words and look at how they are used throughout the series.</p>\r\n                        <p>You can use the search feature to look for your own words to see where they appear in the series. This will show every line from \r\n                            the series where that word appears, who said it to whom and where it was said.\r\n                        </p>\r\n                    </div>\r\n\r\n\r\n                    {/* Locations Section */}\r\n                    {/* <div className=\"step\" data-step=\"3\">\r\n                        <h1>Locations</h1>\r\n                        <p>This chord diagram visualises who spoke with whom.</p>\r\n                        <p>This chord diagram visualises who spoke with whom.</p>\r\n                        <p>This chord diagram visualises who spoke with whom.</p>\r\n                    </div> */}\r\n\r\n                    {/* Timeline Section */}\r\n                    {/* <div className=\"step\" data-step=\"4\">\r\n                        <h1>Timeline</h1>\r\n                        <p>This chord diagram visualises who spoke with whom.</p>\r\n                        <p>This chord diagram visualises who spoke with whom.</p>\r\n                        <p>This chord diagram visualises who spoke with whom.</p>\r\n                    </div> */}\r\n\r\n                    \r\n                    {/* Stats - Number of lines Section */}\r\n                    <div className=\"step\" data-step=\"7\">\r\n                        <h1>Stats</h1>\r\n                        <h3>Lines</h3>\r\n                        <p>Up to this point we've focused in on individual series, so finally, let's look at some statistics and see how this series compared with the \r\n                            others. Here we have the number of lines per episode with the current series highlighted. We can see a definite upward trend as the series \r\n                            progress.</p>\r\n                        <p>{linesAnnotations}</p>\r\n                    </div>\r\n\r\n\r\n                    {/* Stats - Swears Section */}\r\n                    <div className=\"step\" data-step=\"8\">\r\n                        <h3>Swears</h3>\r\n                        <p>Now let's look at the number of curse words per episode to see how strong the characters' swear game is. Over use of swearing can sometimes \r\n                            be a ploy to get a cheap laugh out of a bad line, but I believe Peep Show uses swearing in a much more intelligent way so I was interested \r\n                            to see how often it is used.\r\n                        </p>\r\n                        <p>Surprisingly, you get at least 25 swear words per episode, often a lot more. This seems high but there were over a quarter of a million words \r\n                            throughout the entire nine series and with just over 2000 total swear words, it equates to less than 1%.\r\n                        </p>\r\n                        <p>The highlighted bars are from the current series but there is no clear trend either per series or overall. What we tend to see is more \r\n                            swearing during acutely stressful or embarrassing situations, particularly when it is Mark who is under stress.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"step\" data-step=\"8\" data-trigger=\"swear-bars-highlight\">\r\n                        <p>Here we have highlighted the 90th percentile and above and can see they are almost exclusively episodes where Mark is stressed \r\n                            out, more than usual anyway. With the exception of \"The Interview\" episode where it was probably Jez that was stressed a bit more than Mark as he had \r\n                            to go to an interview at JLB, the rest are due to Mark. \"Conference\" is when Mark has to pitch the unworkable \"Project Zeus\" to the JLB \r\n                            board. \"The Wedding\" is the sweariest episode in the entire show, for obvious reasons. \"Quantocking II\" is where Mark finds out Jez is in love \r\n                            with Dobby and plans to steal her from him and the final episode, \"Are We Going To Be Alright?\", is where Mark gets sacked from the bank for \r\n                            approving Jez for a dodgy loan and thinks he's won April only to find out Super Hans and Jez have kidnapped Angus.</p>\r\n                    </div>\r\n\r\n                </article>\r\n\r\n                <figure id=\"fig\" style={{ display: showVisual }}>\r\n                    {visualisation}\r\n                </figure>\r\n            </section>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Explorer;\r\n","import Sentiment from './visualisations/sentiment/Sentiment';\r\n\r\nfunction Test() {\r\n  return (\r\n    <Sentiment />\r\n  );\r\n}\r\n\r\nexport default Test;\r\n","// import logo from './logo.svg';\nimport './App.css';\nimport Welcome from './Welcome';\nimport { Switch, Route, useLocation } from 'react-router-dom';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport Explorer from './Explorer';\nimport Test from './Test';\n\nfunction App() {\n  let location = useLocation();\n\n  return (\n    <TransitionGroup>\n      <CSSTransition \n        key={location.key}\n        classNames=\"fade\"\n        timeout={1300}\n      >\n        <Switch location={location}>\n          <Route exact path=\"/\">\n            <Welcome />\n          </Route>\n\n          <Route path=\"/:series/explore\">\n            <Explorer />\n          </Route>\n\n          <Route path=\"/:series/test\">\n            <Test />\n          </Route>\n        </Switch>\n      </CSSTransition>\n    </TransitionGroup>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Switch>\n        <Route path=\"*\">\n          <App />\n        </Route>\n      </Switch>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}